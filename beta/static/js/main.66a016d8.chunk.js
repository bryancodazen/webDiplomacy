(this["webpackJsonpbeta-src"]=this["webpackJsonpbeta-src"]||[]).push([[0],{13:function(t,e,r){"use strict";var a;!function(t){t.DESKTOP="DESKTOP",t.MOBILE="MOBILE",t.MOBILE_LANDSCAPE="MOBILE_LANDSCAPE",t.MOBILE_LG="MOBILE_LG",t.MOBILE_LG_LANDSCAPE="MOBILE_LG_LANDSCAPE",t.TABLET="TABLET",t.TABLET_LANDSCAPE="TABLET_LANDSCAPE"}(a||(a={})),e.a=a},154:function(t,e,r){},155:function(t,e,r){},176:function(t,e,r){"use strict";r.r(e);var a,n=r(0),i=r.n(n),o=r(41),s=r.n(o),c=r(214),u=r(225),l=r(61),d=r(62),h=(r(154),r(155),r(215)),v=r(3),f=r(11),p=r(5),m=r(55),y=r(224),A=r(211);!function(t){t.BOTTOM_LEFT="bottom-left",t.BOTTOM_RIGHT="bottom-right",t.TOP_LEFT="top-left",t.TOP_RIGHT="top-right"}(a||(a={}));var O=a,b=r(1),N={mobile:16,tablet:24,desktop:24},T=function(t){var e=t.children,r=t.position,a=Object(n.useMemo)((function(){switch(r){case O.BOTTOM_LEFT:return{bottom:N,left:N};case O.BOTTOM_RIGHT:return{bottom:N,right:N};case O.TOP_RIGHT:return{right:N,top:N};case O.TOP_LEFT:default:return{left:N,top:N}}}),[r]);return Object(b.jsx)(h.a,{sx:Object(f.a)({position:"absolute",zIndex:2},a),children:e})};T.defaultProps={position:O.TOP_LEFT};var E,S=T,j=r(39),I=r(32),C=r(216),L=r(217),g=r(218),D=r(219),R=r(204),x=r(220),P=function(t){var e=t.children,r=t.lineHeight,a=t.maxHeight,n=t.WebkitLineClamp;return Object(b.jsx)(h.a,{sx:{display:"-webkit-box",lineHeight:r,maxHeight:a,overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical",WebkitLineClamp:n,wordWrap:"break-word"},children:e})},B=r(13),M=r(30),w=r(31),U={border:"none",fontSize:"0.7rem",p:"0 5px 0 0"},k=function(t){var e=t.alternatives,r=t.phase,a=t.potNumber,n=t.season,i=t.title,o=t.year,s=Object(w.a)(),c=Object(p.a)(s,1)[0],u=Object(M.a)(c),l=u===B.a.MOBILE_LANDSCAPE||u===B.a.MOBILE_LG_LANDSCAPE||u===B.a.MOBILE||u===B.a.MOBILE_LG?260:320;return Object(b.jsx)(C.a,{sx:{overflowX:"inherit"},children:Object(b.jsxs)(L.a,{"aria-label":"A table of game information",size:"small",sx:{width:l},children:[Object(b.jsx)(g.a,{children:Object(b.jsx)(D.a,{children:Object(b.jsx)(R.a,{sx:{border:"none",fontWeight:600,p:"2px 5px 5px 0"},children:Object(b.jsx)(P,{lineHeight:"1.2rem",maxHeight:"2.4rem",WebkitLineClamp:2,children:i})})})}),Object(b.jsxs)(x.a,{children:[Object(b.jsx)(D.a,{children:Object(b.jsxs)(R.a,{sx:U,children:["Pot: ",a," - ",n," ",o," - ",Object(b.jsx)("b",{children:r})]})}),Object(b.jsx)(D.a,{children:Object(b.jsx)(R.a,{sx:U,children:e})})]})]})})},_=r(17);!function(t){t[t.cancel=0]="cancel",t[t.draw=1]="draw",t[t.pause=2]="pause"}(E||(E={}));var G=E,H=r(86),F=r(212),V=r(10),Y=[{id:"power",label:"Power",icon:function(){var t=Object(m.a)();return Object(b.jsx)("svg",{width:"17",height:"16",viewBox:"0 0 17 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(b.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.70981 0.477386C1.78835 0.619928 1.82959 0.781129 1.82946 0.94512C1.82981 1.10363 1.79129 1.25965 1.71748 1.39864C1.64367 1.53763 1.53697 1.65507 1.40733 1.74V15H0.422124V1.74C0.288272 1.65169 0.179006 1.52891 0.105082 1.38376C0.0311585 1.23861 -0.0048749 1.07608 0.000529656 0.912187C0.00593421 0.748291 0.0525902 0.588672 0.135905 0.449046C0.219219 0.309419 0.336321 0.194598 0.47568 0.115885C0.615039 0.0371731 0.771851 -0.00271635 0.93068 0.000143651C1.08951 0.00300365 1.24488 0.0485146 1.38149 0.132196C1.51811 0.215878 1.63126 0.334845 1.70981 0.477386ZM6.82686 10.3877C3.67647 10.3877 2.34265 11.6935 2.34265 11.6935V2.12591C3.87882 0.511105 5.98034 0.288913 10.7745 2.00699C14.7654 3.44263 16.7615 1.84034 16.7615 1.84034C15.5 6.5 12.8518 6.80289 12.8518 6.80289C13.3353 8.67822 16.1636 11.7529 16.1636 11.7529C15.8415 11.8953 14.876 12.1089 14.1977 12.0729C12.8739 12.0034 11.8654 11.6305 10.8447 11.2531C9.68237 10.8233 8.50427 10.3877 6.82686 10.3877Z",fill:t.palette.primary.main})})},align:"left"},{id:"unitNo",label:"Units",icon:function(){var t=Object(m.a)();return Object(b.jsx)("svg",{width:"31",height:"16",viewBox:"0 0 30 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(b.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.96588 5.41579H14L9.71916 8.56579L11.2992 14L7 10.8684L2.68241 14L4.29921 8.54737L0 5.41579H5.07087L6.98163 0L8.96588 5.41579ZM28.3195 7.60486C28.8782 7.02312 29.3431 6.35499 29.6971 5.62524C30.0303 6.56852 30.09 7.58962 29.8693 8.56659C29.4904 10.1601 28.9394 10.5462 28.9394 10.5462C28.9274 10.1651 28.8906 9.78515 28.8292 9.40898C28.2569 10.2167 27.5751 10.9376 26.8041 11.5501C26.0815 12.1296 25.3093 12.6418 24.4967 13.0804C24.1235 13.3383 23.7874 13.6478 23.4979 14C23.2105 13.6483 22.8767 13.3388 22.506 13.0804C21.6934 12.6418 20.9212 12.1296 20.1986 11.5501C19.4276 10.9376 18.7458 10.2167 18.1735 9.40898C18.1122 9.78515 18.0753 10.1651 18.0633 10.5462C18.0633 10.5462 17.5123 10.1601 17.1334 8.56659C16.9105 7.59029 16.9678 6.56921 17.2988 5.62524C17.6527 6.35499 18.1176 7.02312 18.6763 7.60486C19.2836 8.05578 19.958 8.40421 20.6739 8.63679C20.195 8.92681 19.6233 9.01258 19.0827 8.87546C19.0827 8.87546 18.7315 8.86142 19.3445 9.38792C19.9317 9.99516 20.635 10.473 21.4109 10.7919C21.5608 10.8277 21.7163 10.8322 21.868 10.8049C22.0197 10.7776 22.1643 10.7192 22.2931 10.6332C22.422 10.5472 22.5323 10.4354 22.6175 10.3046C22.7026 10.1738 22.7608 10.0267 22.7884 9.87229C22.878 9.50726 22.9469 6.45359 22.9469 4.45994L21.5142 4.03172C21.4877 4.06765 21.451 4.09436 21.4091 4.10818C21.3672 4.12201 21.3221 4.12227 21.28 4.10894C21.2372 4.09511 21.1991 4.06938 21.1699 4.03465C21.1407 3.99993 21.1216 3.95758 21.1147 3.91238L20.7427 3.80006C20.7146 3.8358 20.6766 3.86222 20.6337 3.87596C20.5908 3.88971 20.5448 3.89017 20.5017 3.87728C20.4588 3.86468 20.4208 3.83915 20.3925 3.80406C20.3642 3.76897 20.347 3.72597 20.3432 3.68073L20.0264 3.58245C20.001 3.57517 19.9773 3.56284 19.9566 3.54618C19.9359 3.52951 19.9187 3.50883 19.9058 3.48534C19.893 3.46184 19.8849 3.436 19.882 3.40929C19.879 3.38258 19.8813 3.35554 19.8886 3.32973L20.0539 2.76814C20.0763 2.72192 20.1151 2.68607 20.1624 2.66783C20.2097 2.64959 20.262 2.65032 20.3088 2.66986L20.6256 2.76814C20.6538 2.7324 20.6918 2.70598 20.7347 2.69224C20.7776 2.67849 20.8235 2.67803 20.8667 2.69092C20.9091 2.70436 20.9466 2.73013 20.9748 2.76505C21.0029 2.79998 21.0204 2.84253 21.0251 2.88748L21.404 2.99979C21.4304 2.96387 21.4671 2.93716 21.5091 2.92333C21.551 2.90951 21.5961 2.90924 21.6382 2.92258C21.681 2.93518 21.719 2.96071 21.7473 2.9958C21.7756 3.03089 21.7928 3.07389 21.7966 3.11913L22.9606 3.46311V2.86642C22.6471 2.73621 22.3877 2.49902 22.2268 2.19543C22.066 1.89183 22.0136 1.54069 22.0787 1.20209C22.1438 0.863481 22.3223 0.558448 22.5837 0.339171C22.8451 0.119894 23.1731 0 23.5117 0C23.8502 0 24.1783 0.119894 24.4397 0.339171C24.7011 0.558448 24.8796 0.863481 24.9447 1.20209C25.0098 1.54069 24.9574 1.89183 24.7965 2.19543C24.6356 2.49902 24.3762 2.73621 24.0627 2.86642V3.46311L25.2268 3.11913C25.2306 3.07389 25.2478 3.03089 25.2761 2.9958C25.3043 2.96071 25.3424 2.93518 25.3852 2.92258C25.4273 2.90924 25.4724 2.90951 25.5143 2.92333C25.5562 2.93716 25.5929 2.96387 25.6194 2.99979L25.9982 2.88748C26.0029 2.84253 26.0205 2.79998 26.0486 2.76505C26.0768 2.73013 26.1143 2.70436 26.1567 2.69092C26.1998 2.67803 26.2458 2.67849 26.2887 2.69224C26.3316 2.70598 26.3696 2.7324 26.3977 2.76814L26.6939 2.62774C26.7192 2.62025 26.7458 2.61794 26.772 2.62095C26.7982 2.62397 26.8235 2.63224 26.8466 2.64529C26.8696 2.65834 26.8899 2.67592 26.9063 2.697C26.9226 2.71809 26.9347 2.74226 26.9419 2.76814L27.1003 3.34377C27.1077 3.36958 27.1099 3.39662 27.107 3.42333C27.104 3.45004 27.0959 3.47588 27.0831 3.49938C27.0703 3.52287 27.053 3.54355 27.0323 3.56022C27.0117 3.57688 26.9879 3.58921 26.9625 3.59649L26.6457 3.69477C26.6419 3.74001 26.6247 3.78301 26.5964 3.8181C26.5681 3.85319 26.5301 3.87872 26.4873 3.89132C26.4441 3.90421 26.3981 3.90375 26.3552 3.89C26.3123 3.87626 26.2744 3.84984 26.2462 3.8141L25.8742 3.92642C25.8674 3.97162 25.8483 4.01396 25.8191 4.04869C25.7898 4.08342 25.7517 4.10915 25.7089 4.12298C25.6669 4.13631 25.6218 4.13605 25.5798 4.12222C25.5379 4.1084 25.5012 4.08169 25.4747 4.04576L24.0421 4.47398L24.0429 4.5346C24.0704 6.52893 24.1118 9.52497 24.2005 9.88633C24.2281 10.0407 24.2863 10.1878 24.3715 10.3186C24.4566 10.4494 24.5669 10.5612 24.6958 10.6472C24.8246 10.7332 24.9693 10.7916 25.1209 10.8189C25.2726 10.8462 25.4281 10.8418 25.5781 10.8059C26.3539 10.4871 27.0572 10.0092 27.6444 9.40196C28.2575 8.8895 27.9062 8.8895 27.9062 8.8895C27.3657 9.02662 26.7939 8.94085 26.3151 8.65082C27.0342 8.41461 27.7111 8.0614 28.3195 7.60486ZM22.7088 1.11528C22.6659 1.22089 22.6438 1.33408 22.6438 1.44839C22.6414 1.5843 22.6707 1.71886 22.7294 1.84092C22.7881 1.96299 22.8744 2.06907 22.9813 2.15038C22.9951 1.70813 23.0777 1.44839 23.5117 1.44839C23.9456 1.44839 24.0421 1.74323 24.0421 2.15038C24.1439 2.06614 24.225 1.95878 24.2788 1.83688C24.3326 1.71498 24.3577 1.58194 24.352 1.44839C24.352 1.33408 24.3299 1.22089 24.287 1.11528C24.2441 1.00967 24.1812 0.913708 24.1019 0.832878C24.0225 0.752047 23.9284 0.687929 23.8248 0.644184C23.7211 0.600439 23.6101 0.577923 23.4979 0.577923C23.3857 0.577923 23.2747 0.600439 23.1711 0.644184C23.0674 0.687929 22.9733 0.752047 22.894 0.832878C22.8147 0.913708 22.7517 1.00967 22.7088 1.11528Z",fill:t.palette.primary.main})})},align:"center"},{id:"supplyCenterNo",label:"Centers",icon:function(){var t=Object(m.a)();return Object(b.jsxs)("svg",{width:"18",height:"16",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(b.jsx)("path",{d:"M9.00005 17C13.4183 17 17.0001 13.4183 17.0001 9C17.0001 4.58172 13.4183 1 9.00005 1C4.58174 1 1 4.58172 1 9C1 13.4183 4.58174 17 9.00005 17Z",stroke:"black"}),Object(b.jsx)("path",{d:"M9.00324 13.3635C11.4132 13.3635 13.3668 11.4098 13.3668 8.99987C13.3668 6.5899 11.4132 4.63623 9.00324 4.63623C6.5933 4.63623 4.63965 6.5899 4.63965 8.99987C4.63965 11.4098 6.5933 13.3635 9.00324 13.3635Z",fill:t.palette.primary.main})]})},align:"center"},{id:"bet",label:"Bet",icon:function(){var t=Object(m.a)();return Object(b.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(b.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16ZM4.79785 11.8914V4H8.17207C10.5674 4 11.9729 5.36172 11.9729 7.88828C11.9729 10.4148 10.5619 11.8914 8.17207 11.8914H4.79785ZM7.84394 5.84297H7.1166V10.0484H7.84394C9.00332 10.0484 9.61035 9.34297 9.61035 7.88828C9.61035 6.55938 8.9541 5.84297 7.84394 5.84297Z",fill:t.palette.primary.main})})},align:"center"},{id:"excusedMissedTurns",label:"Delays",icon:function(){var t=Object(m.a)();return Object(b.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(b.jsx)("circle",{cx:"8",cy:"8",r:"7",stroke:t.palette.primary.main,strokeWidth:"2"}),Object(b.jsx)("path",{d:"M8 3.5L8 8.5L11 10.5",stroke:t.palette.primary.main,strokeWidth:"2"})]})},align:"center"}],W=function(t){var e=t.countries,r=t.maxDelays,a=Object(m.a)(),i=Object(w.a)(),o=Object(p.a)(i,1)[0],s=Object(M.a)(o),c=s===B.a.MOBILE_LANDSCAPE||s===B.a.MOBILE_LG_LANDSCAPE||s===B.a.MOBILE||s===B.a.MOBILE_LG,u=Object(V.a)(R.a)((function(){var t,e=c?6:"6px 16px";return t={},Object(v.a)(t,"&.".concat(H.a.head),{borderBottom:0,lineHeight:"normal",padding:e}),Object(v.a)(t,"&.".concat(H.a.body),{borderBottom:0,padding:e}),t}));return Object(b.jsx)("div",{children:Object(b.jsxs)(L.a,{"aria-label":"country info table",size:"small",stickyHeader:!0,children:[Object(b.jsx)(g.a,{sx:{height:"55px"},children:Object(b.jsx)(D.a,{sx:{verticalAlign:"top"},children:Y.map((function(t){return Object(b.jsxs)(u,{align:t.align,children:[t.icon&&Object(b.jsx)(t.icon,{}),Object(b.jsx)(h.a,{sx:{fontSize:10,fontWeight:400},children:t.label.toUpperCase()})]},t.id)}))})}),Object(b.jsx)(x.a,{children:e.map((function(t){return Object(b.jsxs)(n.Fragment,{children:[Object(b.jsx)(D.a,{children:Y.map((function(e){var n,i={color:a.palette.primary.main,fontWeight:400};switch(e.id){case"power":n=c?t.abbr.toUpperCase():t.power.toUpperCase(),i.color=t.color,i.fontWeight=700;break;case"excusedMissedTurns":n="".concat(t[e.id],"/").concat(r);break;default:n="".concat(t[e.id])}return Object(b.jsx)(u,{align:e.align,children:Object(b.jsx)("span",{style:i,children:n})},e.id)}))}),t.votes&&Object(b.jsx)(D.a,{children:Object(b.jsxs)(u,{sx:{fontSize:"70%",paddingTop:"0px !important",fontWeight:700},colSpan:Y.length,children:[Object.values(t.votes).reduce((function(t,e){return t+ +e}),0)>0&&Object(b.jsx)(h.a,{sx:{color:a.palette.action.disabledBackground,display:"inline-block",marginRight:1.5},children:"VOTED"}),Object.entries(t.votes).map((function(e){return e[1]&&Object(b.jsx)(F.a,{size:"small",label:e[0].toUpperCase(),sx:{color:a.palette.secondary.main,background:t.color,fontWeight:900,fontSize:"90%",height:14,marginRight:1}},"".concat(t.power,"-vote-").concat(e[0]))}))]})})]},t.power)}))})]})})},z=r(206),K=r(221),Z=function(t){var e=t.children,r=t.color,a=t.disabled,n=t.onClick,i=t.startIcon,o=t.sx;return Object(b.jsx)(K.a,{sx:o,color:r,disabled:a,onClick:n,startIcon:i,variant:"contained",children:e})};Z.defaultProps={color:"primary",disabled:!1,onClick:void 0,startIcon:void 0,sx:void 0};var X,q=Z,Q=function(){return Object(b.jsx)("svg",{width:12,height:11,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(b.jsx)("path",{d:"m2 6.164 2.5 2.5 5.5-7.5",stroke:"#000",strokeWidth:"3"})})},J={draw:"Draw",pause:"Pause",cancel:"Cancel"},$=function(t){var e=t.voteState,r=t.toggleVote,a=Object(w.a)(),n=Object(p.a)(a,1)[0],i=Object(M.a)(n),o=i===B.a.MOBILE_LANDSCAPE||i===B.a.MOBILE_LG_LANDSCAPE||i===B.a.MOBILE,s=o?"10px 10px":"10px 18px",c=o?1:2,u=Object.entries(e).map((function(t){var e=Object(p.a)(t,2),a=e[0],n=e[1];return Object(b.jsx)(q,{sx:{p:s},color:n?"secondary":"primary",onClick:function(){return r(G[a])},startIcon:n?Object(b.jsx)(Q,{}):"",children:J[a]},a)}));return Object(b.jsx)(z.a,{direction:"row",spacing:c,alignItems:"center",children:u})},tt=function(t){var e=t.countries,r=t.gameID,a=t.maxDelays,i=t.userCountry,o=n.useState(i.votes),s=Object(p.a)(o,2),c=s[0],u=s[1],l=Object(w.a)(),d=Object(p.a)(l,1)[0],m=Object(M.a)(d),y=Object(j.a)();n.useEffect((function(){u(i.votes)}),[i]);var A=m===B.a.MOBILE_LANDSCAPE||m===B.a.MOBILE_LG_LANDSCAPE||m===B.a.MOBILE?"0 6px":"0 16px";return Object(b.jsxs)(h.a,{children:[Object(b.jsx)(h.a,{sx:{p:A},children:Object(b.jsx)($,{toggleVote:function(t){var e=G[t],a=Object(f.a)(Object(f.a)({},c),{},Object(v.a)({},e,!c[e])),n=String(r),o=String(i.countryID);u(a),y(Object(I.h)({countryID:o,gameID:n,vote:e.charAt(0).toUpperCase()+e.slice(1)}))},voteState:c})}),Object(b.jsx)(h.a,{sx:{m:"20px 5px 10px 0"},children:Object(b.jsx)(W,{maxDelays:a,countries:[Object(f.a)(Object(f.a)({},i),{},{votes:c})].concat(Object(_.a)(e))})})]})},et=function(t){var e=t.children,r=Object(w.a)(),a=Object(p.a)(r,1)[0],n=Object(M.a)(a),i=n===B.a.MOBILE_LANDSCAPE||n===B.a.MOBILE_LG_LANDSCAPE||n===B.a.MOBILE,o=i?"0 6px":"0 16px",s=i?272:358;return Object(b.jsx)(h.a,{sx:{m:"20px 0 10px 0",p:o,width:s},children:e})};!function(t){t.PRESS="PRESS",t.ORDERS="ORDERS",t.INFO="INFO"}(X||(X={}));var rt=X,at={borderRadius:0,fontWeight:400,minWidth:0,p:"0 0 5px 0","&:hover":{background:"transparent"}},nt={borderRadius:0,borderBottom:"solid black 2px",fontWeight:600,minWidth:0,p:"0 0 5px 0","&:hover":{background:"transparent"}},it=function(t){var e=t.currentTab,r=t.currentView,a=t.onChange;return Object(b.jsx)(K.a,{onClick:function(){return a(e)},sx:r===e?nt:at,children:e})},ot=function(t){var e=t.currentView,r=t.onChange,a=t.padding,n=t.tabGroup.map((function(t){return Object(b.jsx)(it,{currentTab:t,currentView:e,onChange:r},t)}));return Object(b.jsx)(z.a,{alignItems:"center",direction:"row",spacing:2,sx:{p:a},children:n})},st=function(t){var e=t.children,r=t.currentView,a=t.onChange,n=t.padding,i=t.tabGroup;return Object(b.jsxs)(h.a,{children:[Object(b.jsx)(ot,{currentView:r,onChange:a,padding:n,tabGroup:i}),e]})},ct=function(t){var e=t.currentTab,r=t.currentView,a=t.children;return Object(b.jsx)(h.a,{hidden:r!==e,id:e,"aria-labelledby":e,children:r===e&&Object(b.jsx)(h.a,{children:a})})},ut=[rt.PRESS,rt.INFO],lt=function(t){var e=t.alternatives,r=t.children,a=t.countries,i=t.excusedMissedTurns,o=t.gameID,s=t.phase,c=t.potNumber,u=t.season,l=t.title,d=t.userCountry,v=t.year,f=Object(n.useState)(rt.PRESS),m=Object(p.a)(f,2),y=m[0],A=m[1],O=Object(w.a)(),N=Object(p.a)(O,1)[0],T=Object(M.a)(N),E=T===B.a.MOBILE_LANDSCAPE||T===B.a.MOBILE_LG_LANDSCAPE||T===B.a.MOBILE?"0 6px":"0 16px";return Object(b.jsxs)(st,{tabGroup:ut,currentView:y,onChange:function(t){return A(t)},padding:E,children:[Object(b.jsx)(ct,{currentTab:rt.INFO,currentView:y,children:Object(b.jsxs)(h.a,{children:[Object(b.jsx)(h.a,{sx:{m:"20px 0 10px 0",p:E},children:Object(b.jsx)(k,{alternatives:e,phase:s,potNumber:c,season:u,title:l,year:v})}),Object(b.jsx)(tt,{countries:a,maxDelays:i,userCountry:d,gameID:o})]})}),Object(b.jsx)(ct,{currentTab:rt.PRESS,currentView:y,children:Object(b.jsx)(et,{children:r})})]})},dt=r(208),ht=r(222),vt=function(t){var e,r=t.children,a=t.isOpen,n=t.onClose,i=t.anchorEl,o=Object(m.a)(),s=Object(w.a)(),c=Object(p.a)(s,1)[0];switch(Object(M.a)(c)){case B.a.MOBILE:case B.a.MOBILE_LG:case B.a.MOBILE_LANDSCAPE:case B.a.MOBILE_LG_LANDSCAPE:e=!0;break;default:e=!1}return Object(b.jsx)(h.a,{children:Object(b.jsx)(dt.a,{anchorEl:i,anchorOrigin:{horizontal:"left",vertical:"center"},onClose:n,open:a,sx:{pointerEvents:"none"},PaperProps:{sx:{backgroundColor:"transparent",boxShadow:"none",maxHeight:"unset",pointerEvents:"all",filter:o.palette.svg.filters.dropShadows[0]}},transformOrigin:{horizontal:"right",vertical:"center"},children:Object(b.jsxs)(h.a,{sx:{position:"relative",width:e?276:400},children:[Object(b.jsx)(h.a,{sx:{mt:"0px",position:"relative","&::before":{background:o.palette.secondary.main,content:'""',height:22,position:"absolute",left:"calc(90% - 11px)",top:Object(ht.a)(o.breakpoints.up("tablet"))?76:68,transform:"rotateX(45deg) rotateZ(45deg)",width:22}}}),Object(b.jsx)(h.a,{sx:{background:o.palette.secondary.main,borderRadius:3,maxWidth:"90%",minHeight:264,maxHeight:c.height-32,overflowX:"hidden",overflowY:"scroll",m:0,p:"16px 0"},children:r})]})})})};vt.defaultProps={onClose:void 0};var ft,pt=vt,mt=r(35),yt=function(t){var e=t.iconState,r=void 0===e?mt.a.INACTIVE:e,a=Object(m.a)();return Object(b.jsxs)("svg",{filter:a.palette.svg.filters.dropShadows[0],height:42,width:42,viewBox:"6 3 42 42",children:[r===mt.a.ACTIVE&&Object(b.jsx)("circle",{cx:27,cy:24,r:20,fill:"#000"}),Object(b.jsx)("g",{fill:"#fff",children:Object(b.jsx)("path",{d:"M37.12 20.147h-4.293c-.88 0-1.651.77-1.651 1.651v4.294c0 .88.77 1.651 1.651 1.651h4.294c.88 0 1.651-.77 1.651-1.651v-4.294c0-.88-.77-1.651-1.651-1.651Zm-.22 4.073-1.21 1.211c-.11.11-.11.11-.22.11s-.22 0-.22-.11a.335.335 0 0 1 0-.44l.66-.66h-2.642c-.22 0-.33-.11-.33-.331 0-.22.11-.33.33-.33H35.8l-.55-.66a.335.335 0 0 1 0-.441c.11-.11.33-.11.44 0l1.21 1.21c.11.11.11.221 0 .441ZM20.718 20.147h-4.183c-.881 0-1.652.77-1.652 1.651v4.294c0 .88.77 1.651 1.652 1.651h4.293c.88 0 1.652-.77 1.652-1.651v-4.294c-.11-.88-.771-1.651-1.762-1.651Zm-.33 4.073h-2.642l.66.66c.11.11.11.331 0 .441-.11.11-.11.11-.22.11s-.22 0-.22-.11l-1.211-1.21a.335.335 0 0 1 0-.441l1.21-1.211c.11-.11.331-.11.441 0 .11.11.11.33 0 .44l-.66.66h2.642c.22 0 .33.11.33.33 0 .221-.22.331-.33.331ZM28.975 28.404h-4.293c-.88 0-1.651.77-1.651 1.651v4.294c0 .88.77 1.651 1.65 1.651h4.294c.881 0 1.652-.77 1.652-1.651v-4.294c0-.99-.77-1.651-1.652-1.651Zm-.66 4.403-1.211 1.211c-.11.11-.33.11-.44 0l-1.212-1.21c-.11-.11-.11-.11-.11-.22 0-.111 0-.221.11-.221.11-.11.33-.11.44 0l.661.66v-2.642c0-.22.11-.33.33-.33.22 0 .331.11.331.33v2.532l.66-.66c.11-.11.33-.11.44 0 .111.22.111.44 0 .55ZM28.975 12h-4.293c-.88 0-1.651.77-1.651 1.651v4.294c0 .88.77 1.651 1.65 1.651h4.294c.881 0 1.652-.77 1.652-1.651V13.65c0-.88-.77-1.651-1.652-1.651Zm-.66 3.523c-.11.11-.33.11-.44 0l-.661-.66v2.532c0 .22-.11.33-.33.33-.22 0-.33-.11-.33-.33v-2.533l-.661.66c-.11.111-.33.111-.44 0a.335.335 0 0 1 0-.44l1.21-1.21c.11-.11.33-.11.44 0l1.212 1.21c.11.11.11.11.11.22s-.11.22-.11.22Z"})})]})};!function(t){t.AUTUMN="Autumn",t.SPRING="Spring",t.WINTER="Winter"}(ft||(ft={}));var At=ft,Ot=r(213);function bt(t){var e={d:0,h:0,m:0,s:0};return t>0&&(e={d:Math.floor(t/86400),h:Math.floor(t/3600%24),m:Math.floor(t/60%60),s:Math.floor(t%60)}),e}var Nt,Tt=1e3,Et=function(t){var e=t.endTime,r=t.phaseTime,a=Object(m.a)(),i=e*Tt-r*Tt/4,o=e-+new Date/Tt,s=Object(n.useState)(bt(o)),c=Object(p.a)(s,2),u=c[0],l=c[1];Object(n.useEffect)((function(){var t=setTimeout((function(){l(bt(o))}),1e3);return function(){return clearTimeout(t)}}),[o]);var d=function(t){var e=Object.keys(t).filter((function(e){return t[e]}));return e.length>1?"".concat(t[e[0]]).concat(e[0]," ").concat(t[e[1]]).concat(e[1]):0===e.length?"Time Up":"".concat(t[e[0]]).concat(e[0])}(u),h=+new Date>i;return Object(b.jsx)(F.a,{avatar:Object(b.jsx)(Ot.a,{children:Object(b.jsx)("img",{src:h?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAABnlBMVEUAAAD/q6j/nJn/xsT/c23/xsX/npr/5uX/lpL/aWL/2tn/8fD/npv/m5j/cWv/7ez/xsT/mpf/c23/7+//6en/3Nv/1tX/r63/tLL/jIj/hID/cGn/dG7/9fX/z87/wL7/vLr/pqP/fHf/+vr/8vL/1NP/rar/zMr/g37/eXP/3dz/YVn/t7X/oqD/jYn/+Pj/qqj/ZFz/t7X/gn3/j4v/5OP/b2j/6+r/xMP/9vb/4N//uLf/qKX/kIz/0tH/////xsT/srD/e3b/2dj/jIj/vLr/j4v/f3r/eHL/+vr/9vb/5uX/4uH/3Nv/1NP/op//lpP/iYX/hoL/cWv/ysn/vrz/ubf/tbP/ko7/gn3/dW//7Oz/zcz/wL7/rKn/qKb/7u7/6ur/4N//3dz/0c//z87/t7X/n5z/nZr/mZX/hH//bmf/a2T/Zl//ZF3/6Of/1tX/zMr/wsH/r63/rqv/p6T/lJD/bWX/aGH/8/P/5OP/09L/yMb/pKH/m5j/cGn/Ylr/+Pf/8PD/qqj/paL/mpb/397/3t3/wsD/oZ5mKiOUAAAAP3RSTlMA/v5gX+7u397ej19fUEAgICAg7+/v7+/u7u7u7d/f3t7e3c/Pz8/Ozs6/v76+vpCQkI+PjmBQT09AQEBAQD8x8KLFAAABAWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iPz48cjpSREYgeG1sbnM6cj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+PHI6RGVzY3JpcHRpb24geG1sbnM6eD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+PHg6Q3JlYXRlRGF0ZT4yMDIyLTAyLTA4VDE2OjAwOjU5LTAwOjAwPC94OkNyZWF0ZURhdGU+PC9yOkRlc2NyaXB0aW9uPjwvcjpSREY+PD94cGFja2V0IGVuZD0iciI/PsAzAGQAAAHNSURBVCjPXc1nY9JgFIbhA6XV1lr33nvvPQMtIKTURJlCIaQDiMQSKIFipSqCrf/a52R03R9z5TkvbfbqwRVBEMQ7jyZod/vOidGogH4tLY36dtCBqx1R/O3gtxV99PC22ZFep7OFul4989y1F7lcsbeJGLarP+M+5+ZRNVcsioJgIa6yZc/al/fUVEwZLFzRYfFs5Bbbs+npmqrmXMQQu2wkMunj4XdoTRVdbFdtm7xM9DoWizG7Ux0GQh8maGxuzmbn1TaMBT2h2+vrf+HgqIVxEOALuknH5jl21cIICPAVnaapqRmneeswPn92AzoZhoHDvWAw+MmNjhvGR251YbE+I0YbciYcDgetTtE1WxYWZxP+ZKkgeTU5A+cf7tPYKgvoh38jlG6akncgt1qZMH54Su9ZZuuJhL+RTKWbSrdcGWjMmcw7ovOgOnb+fCiVXvaYUrmypsmy3NpLREOYwRr5ZKgUWC4oXansXdPA44Ru8IwxxfjHlP5hO9AwRAeHYRsYptKMSt/SkUMgPowdjDHQ9Ch9HK5U9pPTy+E8D0uMBcXsS9KIa3z5AoY24q7ZvYeb2xq6aCEe9SiXxml3bx7fPRkInLj+8C25/Qfm+Mpp+q+KIQAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAACKFBMVEUAAADX19eRkZFSUlKGhoZ9fX1AQEBmZmYZGRm0tLTs7Ow1NTVxcXGQkJBRUVHm5uavr69zc3MlJSXFxcW6urpmZmaenp5nZ2dSUlLp6enj4+POzs7Hx8eOjo6ysrKrq6uWlpZ2dnZvb29WVlZMTEwlJSUvLy/x8fHe3t7Y2Ni8vLyoqKihoaGCgoI+Pj75+fnt7e3FxcWKioq2trZJSUk0NDTR0dEFBQWZmZl7e3taWlr29vaIiIgLCwvT09PBwcGamppHR0dbW1vb29ujo6N+fn5mZmYYGBgnJyfl5eWurq7y8vLV1dUNDQ2/v7/////9/f2vr68oKCienp7Kysp5eXlycnLg4OC2trahoaFaWloxMTH5+fn09PTy8vLo6Ojb29vPz8/Nzc2oqKiQkJCNjY2EhISBgYF9fX12dnZsbGxgYGBXV1c4ODghISHHx8fFxcW/v7+9vb2qqqqlpaWZmZmKioppaWlUVFRNTU1LS0s1NTUaGhoTExMODg7l5eXk5OTd3d3Z2dnX19fS0tLMzMzCwsK8vLy5ubm4uLizs7OsrKympqabm5uXl5eWlpaTk5OJiYlnZ2dkZGRcXFxPT09HR0dFRUVBQUE/Pz86OjotLS0dHR0XFxcKCgr29vbu7u7s7OzU1NSPj4+GhoZwcHBubm5jY2NISEgkJCTq6uri4uLV1dXR0dHExMTBwcGysrJ/f39eXl5EREQ8PDwrKysFBQVvb2/Jo8KvAAAAT3RSTlMA/v7+/v7+3t5gX19QQEAgICAg/v7+/f397+/v7+/u7u7u7u7u7u3f39/f3t7e3c/Pz8/Ozs6/v76+vpCQkI+Pj4+OYGBfX19QT09AQEA/DLic8gAAAQFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/Ij8+PHI6UkRGIHhtbG5zOnI9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPjxyOkRlc2NyaXB0aW9uIHhtbG5zOng9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iPjx4OkNyZWF0ZURhdGU+MjAyMi0wMi0wOFQxNjowMDo1OS0wMDowMDwveDpDcmVhdGVEYXRlPjwvcjpEZXNjcmlwdGlvbj48L3I6UkRGPjw/eHBhY2tldCBlbmQ9InIiPz7AMwBkAAACK0lEQVQoz13Q51tSYRgG8BdJs6Htvffee+894EAMQZbsw94xRTDKFBAQBQLJMBUty9L693rec45e5n2dT8/vve8PBy3kxY0zHA5HfuXWK7Q0K4/Iqu2A3D/DkeYn/9Gas5/lMhmD4Uqoef2i2rbJEVAKhyPhUNl66Om8PetUKDBWaayErHXe3Cpmc3sUVM7lUs1IuFK28nifDtPLR0VToFwACmmTSi9he6DsEominVgwhkOUBYMWPHwshnVKPo/lOjZLqXQaoZeseAxzlEtjqM4DspSKxaZWdPvLN1Y8rlR2KWi0zkmDpdliofB76B66/L27G3tMWaWQJ7XMNoEMDQ5eRDtUEPyAJaLQUizAfWIiEAgcRO8gHTgq1SRGuPr9/jx8+Tx6w8Rms9vgL4xIzOa3OGw2eyvaCVe7fXo64XD2dMjaXb5x04BEIjFDDqBz9g2JxA+H8/0HMdHn8RqEZDZn+jWAH1xHd0CANoo/Euq2lFYvEI75srlxEzy4j147nNDqAXO5+WmtrhGU9G3C3IrQcUzin0RvXxs/XVumNxiFf0lfNptbjhBagWtgajc/ma5ldAaBUfiVJH1bHiPIBZgkel1Q9PTXvFDFOkZCEbJ2N0EQLrUbo8Y7qpsRYN2/DggPQ08NxWSqX6PN6HDVKFyNmDzfo4Yig6P6GYNgH2308gkwvifVoNHCrr7xGmwuysOTm5OeNMaM7tQjtDQtd6/ubdDsOn+zZeH0DxbGA1vYikZnAAAAAElFTkSuQmCC",alt:"Countdown icon"})}),sx:{backgroundColor:h?a.palette.error.main:a.palette.primary.main,color:a.palette.secondary.main,filter:a.palette.svg.filters.dropShadows[0]},label:d})},St=r(223);!function(t){t.BACKWARD="left",t.FORWARD="right",t.DISABLED="disabled"}(Nt||(Nt={}));var jt=Nt,It=function(t){var e=t.disabled,r=t.direction;return Object(b.jsxs)("svg",{fill:"none",height:"15",width:"8",xmlns:"http://www.w3.org/2000/svg",children:[r===jt.BACKWARD&&Object(b.jsx)("path",{d:"M0 7.5 8 0v15z",fill:"#000",opacity:e?"40%":""}),r===jt.FORWARD&&Object(b.jsx)("path",{d:"m0 0 8 7.5L0 15z",fill:"#000",opacity:e?"40%":""})]})};It.defaultProps={disabled:!1};var Ct=It,Lt=function(t){var e=t.className,r=t.direction,a=t.disabled,n=t.onClick;return Object(b.jsx)(K.a,{sx:{backgroundColor:"secondary.main",boxShadow:"none",borderRadius:"22px",padding:"13px 19px 12px 13px","&:hover, &:focus, &:disabled":{backgroundColor:"#fff",boxShadow:"none"}},className:e,disabled:a,disableRipple:!0,onClick:n,variant:"contained",children:Object(b.jsx)(Ct,{direction:r,disabled:a})})};Lt.defaultProps={disabled:!1,onClick:void 0};var gt=Lt,Dt=function(t){var e=t.disabled,r=t.onChangeSeason,a=t.season,n=t.year,i=Object(m.a)();return Object(b.jsx)(h.a,{sx:{alignItems:"flex-start",display:"flex",backgroundColor:"white",borderRadius:"22px",filter:i.palette.svg.filters.dropShadows[0]},children:Object(b.jsxs)(St.a,{children:[Object(b.jsx)(gt,{className:"WDScroll--Backward",direction:jt.BACKWARD,disabled:e===jt.BACKWARD,onClick:r}),Object(b.jsx)(h.a,{sx:{alignItems:"center",bgcolor:"secondary.main",display:"flex",fontWeight:"bold",fontSize:12,textTransform:"uppercase"},children:"".concat(a," ").concat(n)}),Object(b.jsx)(gt,{className:"WDScroll--Forward",direction:jt.FORWARD,disabled:e===jt.FORWARD,onClick:r})]})})};Dt.defaultProps={disabled:void 0,onChangeSeason:void 0};var Rt=Dt,xt=function(t){var e=t.disabled,r=t.icon,a=t.onClick,n=t.year,i=Object(m.a)().palette.svg.filters.dropShadows[0];return Object(b.jsxs)(K.a,{disabled:e,onClick:a,sx:{position:"relative",fontSize:12,padding:0,minHeight:64,minWidth:64,borderRadius:"50%"},children:[r===mt.a.ACTIVE&&Object(b.jsxs)("svg",{fill:"none",filter:i,height:50,width:50,children:[Object(b.jsx)("circle",{cx:25,cy:25,r:22,fill:"#000"}),Object(b.jsx)("path",{d:"m28 17-9 8 9 8",stroke:"#fff",strokeWidth:3})]}),r===At.AUTUMN&&Object(b.jsx)("svg",{fill:"none",filter:i,height:31,width:27,children:Object(b.jsx)("path",{d:"M19.31 21.29c.12-.62 3.78-3.38 6.94-5.83l-1.18-.38a.85.85 0 0 1-.56-1l1.16-4.18-3.18.87a1 1 0 0 1-1.26-.84l-.15-1.27-3.27 3.15a.38.38 0 0 1-.64-.35l1.31-7-1.84 1a.59.59 0 0 1-.81-.25L13.14 0l-2.68 5.21a.6.6 0 0 1-.82.25l-1.84-1 1.31 7a.38.38 0 0 1-.64.35L5.21 8.66 5.06 9.9a1 1 0 0 1-1.27.84L.58 9.87l1.16 4.18a.85.85 0 0 1-.56 1L0 15.43c3.16 2.45 6.82 5.21 6.94 5.83s-1 2.35-1 2.35a38.53 38.53 0 0 1 5.38-1.41c.94 0 1.17.85 1.17 1.7s-.55 6.45-.27 6.65a2.65 2.65 0 0 0 1.78 0c.22-.2-.27-5.8-.27-6.65s.23-1.68 1.17-1.7c1.825.34 3.623.811 5.38 1.41 0 0-1.11-1.59-.97-2.32z",fill:"#fff"})}),r===At.SPRING&&Object(b.jsxs)("svg",{fill:"none",filter:i,height:32,width:25,children:[Object(b.jsx)("g",{fill:"#fff",children:Object(b.jsx)("path",{d:"m18.87.574-3.42 3.281L12.038 0l-3.42 3.855L5.198.574S-2.82 14.489 11.981 17h.103C26.867 14.49 18.87.574 18.87.574zM24.016 19.526c.3-.987-4.167-.329-4.75-.078-1.249.528-3.585 1.731-4.055 4.561s.154 3.376-.077 3.68c-.231.302 2.832.44 3.961.155a5.78 5.78 0 0 0 2.266-1.07 5.859 5.859 0 0 0 1.61-1.934c1.301-2.155.762-4.38 1.045-5.314zM.044 19.526c-.3-.987 4.168-.329 4.75-.078 1.249.528 3.585 1.731 4.055 4.561s-.154 3.376.077 3.68c.231.302-2.832.44-3.961.155a5.781 5.781 0 0 1-2.266-1.07 5.86 5.86 0 0 1-1.61-1.934C-.17 22.685.326 20.46.043 19.526z"})}),Object(b.jsx)("path",{d:"M12.125 9.187V31",stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})]}),r===At.WINTER&&Object(b.jsx)("svg",{fill:"none",filter:i,height:35,width:31,children:Object(b.jsx)("path",{clipRule:"evenodd",d:"m29.54 25.188.49.53a.178.178 0 0 1-.047.155.179.179 0 0 1-.153.055l-.7-.16c-1.36-.3-2.666-.81-3.87-1.51l-.19-.1-.1 2a.52.52 0 0 1-.22.39l-.19.13a.3.3 0 0 1-.36 0l-.15-.13a.49.49 0 0 1-.19-.42l.14-2.54-.88-.51-.2 3.56a.53.53 0 0 1-.21.39l-.23.16a.29.29 0 0 1-.36 0l-.21-.18a.52.52 0 0 1-.18-.41l.23-4.17-.84-.49-.17 3.07a.479.479 0 0 1-.21.39l-.23.16a.29.29 0 0 1-.36 0l-.22-.19a.54.54 0 0 1-.17-.4l.1-3.16.18-.47-.94-.54-1 1.77h-2v1.08l.5.08 2.79 1.49a.538.538 0 0 1 .26.35v.28a.3.3 0 0 1-.16.33l-.25.11a.51.51 0 0 1-.45 0l-2.76-1.43v1l3.78 1.91a.5.5 0 0 1 .27.35v.27a.3.3 0 0 1-.16.33l-.25.11a.51.51 0 0 1-.45 0l-3.19-1.62v1l2.3 1.14a.51.51 0 0 1 .28.37v.21a.3.3 0 0 1-.17.31l-.21.1a.521.521 0 0 1-.44 0l-1.76-.89v.21a13.93 13.93 0 0 1-.59 4.11l-.22.68a.18.18 0 0 1-.175.138.18.18 0 0 1-.175-.138l-.21-.68a13.62 13.62 0 0 1-.63-4.11v-.21l-1.72.88a.521.521 0 0 1-.44 0l-.22-.1a.29.29 0 0 1-.16-.31v-.21a.521.521 0 0 1 .27-.37l2.27-1.15v-1l-3.18 1.65a.51.51 0 0 1-.45 0l-.25-.11a.32.32 0 0 1-.17-.33l.06-.27a.5.5 0 0 1 .27-.35l3.72-1.89v-1l-2.8 1.39a.51.51 0 0 1-.45 0l-.25-.11a.32.32 0 0 1-.17-.33l.06-.28a.542.542 0 0 1 .26-.35l2.78-1.49.5-.08v-1.07h-2l-1-1.75-.93.53.21.61.1 3.16a.499.499 0 0 1-.18.39l-.21.19a.29.29 0 0 1-.36 0l-.23-.16a.51.51 0 0 1-.22-.39l-.16-3.06-.84.48.22 4.17a.49.49 0 0 1-.17.41l-.21.19a.29.29 0 0 1-.36 0l-.23-.16a.51.51 0 0 1-.21-.39l-.2-3.57-.88.51.14 2.54a.49.49 0 0 1-.19.42l-.16.13a.29.29 0 0 1-.35 0l-.19-.14a.51.51 0 0 1-.22-.39l-.1-2-.17.08a14 14 0 0 1-3.87 1.51l-.7.15a.18.18 0 0 1-.17-.3l.48-.53a13.777 13.777 0 0 1 3.25-2.59l.18-.11-1.71-1.07a.5.5 0 0 1-.22-.38v-.24a.3.3 0 0 1 .19-.3l.2-.07a.48.48 0 0 1 .45.05l2.08 1.44.89-.51-3-1.95a.5.5 0 0 1-.22-.38v-.28a.29.29 0 0 1 .2-.3l.26-.09a.519.519 0 0 1 .44.05l3.5 2.29.84-.49-2.57-1.68a.51.51 0 0 1-.23-.38v-.27a.3.3 0 0 1 .2-.31l.27-.09a.5.5 0 0 1 .43 0l2.7 1.71.31.4.93-.54-1-1.75 1-1.75-.94-.55-.32.4-2.69 1.66a.5.5 0 0 1-.43 0l-.27-.09a.3.3 0 0 1-.2-.31v-.27a.55.55 0 0 1 .23-.39l2.57-1.67-.84-.49-3.49 2.28a.521.521 0 0 1-.45.06l-.26-.09a.29.29 0 0 1-.2-.3v-.28a.48.48 0 0 1 .23-.38l3-1.95-.88-.51-2.08 1.44a.54.54 0 0 1-.45.05l-.2-.08a.28.28 0 0 1-.18-.3v-.23a.5.5 0 0 1 .23-.38l1.64-1.07-.18-.11a13.571 13.571 0 0 1-3.24-2.6l-.49-.52a.19.19 0 0 1 .17-.31l.7.16a13.73 13.73 0 0 1 3.87 1.51l.18.19.1-2a.51.51 0 0 1 .22-.39l.19-.14a.32.32 0 0 1 .36 0l.15.13a.51.51 0 0 1 .19.43l-.14 2.54.88.51.2-3.57a.53.53 0 0 1 .21-.39l.23-.16a.29.29 0 0 1 .36 0l.21.18a.55.55 0 0 1 .18.41l-.23 4.17.84.49.17-3.07a.45.45 0 0 1 .21-.38l.23-.16a.29.29 0 0 1 .36 0l.22.18a.539.539 0 0 1 .17.4l-.1 3.16-.18.47 1 .49 1-1.74h1.93v-1.11l-.5-.07-2.79-1.5a.52.52 0 0 1-.26-.35v-.28a.28.28 0 0 1 .16-.32l.25-.12a.51.51 0 0 1 .45 0l2.76 1.44v-1l-3.8-1.87a.54.54 0 0 1-.27-.36v-.27a.28.28 0 0 1 .16-.32l.25-.12a.51.51 0 0 1 .45 0l3.21 1.59v-1l-2.32-1.11a.51.51 0 0 1-.28-.37v-.2a.31.31 0 0 1 .17-.32l.21-.09a.49.49 0 0 1 .44 0l1.78.85v-.21c-.009-1.392.19-2.777.59-4.11l.22-.68a.18.18 0 0 1 .35 0l.21.68c.418 1.33.63 2.716.63 4.11v.21l1.76-.85a.49.49 0 0 1 .44 0l.18.07a.3.3 0 0 1 .16.32v.2a.519.519 0 0 1-.27.37l-2.27 1.15v1l3.19-1.62a.51.51 0 0 1 .45 0l.25.12a.3.3 0 0 1 .17.32l-.06.27a.54.54 0 0 1-.28.34l-3.72 1.88v1l2.74-1.42a.51.51 0 0 1 .45 0l.24.14a.3.3 0 0 1 .17.32l-.06.28a.52.52 0 0 1-.26.35l-2.78 1.5-.5.07v1.16h2l1 1.73 1-.55-.19-.55-.1-3.16a.52.52 0 0 1 .18-.4l.21-.19a.29.29 0 0 1 .36 0l.23.16a.51.51 0 0 1 .22.39l.16 3.06.84-.48-.22-4.17a.49.49 0 0 1 .17-.41l.21-.19a.3.3 0 0 1 .36 0l.23.15a.51.51 0 0 1 .21.39l.2 3.57.88-.51-.14-2.54a.49.49 0 0 1 .19-.42l.14-.22a.29.29 0 0 1 .35 0l.19.13a.509.509 0 0 1 .22.39l.1 2 .17-.06a13.43 13.43 0 0 1 3.87-1.51l.7-.16a.18.18 0 0 1 .17.3l-.48.53a14.08 14.08 0 0 1-3.25 2.6l-.18.1 1.76.92a.51.51 0 0 1 .22.39v.23a.3.3 0 0 1-.19.3l-.2.07a.48.48 0 0 1-.45 0l-2.13-1.39-.89.51 3 2a.51.51 0 0 1 .22.39v.27a.3.3 0 0 1-.2.31l-.26.08a.521.521 0 0 1-.44 0l-3.5-2.28-.84.48 2.57 1.68a.53.53 0 0 1 .23.38v.28a.29.29 0 0 1-.2.3l-.27.09a.5.5 0 0 1-.43-.05l-2.63-1.66-.31-.39-1 .55 1 1.76-1 1.73.94.54.32-.39 2.67-1.66a.5.5 0 0 1 .43-.05l.27.09a.29.29 0 0 1 .2.3v.28a.55.55 0 0 1-.23.38l-2.57 1.68.84.48 3.51-2.33a.52.52 0 0 1 .45-.06l.26.09a.3.3 0 0 1 .2.31v.27a.52.52 0 0 1-.23.39l-3 2 .88.51 2.04-1.44a.48.48 0 0 1 .45 0l.2.07a.28.28 0 0 1 .18.3v.23a.48.48 0 0 1-.23.38l-1.64 1.08.27.1c1.207.695 2.3 1.572 3.24 2.6zm-14.62-4.52 2.79-1.61v-3.23l-2.79-1.62-2.8 1.62v3.23zm.1-1.84-1.31-.76v-1.51l1.31-.76 1.31.76v1.51z",fill:"#fff",fillRule:"evenodd"})}),Object(b.jsx)(h.a,{sx:{position:"absolute",textAlign:"center",width:64,left:0,bottom:"-7px",color:"#fff",fontWeight:"bold",textTransform:"uppercase"},children:Object(b.jsx)("span",{style:{filter:i},children:n})})]})};xt.defaultProps={onClick:void 0,disabled:!1};var Pt,Bt=xt,Mt=function(){var t=Object(n.useState)(At.SPRING),e=Object(p.a)(t,2),r=e[0],a=e[1],i=Object(n.useState)(1901),o=Object(p.a)(i,2),s=o[0],c=o[1],u=Object(n.useState)(null),l=Object(p.a)(u,2),d=l[0],v=l[1],f=Object(n.useState)(!0),m=Object(p.a)(f,2),y=m[0],A=m[1],O=Object(j.b)(I.e),N=O.phaseMinutes,T=O.processTime,E=O.season,S=O.year,C=60*N;return Object(n.useEffect)((function(){a(E),c(S),v(T)}),[T,E,S]),Object(b.jsxs)(h.a,{sx:{display:"flex",alignItems:"center",height:40,marginTop:"3px"},children:[Object(b.jsx)(Bt,{icon:y?r:mt.a.ACTIVE,onClick:function(){A(!y)},year:s}),y&&d&&Object(b.jsx)(Et,{endTime:d,phaseTime:C}),!y&&Object(b.jsx)(Rt,{season:r,year:s})]})};function wt(t){return t.charAt(0).toUpperCase()+t.slice(1)}!function(t){t.SAVE="save",t.READY="ready"}(Pt||(Pt={}));var Ut=Pt,kt=function(t){var e,r=t.gameState,a=r.ready,n=r.save,i=t.readyDisabled,o=t.toggleState,s=Object(m.a)(),c=Object(w.a)(),u=Object(p.a)(c,1)[0],l=Object(j.b)(I.c).data,d=Object(j.b)(I.d),h=Object(j.a)();switch(Object(M.a)(u)){case B.a.MOBILE:case B.a.MOBILE_LG:case B.a.MOBILE_LANDSCAPE:case B.a.MOBILE_LG_LANDSCAPE:e=!0;break;default:e=!1}var v=function(t){if(h(I.b.processMapClick({name:void 0,clickObject:"save_button"})),"currentOrders"in l&&"contextVars"in l){var e=l.currentOrders,r=l.contextVars;if(r&&e){var n=[];e.forEach((function(t){var e=t.fromTerrID,r=t.id,a=t.toTerrID,i=t.type,o=t.unitID,s=t.viaConvoy,c=d[r].update,u={fromTerrID:e,id:r,toTerrID:a,type:i,unitID:o,viaConvoy:s};c&&(u=Object(f.a)(Object(f.a)({},u),c)),n.push(u)}));var i={orderUpdates:n,context:JSON.stringify(r.context),contextKey:r.contextKey,queryParams:{}};t===Ut.READY&&(i.queryParams=a?{notready:"on"}:{ready:"on"}),h(Object(I.g)(i))}}t===Ut.READY&&o(t)},y=Object.values(d),A=y.length,O=y.reduce((function(t,e){return t+ +e.saved}),0);(A===O&&n||A!==O&&!n)&&o(Ut.SAVE);var N=a||!n;return Object(b.jsxs)(z.a,{alignItems:"center",direction:e?"column":"row",spacing:2,children:[Object(b.jsx)(q,{color:"primary",disabled:N,onClick:function(){return v(Ut.SAVE)},sx:{filter:N?void 0:s.palette.svg.filters.dropShadows[0]},children:"Save"}),Object(b.jsx)(q,{color:"primary",disabled:i,onClick:function(){return v(Ut.READY)},sx:{filter:i?void 0:s.palette.svg.filters.dropShadows[0]},children:a?"Unready":"Ready"})]})},_t=r(44),Gt=function(t){var e=t.iconState,r=void 0===e?mt.a.INACTIVE:e,a=Object(m.a)();return Object(b.jsxs)("svg",{filter:a.palette.svg.filters.dropShadows[0],height:40,width:40,xmlns:"http://www.w3.org/2000/svg",children:[r===mt.a.ACTIVE&&Object(b.jsx)("circle",{cx:"20",cy:"20",r:"20",fill:"#000"}),Object(b.jsx)("path",{d:"M30.692 16.247 20.579 7.562a.874.874 0 0 0-1.137 0L9.307 16.247a.855.855 0 0 0-.251.962c.063.167.176.31.325.412a.9.9 0 0 0 .506.156h2.047V28.94a.42.42 0 0 0 .127.289.436.436 0 0 0 .294.124h5.074a.436.436 0 0 0 .294-.124.42.42 0 0 0 .126-.29v-7.59a.41.41 0 0 1 .124-.292.425.425 0 0 1 .297-.121h3.413c.111 0 .218.043.297.12a.41.41 0 0 1 .124.293v7.59a.42.42 0 0 0 .126.29.436.436 0 0 0 .294.124h5.074a.436.436 0 0 0 .294-.124.42.42 0 0 0 .127-.29V17.778h2.047a.9.9 0 0 0 .524-.136.875.875 0 0 0 .346-.41.856.856 0 0 0-.244-.984Z",fill:"#fff"})]})},Ht=r(45),Ft={Russia:"RUS",Germany:"GER",Italy:"ITA",Austria:"AUS",England:"ENG",France:"FRA",Turkey:"TUR"},Vt={save:!1,ready:!1},Yt=function(){var t,e=Object(m.a)(),r=n.useState(!1),a=Object(p.a)(r,2),i=a[0],o=a[1],s=n.useState(!1),c=Object(p.a)(s,2),u=c[0],l=c[1],d=n.useRef(null),N=Object(j.b)(I.e),T=N.alternatives,E=N.excusedMissedTurns,C=N.gameID,L=N.members,g=N.name,D=N.phase,R=N.pot,x=N.season,P=N.user,B=N.year,M=Object(j.b)(I.c).data.contextVars,w=function(t){var r=_t.a[t.country];return Object(f.a)(Object(f.a)({},t),{},{abbr:Ft[t.country],color:e.palette[r].main,power:r,votes:{cancel:t.votes.includes(wt(G[G.cancel])),draw:t.votes.includes(wt(G[G.draw])),pause:t.votes.includes(wt(G[G.pause]))}})},U=[];L.forEach((function(t){t.userID!==P.member.userID&&U.push(w(t))}));var k=w(P.member),_=function(){o(!i)},H=Object(b.jsx)(y.a,{sx:{padding:0,pointerEvents:"all"},onClick:_,children:Object(b.jsx)(yt,{iconState:i?mt.a.ACTIVE:mt.a.INACTIVE})}),F=n.useState(Vt),V=Object(p.a)(F,2),Y=V[0],W=V[1];if(n.useEffect((function(){d.current&&setTimeout((function(){_()}),1e3)}),[d]),null!==M&&void 0!==M&&null!==(t=M.context)&&void 0!==t&&t.orderStatus){var z=Object(Ht.a)(M.context.orderStatus);z.None&&l(!0),!z.Ready&&Y.ready&&W((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(v.a)({},Ut.READY,!1))})),!z.Ready&&!z.None||Y.ready||W((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(v.a)({},Ut.READY,!0))}))}var K=d.current?Object(b.jsx)(pt,{isOpen:i,onClose:function(){o(!1)},anchorEl:d.current,children:Object(b.jsx)(lt,{alternatives:T,countries:U,excusedMissedTurns:E,gameID:C,phase:D,potNumber:R,season:x,title:g,userCountry:k,year:B,children:null})}):null;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(S,{position:O.TOP_RIGHT,children:[Object(b.jsx)(A.a,{href:"/",children:Object(b.jsx)(Gt,{})}),Object(b.jsx)(h.a,{sx:{pt:"15px"},ref:d,children:H}),K]}),Object(b.jsx)(S,{position:O.TOP_LEFT,children:Object(b.jsx)(Mt,{})}),Object(b.jsx)(S,{position:O.BOTTOM_RIGHT,children:Object(b.jsx)(kt,{readyDisabled:u,gameState:Y,toggleState:function(t){W((function(e){return Object(f.a)(Object(f.a)({},e),{},Object(v.a)({},t,!Y[t]))}))}})})]})},Wt=n.lazy((function(){return r.e(3).then(r.bind(null,226))})),zt=function(){return Object(b.jsxs)(n.Suspense,{fallback:Object(b.jsx)("div",{children:"Loading..."}),children:[Object(b.jsx)(Wt,{}),Object(b.jsx)(Yt,{})]})},Kt=function(){var t=new URLSearchParams(window.location.search).get("gameID");return Object(j.a)()(Object(I.f)(String(t))),Object(b.jsx)(h.a,{className:"App",children:Object(b.jsx)(zt,{})})},Zt=r(20),Xt=Object(Zt.a)({reducer:{game:I.a}});s.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(l.a,{store:Xt,children:Object(b.jsxs)(c.a,{theme:d.a,children:[Object(b.jsx)(u.a,{}),Object(b.jsx)(Kt,{})]})})}),document.getElementById("root"))},18:function(t,e,r){"use strict";var a;!function(t){t[t.CONVOY=0]="CONVOY",t[t.IMPLIED=1]="IMPLIED",t[t.IMPLIED_FOREIGN=2]="IMPLIED_FOREIGN",t[t.MOVE=3]="MOVE",t[t.MOVE_FAILED=4]="MOVE_FAILED",t[t.RETREAT=5]="RETREAT",t[t.SUPPORT_HOLD=6]="SUPPORT_HOLD",t[t.SUPPORT_MOVE=7]="SUPPORT_MOVE"}(a||(a={})),e.a=a},23:function(t,e,r){"use strict";var a;!function(t){t[t.CONVOY=0]="CONVOY",t[t.MOVE=1]="MOVE",t[t.SUPPORT=2]="SUPPORT",t[t.HOLD=3]="HOLD"}(a||(a={})),e.a=a},30:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var a=r(55),n=r(13);function i(t){var e=t.height,r=t.width,i=Object(a.a)();return r>=i.breakpoints.values.desktop?n.a.DESKTOP:r>=i.breakpoints.values.tabletLandscape&&e<=i.breakpoints.values.tablet?n.a.TABLET_LANDSCAPE:r>=i.breakpoints.values.mobileLgLandscape&&e<=i.breakpoints.values.mobileLg?n.a.MOBILE_LG_LANDSCAPE:r>=i.breakpoints.values.tablet&&e>=i.breakpoints.values.tabletLandscape?n.a.TABLET:r>=i.breakpoints.values.mobileLg&&e>=i.breakpoints.values.mobileLgLandscape?n.a.MOBILE_LG:r>=i.breakpoints.values.mobileLandscape?n.a.MOBILE_LANDSCAPE:n.a.MOBILE}},31:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var a=r(5),n=r(0);function i(){var t=function(){var t=window.visualViewport,e=t.height,r=t.width,a=window.visualViewport.scale;return{height:e=Math.round(e*a),width:r=Math.round(r*a),scale:a}},e=n.useState(t()),r=Object(a.a)(e,2),i=r[0],o=r[1],s=function(){o(t())};return n.useEffect((function(){return window.addEventListener("resize",s),function(){return window.removeEventListener("resize",s)}}),[]),[i,s]}},32:function(t,e,r){"use strict";r.d(e,"h",(function(){return ct})),r.d(e,"g",(function(){return ut})),r.d(e,"f",(function(){return lt})),r.d(e,"b",(function(){return ht})),r.d(e,"c",(function(){return vt})),r.d(e,"e",(function(){return ft})),r.d(e,"d",(function(){return pt}));var a,n=r(5),i=r(49),o=r(27),s=r.n(o),c=r(20);!function(t){t.GAME_DATA="game/data",t.GAME_STATUS="game/status",t.GAME_MESSAGES="game/getmessages",t.GAME_OVERVIEW="game/overview",t.GAME_TOGGLEVOTE="game/togglevote"}(a||(a={}));var u=a,l=r(85),d=r.n(l),h=function(t){return Object.entries(t).reduce((function(t,e){var r=Object(n.a)(e,2),a=r[0],i=r[1];return i&&t.push("".concat(encodeURI(a),"=").concat(encodeURI(i))),t}),[]).join("&")},v=d.a.create({baseURL:"https://test.webdiplomacy.net",headers:{"Content-Type":"multipart/form-data"}}),f=function(t,e){return v.get("api.php?route=".concat(t,"&").concat(h(e)))},p=d.a.create({baseURL:"https://test.webdiplomacy.net",headers:{"Content-Type":"application/x-www-form-urlencoded"}}),m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).length?p.post("ajax.php?".concat(h(e)),t):p.post("ajax.php",t)},y={apiStatus:"idle",board:void 0,data:{msg:"",referenceCode:"",success:!1,data:{currentOrders:[],territories:{},territoryStatuses:[],units:{}}},error:null,order:{inProgress:!1,method:"click",onTerritory:null,orderID:"",subsequentClicks:[],toTerritory:null,unitID:""},ordersMeta:{},ownUnits:[],maps:{territoryToUnit:{},unitToOrder:{},unitToTerritory:{},enumToTerritory:{},territoryToEnum:{}},territoriesMeta:{},commands:{mapCommands:{},territoryCommands:{},unitCommands:{}},overview:{alternatives:"",anon:"Yes",drawType:"draw-votes-public",excusedMissedTurns:4,gameID:0,gameOver:"No",members:[],minimumBet:5,name:"",pauseTimeRemaining:null,phase:"",phaseMinutes:14400,playerTypes:"",pot:35,potType:"",processStatus:"",processTime:null,season:"Spring",startTime:0,turn:0,user:{member:{bet:5,country:"Russia",countryID:1,excusedMissedTurns:0,missedPhases:0,newMessagesFrom:[],online:!1,orderStatus:{},status:"Playing",supplyCenterNo:4,timeLoggedIn:0,unitNo:4,userID:1,username:"",votes:[]}},variant:{id:1,mapID:1,name:"Classic",fullName:"Classic",description:"The standard Diplomacy map of Europe.",author:"Avalon Hill",countries:[],variantClasses:{drawMap:"Classic",adjudicatorPreGame:"Classic"},codeVersion:null,cacheVersion:null,coastParentIDByChildID:{76:8,77:8,78:32,79:32,80:20,81:20},coastChildIDsByParentID:{8:[76,77],32:[78,79],20:[80,81]},terrIDByName:null,supplyCenterCount:34,supplyCenterTarget:18},variantID:1,year:1901},status:{gameID:2,countryID:0,variantID:1,potType:"",turn:0,phase:"",gameOver:"No",pressType:"",phases:[],standoffs:[],occupiedFrom:[],votes:null,orderStatus:"",status:""},messages:{messages:[],pressType:"",phase:""}},A=r(22),O=r(83),b=r(44),N=r(4),T={Clyde:{territory:N.a.CLYDE,unitSlotName:"main"},Edinburgh:{territory:N.a.EDINBURGH,unitSlotName:"main"},Liverpool:{territory:N.a.LIVERPOOL,unitSlotName:"main"},Yorkshire:{territory:N.a.YORK,unitSlotName:"main"},Wales:{territory:N.a.WALES,unitSlotName:"main"},London:{territory:N.a.LONDON,unitSlotName:"main"},Portugal:{territory:N.a.PORTUGAL,unitSlotName:"main"},Spain:{territory:N.a.SPAIN,unitSlotName:"main"},"North Africa":{territory:N.a.NORTH_AFRICA,unitSlotName:"main"},Tunis:{territory:N.a.TUNIS,unitSlotName:"main"},Naples:{territory:N.a.NAPLES,unitSlotName:"main"},Rome:{territory:N.a.ROME,unitSlotName:"main"},Tuscany:{territory:N.a.TUSCANY,unitSlotName:"main"},Piedmont:{territory:N.a.PIEDMONT,unitSlotName:"main"},Venice:{territory:N.a.VENICE,unitSlotName:"main"},Apulia:{territory:N.a.APULIA,unitSlotName:"main"},Greece:{territory:N.a.GREECE,unitSlotName:"main"},Albania:{territory:N.a.ALBANIA,unitSlotName:"main"},Serbia:{territory:N.a.SERBIA,unitSlotName:"main"},Bulgaria:{territory:N.a.BULGARIA,unitSlotName:"main"},Rumania:{territory:N.a.RUMANIA,unitSlotName:"main"},Constantinople:{territory:N.a.CONSTANTINOPLE,unitSlotName:"main"},Smyrna:{territory:N.a.SMYRNA,unitSlotName:"main"},Ankara:{territory:N.a.ANKARA,unitSlotName:"main"},Armenia:{territory:N.a.ARMENIA,unitSlotName:"main"},Syria:{territory:N.a.SYRIA,unitSlotName:"main"},Sevastopol:{territory:N.a.SEVASTOPOL,unitSlotName:"main"},Ukraine:{territory:N.a.UKRAINE,unitSlotName:"main"},Warsaw:{territory:N.a.WARSAW,unitSlotName:"main"},Livonia:{territory:N.a.LIVONIA,unitSlotName:"main"},Moscow:{territory:N.a.MOSCOW,unitSlotName:"main"},"St. Petersburg":{territory:N.a.SAINT_PETERSBURG,unitSlotName:"main"},Finland:{territory:N.a.FINLAND,unitSlotName:"main"},Sweden:{territory:N.a.SWEDEN,unitSlotName:"main"},Norway:{territory:N.a.NORWAY,unitSlotName:"main"},Denmark:{territory:N.a.DENMARK,unitSlotName:"main"},Kiel:{territory:N.a.KIEL,unitSlotName:"main"},Berlin:{territory:N.a.BERLIN,unitSlotName:"main"},Prussia:{territory:N.a.PRUSSIA,unitSlotName:"main"},Silesia:{territory:N.a.SILESIA,unitSlotName:"main"},Munich:{territory:N.a.MUNICH,unitSlotName:"main"},Ruhr:{territory:N.a.RUHR,unitSlotName:"main"},Holland:{territory:N.a.HOLLAND,unitSlotName:"main"},Belgium:{territory:N.a.BELGIUM,unitSlotName:"main"},Picardy:{territory:N.a.PICARDY,unitSlotName:"main"},Brest:{territory:N.a.BREST,unitSlotName:"main"},Paris:{territory:N.a.PARIS,unitSlotName:"main"},Burgundy:{territory:N.a.BURGUNDY,unitSlotName:"main"},Marseilles:{territory:N.a.MARSEILLES,unitSlotName:"main"},Gascony:{territory:N.a.GASCONY,unitSlotName:"main"},"Barents Sea":{territory:N.a.BARENTS_SEA,unitSlotName:"main"},"Norwegian Sea":{territory:N.a.NORWEGIAN_SEA,unitSlotName:"main"},"North Sea":{territory:N.a.NORTH_SEA,unitSlotName:"main"},Skagerrack:{territory:N.a.SKAGERRACK,unitSlotName:"main"},"Heligoland Bight":{territory:N.a.HELIGOLAND_BIGHT,unitSlotName:"main"},"Baltic Sea":{territory:N.a.BALTIC_SEA,unitSlotName:"main"},"Gulf of Bothnia":{territory:N.a.GULF_OF_BOTHNIA,unitSlotName:"main"},"North Atlantic Ocean":{territory:N.a.NORTH_ATLANTIC,unitSlotName:"main"},"Irish Sea":{territory:N.a.IRISH_SEA,unitSlotName:"main"},"English Channel":{territory:N.a.ENGLISH_CHANNEL,unitSlotName:"main"},"Mid-Atlantic Ocean":{territory:N.a.MIDDLE_ATLANTIC,unitSlotName:"main"},"Western Mediterranean":{territory:N.a.WESTERN_MEDITERRANEAN,unitSlotName:"main"},"Gulf of Lyons":{territory:N.a.GULF_OF_LYONS,unitSlotName:"main"},"Tyrrhenian Sea":{territory:N.a.TYRRHENIAN_SEA,unitSlotName:"main"},"Ionian Sea":{territory:N.a.IONIAN_SEA,unitSlotName:"main"},"Adriatic Sea":{territory:N.a.ADRIATIC_SEA,unitSlotName:"main"},"Aegean Sea":{territory:N.a.AEGEAN_SEA,unitSlotName:"main"},"Eastern Mediterranean":{territory:N.a.EASTERN_MEDITERRANEAN,unitSlotName:"main"},"Black Sea":{territory:N.a.BLACK_SEA,unitSlotName:"main"},Tyrolia:{territory:N.a.TYROLIA,unitSlotName:"main"},Bohemia:{territory:N.a.BOHEMIA,unitSlotName:"main"},Vienna:{territory:N.a.VIENNA,unitSlotName:"main"},Trieste:{territory:N.a.TRIESTE,unitSlotName:"main"},Budapest:{territory:N.a.BUDAPEST,unitSlotName:"main"},Galicia:{territory:N.a.GALICIA,unitSlotName:"main"},"Spain (North Coast)":{parent:N.a.SPAIN,territory:N.a.SPAIN_NORTH_COAST,unitSlotName:"nc"},"Spain (South Coast)":{parent:N.a.SPAIN,territory:N.a.SPAIN_SOUTH_COAST,unitSlotName:"sc"},"St. Petersburg (North Coast)":{parent:N.a.SAINT_PETERSBURG,territory:N.a.SAINT_PETERSBURG_NORTH_COAST,unitSlotName:"nc"},"St. Petersburg (South Coast)":{parent:N.a.SAINT_PETERSBURG,territory:N.a.SAINT_PETERSBURG_SOUTH_COAST,unitSlotName:"sc"},"Bulgaria (North Coast)":{parent:N.a.BULGARIA,territory:N.a.BULGARIA_NORTH_COAST,unitSlotName:"nc"},"Bulgaria (South Coast)":{parent:N.a.BULGARIA,territory:N.a.BULGARIA_SOUTH_COAST,unitSlotName:"sc"}},E=r(35),S=r(210);function j(t,e,r,a){var n=Object(A.a)(t).commands[r],i=new Map(n[a])||new Map;i.set(Object(S.a)(),e),t.commands[r][a]=i}function I(t){var e=Object(A.a)(t),r=e.ordersMeta,a=e.territoriesMeta,n=e.overview,i=n.members,o=n.phase,s=e.maps,c=e.ownUnits;"Builds"===o&&(c.forEach((function(e){j(t,{command:"NONE"},"unitCommands",e)})),Object.values(r).forEach((function(e){var r=e.update;if(r){var n=r.toTerrID,o=r.type;if(n){var c=a[s.territoryToEnum[n]];if(c)if("Destroy"===o&&n){j(t,{command:"DESTROY"},"unitCommands",s.territoryToUnit[n])}else{var u=O.b[o],l=T[c.name],d=i.find((function(t){return t.countryID.toString()===c.countryID}));if(d){var h={command:"SET_UNIT",data:{setUnit:{componentType:"Icon",country:b.a[null===d||void 0===d?void 0:d.country],iconState:E.a.BUILD,unitSlotName:l.unitSlotName,unitType:O.a[u]}}},v=c.territory===N.a.SAINT_PETERSBURG_NORTH_COAST||c.territory===N.a.SAINT_PETERSBURG_SOUTH_COAST?N.a[N.a.SAINT_PETERSBURG]:N.a[c.territory];j(t,h,"territoryCommands",v),j(t,h={command:"MOVE"},"territoryCommands",v)}}}}})))}var C=r(11),L=r(18),g=r(23),D=r(34);var R=r(40);function x(t){var e=Object(A.a)(t),r=e.data.data.currentOrders,a=e.order,n=e.ordersMeta,i=e.overview.phase;null===r||void 0===r||r.forEach((function(e){var r=e.id,o=e.unitID,s=n[r].update,c=null===s||void 0===s?void 0:s.toTerrID,u=null===s||void 0===s?void 0:s.type;if("Retreats"===i){var l={command:"HOLD"};"Retreat"!==u||c?"Retreat"===u&&c?l={command:"NONE"}:"Disband"===u&&a.orderID!==r&&(l={command:"DISBAND"}):l={command:"DISLODGED"},j(t,l,"unitCommands",o)}}))}function P(t){var e=Object(A.a)(t),r=e.board,a=e.data.data,i=e.maps,o=e.ordersMeta,s=e.overview.phase,c=e.ownUnits;R.b("line").remove(),function(t,e,r,a){var i=t.currentOrders,o=t.territories,s=t.units,c=Object.entries(r);c.length&&s&&o&&c.filter((function(t){var e=Object(n.a)(t,2)[1].update;return"Move"===(null===e||void 0===e?void 0:e.type)})).forEach((function(t){var c=Object(n.a)(t,2),u=c[0],l=c[1].update,d=null===i||void 0===i?void 0:i.find((function(t){return t.id===u}));if(d&&l){var h=l.convoyPath,v=l.toTerrID,f=l.viaConvoy;if(v){var p=d.id,m=d.unitID,y=s[m],A=o[y.terrID],O=o[v],b=T[A.name].territory,N=T[O.name].territory;if(Object(D.a)(p,g.a.MOVE,L.a.MOVE,"territory",N,b),"Yes"===f&&a){var E=h;if(!h){var S,j=a.findTerritoryByID(y.terrID);E=null===(S=a.findUnitByID(m))||void 0===S?void 0:S.ConvoyGroup.pathArmyToCoastWithoutFleet(j,a.findTerritoryByID(v),j)}E&&E.filter((function(t){return t!==y.terrID})).forEach((function(t){var a=e.territoryToUnit[t],n=e.unitToOrder[a],i=r[n].update;(null===i||void 0===i?void 0:i.fromTerrID)===y.terrID&&(null===i||void 0===i?void 0:i.toTerrID)===l.toTerrID||Object(D.a)("".concat(p,"-implied"),g.a.CONVOY,L.a.IMPLIED,"arrow",p,Number(e.territoryToEnum[e.unitToTerritory[a]]))}))}}}}))}(a,i,o,r),function(t,e,r,a){var i=t.currentOrders,o=t.territories,s=t.units,c=Object.entries(r);c.length&&s&&o&&c.filter((function(t){var e=Object(n.a)(t,2)[1].update;return"Support move"===(null===e||void 0===e?void 0:e.type)})).forEach((function(t){var s=Object(n.a)(t,2),c=s[0],u=s[1].update,l=null===i||void 0===i?void 0:i.find((function(t){return t.id===c}));if(l&&u){var d=u.fromTerrID,h=u.toTerrID;if(d&&h){var v=l.id,f=l.unitID,p=e.territoryToUnit[d],m=e.unitToOrder[p],y=e.unitToTerritory[f],A=o[y];if(a.includes(p)){var O=r[m].update;if(O){var b=O.type,N=O.toTerrID,E=m;"Move"===b&&N===h||(E="".concat(v,"-implied"),Object(D.a)(E,g.a.MOVE,L.a.IMPLIED,"territory",T[o[h].name].territory,T[o[d].name].territory)),Object(D.a)(v,g.a.SUPPORT,L.a.SUPPORT_MOVE,"arrow",E,T[A.name].territory)}}else{var S="".concat(v,"-foreign");Object(D.a)(S,g.a.MOVE,L.a.IMPLIED_FOREIGN,"territory",T[o[h].name].territory,T[o[d].name].territory),Object(D.a)(v,g.a.SUPPORT,L.a.SUPPORT_MOVE,"arrow",S,T[A.name].territory)}}}}))}(a,i,o,c),function(t,e){var r=t.currentOrders,a=t.territories,i=t.units,o=Object.entries(e);o.length&&i&&a&&o.filter((function(t){var e=Object(n.a)(t,2)[1].update;return"Support hold"===(null===e||void 0===e?void 0:e.type)})).forEach((function(t){var e=Object(n.a)(t,2),o=e[0],s=e[1].update,c=r.find((function(t){return t.id===o}));if(c&&s&&s.toTerrID){var u=c.id,l=c.unitID,d=i[l],h=a[d.terrID],v=a[s.toTerrID],f=T[h.name].territory,p=T[v.name].territory;Object(D.a)(u,g.a.HOLD,L.a.SUPPORT_HOLD,"unit",p,f)}}))}(a,o),function(t,e,r){var a=t.currentOrders,i=t.territories,o=t.units,s=Object.entries(r);s.length&&o&&i&&s.filter((function(t){var e=Object(n.a)(t,2)[1].update;return"Convoy"===(null===e||void 0===e?void 0:e.type)})).forEach((function(t){var o=Object(n.a)(t,2),s=o[0],c=o[1].update,u=null===a||void 0===a?void 0:a.find((function(t){return t.id===s}));if(u&&c){var l=c.fromTerrID,d=c.toTerrID;if(l&&d){var h=u.id,v=u.unitID,f=e.territoryToUnit[l],p=e.unitToOrder[f],m=e.unitToTerritory[v],y=i[m],A=r[p].update;c.toTerrID===(null===A||void 0===A?void 0:A.toTerrID)?Object(D.a)(h,g.a.CONVOY,L.a.CONVOY,"arrow",p,T[y.name].territory):(Object(D.a)("".concat(h,"-implied"),g.a.MOVE,L.a.IMPLIED,"territory",Number(e.territoryToEnum[d]),Number(e.territoryToEnum[l])),Object(D.a)(h,g.a.CONVOY,L.a.CONVOY,"arrow","".concat(h,"-implied"),T[y.name].territory))}}}))}(a,i,o),I(t),"Retreats"===s&&(x(t),function(t,e){var r=t.currentOrders,a=t.territories,i=t.units,o=Object.entries(e);o.length&&i&&a&&o.filter((function(t){var e=Object(n.a)(t,2)[1].update;return"Retreat"===(null===e||void 0===e?void 0:e.type)})).forEach((function(t){var e=Object(n.a)(t,2),o=e[0],s=e[1].update,c=r.find((function(t){return t.id===o}));if(c&&s&&s.toTerrID){var u=c.id,l=c.unitID,d=i[l],h=a[d.terrID],v=a[s.toTerrID],f=T[h.name].territory,p=T[v.name].territory;Object(D.a)(u,g.a.MOVE,L.a.RETREAT,"territory",p,f)}}))}(a,o))}function B(t,e){Object.entries(e).forEach((function(e){var r=Object(n.a)(e,2),a=r[0],i=r[1];t.ordersMeta[a]=Object(C.a)(Object(C.a)({},t.ordersMeta[a]),i)})),P(t)}function M(t){var e=Object(A.a)(t),r=e.territoriesMeta,a=e.overview.members;if(Object.keys(r).length){var n={};a.forEach((function(t){n[t.countryID]=t.country})),Object.values(r).forEach((function(e){var r=e.ownerCountryID,a=e.territory,i=r?n[r]:void 0;if(a){var o={command:"CAPTURED",data:{country:i?b.a[i]:"none"}};j(t,o,"territoryCommands",N.a[a])}}))}}function w(t){var e=Object(A.a)(t),r=e.order,a=r.unitID,n=r.type,i=e.overview.phase;"hold"!==n&&"retreat"!==n&&j(t,{command:"Retreats"===i?"DISLODGED":"NONE"},"unitCommands",a);if("disband"===n){j(t,{command:"DISBAND"},"unitCommands",a)}t.order.inProgress=!1,t.order.unitID="",t.order.orderID="",t.order.onTerritory=0,t.order.toTerritory=0,t.order.subsequentClicks=[],delete t.order.type}var U=r(45);function k(t,e){var r=Object(A.a)(t).order,a=r.unitID,n=r.type;if(a&&"hold"!==n&&"disband"!==n){j(t,{command:"NONE"},"unitCommands",a)}delete t.order.type;var i=function(t,e){var r,a=e.method,n=e.onTerritory,i=e.orderID,o=e.toTerritory,s=e.type,c=e.unitID,u=Object(A.a)(t).data.data,l={inProgress:!0,method:a,onTerritory:n,orderID:i||(null===(r=u.currentOrders.find((function(t){return t.unitID===c})))||void 0===r?void 0:r.id),subsequentClicks:[],toTerritory:o,unitID:c};return s&&(l.type=s),l}(t,e.payload);t.order=i;var o=i.unitID;if(o){j(t,{command:"SELECTED"},"unitCommands",o)}}var _=r(3);var G=r(17),H=r(38),F=["main","nc","sc"],V=r(25),Y=r(26),W=function(){function t(e,r){Object(V.a)(this,t),this.node=e,this.pathToNode=r,this.complete=!1,this.alternativeChecked=!1,this.pathNextNodes=[],this.rank=0}return Object(Y.a)(t,[{key:"includes",value:function(t){return this.node===t||null!=this.pathToNode&&this.pathToNode.includes(t)}},{key:"addNode",value:function(e){return new t(e,this)}},{key:"removeFirst",value:function(){null!=this.pathToNode&&(null!=this.pathToNode.pathToNode&&this.pathToNode.removeFirst(),this.newPathToNode(null))}},{key:"setComplete",value:function(t){this.node.path=this,null===this.pathToNode&&this.setRank(0),t&&-1===this.pathNextNodes.indexOf(t)&&(this.pathNextNodes.forEach((function(t){t.changeRank(1)})),t.setRank(this.pathNextNodes.length),this.pathNextNodes.push(t)),this.complete||(this.complete=!0,null!==this.pathToNode&&this.pathToNode.setComplete(this))}},{key:"getRank",value:function(){return this.rank+(null!==this.pathToNode?this.pathToNode.getRank():0)}},{key:"changeRank",value:function(t){this.rank+=t}},{key:"setRank",value:function(t){var e=t-this.rank;this.changeRank(e)}},{key:"getLastPathNode",value:function(){return 0===this.pathNextNodes.length?this:this.pathNextNodes[0].getLastPathNode()}},{key:"removePathNextNode",value:function(t){this.complete&&(-1!==this.pathNextNodes.indexOf(t)&&(this.pathNextNodes.splice(this.pathNextNodes.indexOf(t),1),this.pathNextNodes.forEach((function(t){t.changeRank(-1)})),0===this.pathNextNodes.length&&(this.node.path=null,this.dissolvePathToNode())))}},{key:"dissolvePathToNode",value:function(){null!=this.pathToNode&&this.pathToNode.removePathNextNode(this),this.complete=!1}},{key:"newPathToNode",value:function(t){return this.dissolvePathToNode(),this.pathToNode=t,this}},{key:"attachToNodePath",value:function(){return this.node.hasPath()?this.node.path.newPathToNode(this.pathToNode):this}},{key:"getNextNodeRank",value:function(){return this.getRank()+this.pathNextNodes.length-1}},{key:"searchAlternativeRoutes",value:function(t){if(this.complete){if(!this.alternativeChecked)if(t(this.node)||this.pathNextNodes.filter((function(e){return e.node===t})))this.alternativeChecked=!0;else{var e=this.getNextNodeRank(),r=new z(this.node,(function(r){return t(r)||r.hasPath()&&e<r.getMaxRank()}),(function(t){return e<t.getMaxRank()}));if(r.findPath()){var a=r.path;t(a.node)||(a=a.attachToNodePath()),a.removeFirst().newPathToNode(this),a.setComplete(),a.pathToNode.searchAlternativeRoutes(t)}else this.alternativeChecked=!0}null!==this.pathToNode&&this.pathToNode.searchAlternativeRoutes(t)}}},{key:"getAlternativeRoute",value:function(){var t=this;return this.alternativeChecked?null===this.pathToNode?null:this.pathToNode.pathNextNodes.length>1?this.pathToNode.pathNextNodes.find((function(e){return e!==t}),this).getLastPathNode():this.pathToNode.getAlternativeRoute():null}},{key:"canBeAppendedTo",value:function(t){t.markPath(t);var e=!0;return this.node.inPath===t?e=!1:null!==this.pathToNode&&(e=this.pathToNode.canBeAppendedTo(t)),e}},{key:"markPath",value:function(t){this.node.inPath!==t&&(this.node.inPath=t,null!==this.pathToNode&&this.pathToNode.markPath(t))}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.push(this.node.id),null!=this.pathToNode?this.pathToNode.toArray(t):t}},{key:"getLength",value:function(){return 1+(null!==this.pathToNode?this.pathToNode.getLength():0)}},{key:"getFirst",value:function(){return null===this.pathToNode?this:this.pathToNode.getFirst()}},{key:"getAllPathsFromThis",value:function(){return 0===this.pathNextNodes.length?this:this.pathNextNodes.map((function(t){return t.getAllPathsFromThis()})).flat()}}]),t}(),z=function(){function t(e,r,a){Object(V.a)(this,t),this.startTerr=e,this.fEndNode=r,this.fAllNode=a,this.success=!1,this.path=null}return Object(Y.a)(t,[{key:"findPath",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=new W(this.startTerr,null);r.node.setVisited(this);for(var a=r.node.getValidBorderTerritories().filter((function(r){return!e||!t.fEndNode(r)}),this).map((function(t){return r.addNode(t)})),n=function(){var e=a.shift();if(t.fEndNode(e.node))return t.success=!0,t.path=e,{v:!0};!e.node.visited(t)&&t.fAllNode&&t.fAllNode(e.node)||(e.node.setVisited(t),e.node.getValidBorderTerritories().forEach((function(t){a.push(e.addNode(t))})))};a.length>0;){var i=n();if("object"===typeof i)return i.v}return!1}}]),t}(),K=function(){function t(){Object(V.a)(this,t),this.Nodes={},this.Path=void 0}return Object(Y.a)(t,[{key:"addNodes",value:function(t){var e=this;t.map((function(t){return e.addNode(t)}))}},{key:"addNode",value:function(t){this.Nodes[t.id]=t}},{key:"initNodes",value:function(t){Object.values(this.Nodes).map((function(e){return e.nodeInit(t)}))}},{key:"routeSetLoad",value:function(t){var e=this;Object(G.a)(t.fleets).map((function(t){return e.addNode(t.Territory)})),Object(G.a)(t.armies).map((function(t){return e.addNode(t.Territory)})),Object(G.a)(t.coasts).map((function(t){return e.addNode(t)}))}},{key:"routeSetStart",value:function(t,e,r,a){this.initNodes(new z(t,e,r));var n=Object.values(this.Nodes).filter(a);if(1===n.length){var i=Object.values(this.Nodes).find(e);if(!i)return!1;var o=function(t){return t.id===n[0].id},s=new z(t,o);if(!s.findPath())return!1;var c,u,l=new z(i,o);if(!l.findPath())return!1;if(!l.path.pathToNode.canBeAppendedTo(s.path))if(s.path.getLength()>l.path.getLength()&&(s=l,i=t),s.path.setComplete(),s.path.pathToNode.searchAlternativeRoutes(o),!new z(i,(function(t){return o(t)||t.hasPath()&&t.getMaxRank()>0}),(function(t){return!t.hasPath()})).findPath())return!1;return o(l.path.node)?(c=s.path,u=l.path):(c=l.path.node.path.getAlternativeRoute(),u=l.path.attachToNodePath().getLastPathNode()),this.Path=c.toArray().reverse().concat(u.pathToNode.toArray()),this.Path[0]!==t.id&&this.Path.reverse(),this.Path.pop(),!0}if(n.length===Object.keys(this.Nodes).length){var d=new z(t,e);return!!d.findPath(!0)&&(this.Path=d.path.toArray().reverse(),this.Path.pop(),!0)}return!1}}]),t}(),Z=Object.freeze({Child:"Child",No:"No",Parent:"Parent"}),X=Object.freeze({Build:"Build",Diplomacy:"Diplomacy",Retreat:"Retreat"}),q=Object.freeze({Army:"Army",Fleet:"Fleet"}),Q=Object.freeze({Coast:"Coast",Land:"Land",Sea:"Sea"}),J=(Object.freeze({Hold:"Hold",Move:"Move",SupportHold:"Support hold",SupportMove:"Support move",Convoy:"Convoy",Retreat:"Retreat",Disband:"Disband",BuildArmy:"Build army",BuildFleet:"Build fleet",Wait:"Wait",Destroy:"Destroy"}),function(){function t(e){Object(V.a)(this,t),this.board=e,this.armies=new Set,this.coasts=new Set,this.fleets=new Set}return Object(Y.a)(t,[{key:"setArmies",value:function(t){this.armies=t}},{key:"setCoasts",value:function(t){this.coasts=t}},{key:"setFleets",value:function(t){this.fleets=t}},{key:"loadFleet",value:function(t){var e=this;t.convoyLink||t.Territory.type!==Q.Sea||(t.setConvoyLink(),t.setConvoyGroup(this),this.fleets.add(t),this.board.getBorderTerritories(t.Territory).forEach((function(t){t.type===Q.Sea&&t.Unit&&e.loadFleet(t.Unit)})))}},{key:"loadCoasts",value:function(){var t=this;this.fleets.forEach((function(e){t.board.getBorderTerritories(e.Territory).forEach((function(e){e.type!==Q.Coast||t.coasts.has(e)||(e.setConvoyGroups(t),t.coasts.add(e),e.Unit&&e.Unit.type===q.Army&&t.armies.add(e.Unit))}))}))}},{key:"linkGroups",value:function(){var e=this;this.coasts.forEach((function(r){if(!r.convoyLink){if(1===r.ConvoyGroups.length)r.setConvoyGroup(r.ConvoyGroups[0]);else{var a=new t(e.board);r.setConvoyGroup(a),r.ConvoyGroups.forEach((function(t){r.ConvoyGroup.setArmies(new Set([].concat(Object(G.a)(Array.from(r.ConvoyGroup.armies)),Object(G.a)(Array.from(t.armies))))),r.ConvoyGroup.setCoasts(new Set([].concat(Object(G.a)(Array.from(r.ConvoyGroup.coasts)),Object(G.a)(Array.from(t.coasts))))),r.ConvoyGroup.setFleets(new Set([].concat(Object(G.a)(Array.from(r.ConvoyGroup.fleets)),Object(G.a)(Array.from(t.fleets)))))}))}r.setConvoyLink(),r.Unit&&r.Unit.type===q.Army&&(r.Unit.setConvoyLink(),r.Unit.setConvoyGroup(r.ConvoyGroup))}}))}},{key:"nodeSetClass",value:function(){var t=new K;return t.routeSetLoad(this),t}},{key:"pathArmyToCoast",value:function(t,e){var r=this.nodeSetClass();return r.routeSetStart(t,(function(t){return(null===t||void 0===t?void 0:t.id)===e.id}),(function(t){return t.type===Q.Sea}),(function(){return!0})),r.Path}},{key:"pathArmyToCoastWithoutFleet",value:function(t,e,r){var a=this.nodeSetClass();return a.routeSetStart(t,(function(t){return(null===t||void 0===t?void 0:t.id)===e.id}),(function(t){return t.type===Q.Sea&&t.id!==r.id}),(function(){return!0})),a.Path}},{key:"pathArmyToCoastWithFleet",value:function(t,e,r){var a=this.nodeSetClass();return a.routeSetStart(t,(function(t){return(null===t||void 0===t?void 0:t.id)===e.id}),(function(t){return t.type===Q.Sea}),(function(t){return t.id===r.id})),a.Path}}]),t}()),$=function(){function t(e,r,a){Object(V.a)(this,t),this.id=void 0,this.countryID=void 0,this.coast=void 0,this.coastParent=void 0,this.coastParentID=void 0,this.convoyLink=void 0,this.name=void 0,this.occupiedFromTerrID=void 0,this.ownerCountryID=void 0,this.supply=void 0,this.standoff=void 0,this.type=void 0,this.unitID=void 0,this.Borders=void 0,this.CoastalBorders=void 0,this.ConvoyGroup=void 0,this.ConvoyGroups=void 0,this.Unit=void 0,this.convoyNode=!0,this.board=void 0,this.lastVisitedBy=null,this.lastSearchNotSuccess=null,this.path=null,this.validBorderTerritoriesCache=[],this.search=void 0,this.inPath=null,Object.assign(this,Object(C.a)(Object(C.a)({},e),{},{supply:"Yes"===e.supply,ConvoyGroups:[],convoyLink:!1})),a&&Object.assign(this,a),this.board=r}return Object(Y.a)(t,[{key:"setUnit",value:function(t){this.Unit=t}},{key:"setCoastParent",value:function(t){var e=t.Borders,r=t.supply;this.coastParent=t,this.Borders=e,this.supply=r}},{key:"setConvoyLink",value:function(){this.convoyLink=!0}},{key:"setConvoyGroups",value:function(t){this.ConvoyGroups.push(t)}},{key:"setConvoyGroup",value:function(t){this.ConvoyGroup=t}},{key:"nodeInit",value:function(t){this.convoyNode=!0,this.lastVisitedBy=null,this.lastSearchNotSuccess=null,this.path=null,this.validBorderTerritoriesCache=[],this.search=t,this.inPath=null}},{key:"visited",value:function(t){return this.lastVisitedBy===t}},{key:"setVisited",value:function(t){this.lastVisitedBy&&!this.lastVisitedBy.success&&(this.lastSearchNotSuccess=this.lastVisitedBy),this.lastVisitedBy=t}},{key:"getMaxRank",value:function(){return this.hasPath()&&this.path?this.path.getRank():null!==this.lastSearchNotSuccess?this.lastSearchNotSuccess.path.getNextNodeRank():1/0}},{key:"hasPath",value:function(){return!(null===this.path)}},{key:"isConvoyNode",value:function(){return!!this.convoyNode&&this.convoyNode}},{key:"getValidBorderTerritories",value:function(){var t=this;return this.validBorderTerritoriesCache.length||(this.validBorderTerritoriesCache=this.Borders.filter((function(t){return t.f})).map((function(e){return t.board.findTerritoryByID(e.id)})).filter((function(e){return!!t.search&&(!!e&&(e.isConvoyNode()&&e.id!==t.search.startTerr.id&&(t.search.fAllNode(e)||t.search.fEndNode(e))))}))),this.validBorderTerritoriesCache}}]),t}(),tt=function(){function t(e){Object(V.a)(this,t),this.id=void 0,this.countryID=void 0,this.convoyLink=void 0,this.type=void 0,this.terrID=void 0,this.Territory=void 0,this.ConvoyGroup=void 0,Object.assign(this,Object(C.a)(Object(C.a)({},e),{},{convoyLink:!1}))}return Object(Y.a)(t,[{key:"setTerritory",value:function(t){this.Territory=t}},{key:"setConvoyGroup",value:function(t){this.ConvoyGroup=t}},{key:"setConvoyLink",value:function(){this.convoyLink=!0}},{key:"canCrossBorder",value:function(t){return!(this.type===q.Army&&!t.a||this.type===q.Fleet&&!t.f)}}]),t}(),et=function(){function t(e,r,a,n){var i=this;Object(V.a)(this,t),this.context=e,this.convoyGroups=[],this.supplyCenters=[],this.territories=[],this.units=[];var o=[],s=[];this.territories=r.map((function(t){var e=a.find((function(e){return e.id===t.id})),r=new $(t,i);if(e){var c;if(r=new $(t,i,e),e.unitID){var u=n.find((function(t){return t.id===e.unitID}));c=u?new tt(u):null}c&&(r.setUnit(c),c.setTerritory(r),i.units.push(c))}return r.coast===Z.Parent&&o.push(r),r.coast===Z.Child&&s.push(r),r.coastParentID===r.id&&(r.coastParent=r),r})),s.forEach((function(t){var e=o.find((function(e){return e.id===t.coastParentID}));e&&t.setCoastParent(e)})),e.phase===X.Diplomacy&&(this.units.forEach((function(t){if(t.type===q.Fleet&&t.Territory.type===Q.Sea){var e=new J(i);e.loadFleet(t),e.loadCoasts(),i.convoyGroups.push(e)}})),this.convoyGroups.forEach((function(t){return t.linkGroups()})),this.convoyGroups.forEach((function(t){return t.linkGroups()}))),e.phase===X.Build&&this.territories.forEach((function(t){t.coastParent.supply&&t.coastParent.countryID===e.countryID&&t.coastParent.ownerCountryID===e.countryID&&!t.coastParent.Unit&&i.supplyCenters.push(t)}))}return Object(Y.a)(t,[{key:"findUnitByID",value:function(t){return this.units.find((function(e){return e.id===t}))}},{key:"findTerritoryByID",value:function(t){return this.territories.find((function(e){return e.id===t}))}},{key:"getBorderTerritories",value:function(t){var e=t.Borders.map((function(t){return t.id}));return this.territories.filter((function(t){return e.includes("".concat(t.id))}))}},{key:"getBorderUnits",value:function(t){return this.getBorderTerritories(t.coastParent).map((function(t){return t.Unit}))}},{key:"getMovableTerritories",value:function(t){var e=this;return t.Territory.CoastalBorders.reduce((function(r,a){if(t.canCrossBorder(a)){var n=e.territories.find((function(t){return t.id===a.id}));n&&r.push(n)}return r}),[])}},{key:"getReachableTerritories",value:function(e){if(!e.convoyLink&&e.type!==q.Army)return[];var r=this.getMovableTerritories(e),a=Array.from(e.ConvoyGroup.coasts).reduce((function(r,a){return t.canConvoyTo(a,e)&&r.push(a),r}),[]);return Array.from(new Set(r.concat(a)))}},{key:"getMovableUnits",value:function(t){return this.getMovableTerritories(t).reduce((function(t,e){return e.coastParent.Unit&&t.push(e.coastParent.Unit),t}),[])}},{key:"canMoveInto",value:function(t,e){return!!this.getMovableTerritories(t).map((function(t){return t.coastParent.id})).includes(e.coastParent.id)}}],[{key:"canConvoyTo",value:function(t,e){if(e.type===q.Army){if(t.id===e.Territory.id)return!1;if(e.convoyLink&&t.convoyLink&&e.ConvoyGroup.coasts.has(t))return!0}return!1}}]),t}(),rt=function(){function t(e,r,a){Object(V.a)(this,t),this.board=e,this.orderData=r,this.unit=a}return Object(Y.a)(t,[{key:"getMoveChoices",value:function(){var t=this,e=this.board.getMovableTerritories(this.unit).map((function(t){return t}));if(this.unit.convoyLink&&this.unit.type===q.Army){var r=Array.from(this.unit.ConvoyGroup.coasts).reduce((function(e,r){return et.canConvoyTo(r,t.unit)&&e.push(r),e}),[]);return Array.from(new Set(e.concat(r)))}return e}},{key:"getSupportHoldChoices",value:function(){var t=this.board.getMovableUnits(this.unit).reduce((function(t,e){return e.Territory.coastParent&&t.push(e.Territory.coastParent),t}),[]);return Array.from(new Set(t))}},{key:"getSupportMoveToChoices",value:function(){return this.board.getMovableTerritories(this.unit).map((function(t){return t.coastParent}))}},{key:"getSupportMoveFromChoices",value:function(t){var e=this,r=this.board.getBorderUnits(t.coastParent).filter((function(r){return r&&e.board.canMoveInto(r,t)}));if(t.convoyLink){var a=Array.from(t.ConvoyGroup.armies);r=[].concat(Object(G.a)(r),Object(G.a)(a))}return Array.from(new Set(r.map((function(t){return t.Territory.coastParent})))).filter((function(r){return r.id!==e.unit.Territory.coastParentID&&r.id!==t.id}))}},{key:"getConvoyToChoices",value:function(){return this.unit.convoyLink?Array.from(this.unit.ConvoyGroup.coasts).map((function(t){return t.id})):[]}},{key:"getConvoyFromChoices",value:function(t){var e=this;return this.unit.convoyLink?Array.from(this.unit.ConvoyGroup.armies).filter((function(r){return t.id!==r.Territory.id&&!!t.ConvoyGroup.pathArmyToCoastWithFleet(r.Territory,t,e.unit.Territory)})):[]}}]),t}();function at(t,e){t.apiStatus="succeeded",t.data=e.payload;var r,a=Object(A.a)(t),i=a.data.data,o=a.overview,s=o.members,c=o.phase,u=o.user;i.contextVars&&(r=new et(i.contextVars.context,Object.values(i.territories),i.territoryStatuses,Object.values(i.units)),t.board=r),t.maps=function(t){var e=t.currentOrders,r=t.territories,a=t.units,n={},i={},o={},s={},c={};return Object.values(a).forEach((function(t){var e=t.id,r=t.terrID;n[r]=e,o[e]=r})),Object.values(r).forEach((function(t){var e=t.id,r=t.name;s[T[r].territory]=e,c[e]=T[r].territory.toString()})),null===e||void 0===e||e.forEach((function(t){var e=t.id,r=t.unitID;i[r]=e})),{territoryToUnit:n,unitToOrder:i,unitToTerritory:o,enumToTerritory:s,territoryToEnum:c}}(i),t.ownUnits=[],Object.values(i.units).forEach((function(e){e.countryID===u.member.countryID.toString()&&t.ownUnits.push(e.id)}));var l=function(t,e){var r=[],a=t.contextVars,n=t.territories,i=t.territoryStatuses,o=t.units;return Object.values(o).forEach((function(t){var s=n[t.terrID],c=i.find((function(e){return t.terrID===e.id})),u=Object.values(o).filter((function(e){return e.terrID===t.terrID}));if(null!==c&&void 0!==c&&c.occupiedFromTerrID&&t.id===c.unitID&&(null===c||void 0===c?void 0:c.ownerCountryID)===t.countryID&&u.length>1&&"Retreats"===(null===a||void 0===a?void 0:a.context.phase)&&(s=n[c.occupiedFromTerrID]),s){var l=T[s.name];if(l){var d=e.find((function(e){return e.countryID.toString()===t.countryID}));if(d){var h=d.country;r.push({country:b.a[h],mappedTerritory:l,unit:t})}}}})),r}(i,s);l.forEach((function(e){var r=e.country,a=e.mappedTerritory,n=e.unit,i={command:"SET_UNIT",data:{setUnit:{componentType:"Game",country:r,mappedTerritory:a,unit:n,unitType:n.type,unitSlotName:a.unitSlotName}}};j(t,i,"territoryCommands",a.parent?N.a[a.parent]:N.a[a.territory])})),t.territoriesMeta=function(t){var e=t.territories,r=t.territoryStatuses,a={};return Object.entries(e).forEach((function(t){var e=Object(n.a)(t,2),i=e[0],o=e[1],s=o.coast,c=o.coastParentID,u=o.countryID,l=o.name,d=o.supply,h=o.type,v=T[l],f=r.find((function(t){var e=t.id;return i===e})),p="0"===u?null:u,m=null;f&&(m="0"===f.ownerCountryID?null:f.ownerCountryID);var y=v.territory;a[y]||(a[y]={coast:s,coastParentID:c,countryID:p,id:i,name:l,ownerCountryID:m,standoff:!!f&&f.standoff,supply:"Yes"===d,territory:y,type:h,unitID:f?f.unitID:null})})),a}(i),M(t),B(t,function(t,e,r){var a=t.contextVars,n=t.currentOrders,i=t.territories,o=t.units,s={};if(null!==a&&void 0!==a&&a.context)if("Builds"===r)null===n||void 0===n||n.forEach((function(t){var e=t.id,r=t.toTerrID,a=t.type;s[e]={saved:!0,update:{type:r?a:"Wait",toTerrID:r}}}));else{var c=[];if(!e)return s;null===n||void 0===n||n.forEach((function(t){var a=t.id,n=t.unitID,i=t.type,u=t.toTerrID,l=t.fromTerrID,d=t.viaConvoy,h=e.findUnitByID(n);if(!h&&"Retreats"===r){var v;if(null===(v=h=new tt(o[n]))||void 0===v||!v.Territory){var f=e.findTerritoryByID(o[n].terrID);f&&h.setTerritory(f)}e.units.push(h)}h&&(c.push(new rt(e,t,h)),s[a]={update:{type:i,toTerrID:u,fromTerrID:l,viaConvoy:d}})})),c.forEach((function(t){var a=t.getMoveChoices(),n=t.getSupportMoveToChoices(),o=t.getSupportHoldChoices(),c=[],u=t.getConvoyToChoices(),l=[];u.forEach((function(t){var e=i[t];l.push(e.name)})),n.forEach((function(e){var r=t.getSupportMoveFromChoices(e);r.length&&c.push({supportMoveTo:e,supportMoveFrom:r})}));var d=e.findUnitByID(t.unit.id),h=[];if(d){if(h=a.filter((function(t){var e=t.Borders.find((function(t){return t.id===(null===d||void 0===d?void 0:d.terrID)}));return!(!e||null===d||void 0===d||!d.canCrossBorder(e))})),"Retreats"===r){var v=e.territories.find((function(t){return t.id===(null===d||void 0===d?void 0:d.terrID)}));(h=h.filter((function(t){return!t.unitID&&!t.standoff&&t.id!==(null===v||void 0===v?void 0:v.occupiedFromTerrID)}))).length||(s[t.orderData.id].update.type="Disband")}s[t.orderData.id]=Object(C.a)(Object(C.a)(Object(C.a)({},{saved:!0}),s[t.orderData.id]),{},{allowedBorderCrossings:h,supportMoveChoices:c,supportHoldChoices:o,convoyToChoices:u})}}))}return s}(i,r,c))}var nt=Object(c.b)(u.GAME_DATA,function(){var t=Object(i.a)(s.a.mark((function t(e){var r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(u.GAME_DATA,e);case 2:return r=t.sent,a=r.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),it=Object(c.b)(u.GAME_OVERVIEW,function(){var t=Object(i.a)(s.a.mark((function t(e){var r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(u.GAME_OVERVIEW,e);case 2:return r=t.sent,a=r.data.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),ot=Object(c.b)(u.GAME_STATUS,function(){var t=Object(i.a)(s.a.mark((function t(e){var r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(u.GAME_STATUS,e);case 2:return r=t.sent,a=r.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),st=Object(c.b)(u.GAME_MESSAGES,function(){var t=Object(i.a)(s.a.mark((function t(e){var r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(u.GAME_MESSAGES,e);case 2:return r=t.sent,a=r.data.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),ct=Object(c.b)(u.GAME_TOGGLEVOTE,function(){var t=Object(i.a)(s.a.mark((function t(e){var r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(u.GAME_TOGGLEVOTE,e);case 2:return r=t.sent,a=r.data,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),ut=Object(c.b)("game/submitOrders",function(){var t=Object(i.a)(s.a.mark((function t(e){var r,a,n,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new FormData).set("orderUpdates",JSON.stringify(e.orderUpdates)),r.set("context",e.context),r.set("contextKey",e.contextKey),t.next=6,m(r,e.queryParams);case 6:return a=t.sent,n=a.headers["x-json"]||"",i=JSON.parse(n.substring(1,n.length-1)),t.abrupt("return",i);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),lt=function(t){return function(){var e=Object(i.a)(s.a.mark((function e(r){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(it({gameID:t}));case 2:return a=e.sent,n=a.payload.user.member.countryID,e.next=6,Promise.all([r(nt({gameID:t,countryID:n})),r(st({gameID:t,countryID:n,allMessages:"true"}))]);case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},dt=Object(c.c)({name:"game",initialState:y,reducers:{resetOrder:w,updateOrdersMeta:function(t,e){B(t,e.payload)},updateTerritoriesMeta:function(t,e){t.territoriesMeta=e.payload},processUnitDoubleClick:function(t,e){var r,a=Object(A.a)(t),n=a.data.data.contextVars;if(a.ownUnits.includes(e.payload.unitID)){var i;if(null!==n&&void 0!==n&&null!==(r=n.context)&&void 0!==r&&r.orderStatus)if(Object(U.a)(null===n||void 0===n||null===(i=n.context)||void 0===i?void 0:i.orderStatus).Ready)return;k(t,e)}},processUnitClick:function(t,e){var r,a,i=Object(A.a)(t),o=i.data,s=i.maps,c=i.order,u=i.ordersMeta,l=i.ownUnits,d=i.overview,h=o.data,v=h.currentOrders,f=h.contextVars,p=h.units,m=c.inProgress,y=c.method,O=c.onTerritory,b=c.orderID,N=c.type,T=c.unitID,E=d.phase;if(null!==f&&void 0!==f&&null!==(r=f.context)&&void 0!==r&&r.orderStatus&&Object(U.a)(null===f||void 0===f||null===(a=f.context)||void 0===a?void 0:a.orderStatus).Ready)return;var S=null===v||void 0===v?void 0:v.some((function(t){return"Destroy"===t.type}));if("Builds"===E){if(!l.includes(e.payload.unitID)||!S)return;var j=Object.entries(u).find((function(t){var r=Object(n.a)(t,2)[1].update;return(null===r||void 0===r?void 0:r.toTerrID)===s.unitToTerritory[e.payload.unitID]}));if(j){var I=Object(n.a)(j,2),L=I[0],g=I[1];L&&g&&B(t,Object(_.a)({},L,{saved:!1,update:{type:"Destroy",toTerrID:null}}))}else{var D=function(t,e){for(var r,a=0;a<(null===t||void 0===t?void 0:t.length);a+=1){var n,i=t[a].id,o=e[i];if(!o.update||null===(n=o.update)||void 0===n||!n.toTerrID){r=i;break}}return r}(v,u);D&&B(t,Object(_.a)({},D,{saved:!1,update:{type:"Destroy",toTerrID:s.unitToTerritory[e.payload.unitID]}}))}}else if(m)if(T===e.payload.unitID)w(t),"disband"!==N&&"retreat"!==N||M(t);else if("hold"!==N&&"move"!==N||null===O){if("dblClick"===y&&T!==e.payload.unitID)t.order.subsequentClicks.push(Object(C.a)(Object(C.a)({},{inProgress:!0,order:b,toTerritory:null}),e.payload));else if(l.includes(e.payload.unitID)){var R=p[T].type,x=p[e.payload.unitID].type;"Army"===R&&"Fleet"===x?(t.order.type="convoy",t.order.subsequentClicks.push(Object(C.a)(Object(C.a)({},{inProgress:!0,order:b,toTerritory:null}),e.payload)),M(t)):k(t,e)}}else M(t);else l.includes(e.payload.unitID)&&k(t,e)},processMapClick:function(t,e){var r,a,i=Object(A.a)(t),o=i.data.data,s=i.order,c=i.ordersMeta,u=i.overview,l=i.territoriesMeta,d=s.inProgress,h=s.method,v=s.orderID,f=s.onTerritory,p=s.subsequentClicks,m=s.toTerritory,y=s.type,O=s.unitID,b=u.user.member,E=u.phase,S=o.currentOrders,I=o.contextVars;if(null!==I&&void 0!==I&&null!==(r=I.context)&&void 0!==r&&r.orderStatus&&Object(U.a)(null===I||void 0===I||null===(a=I.context)||void 0===a?void 0:a.orderStatus).Ready)return;var C=e.payload,L=C.clickObject,g=C.evt,D=C.name,R=void 0!==m&&null!==m,x=void 0!==f&&null!==f;if(d&&"click"===h){var P=O;if(x&&N.a[f]===D&&!y){var V={command:"HOLD"};if(j(t,V,"territoryCommands",D),j(t,V,"unitCommands",P),j(t,V={command:"REMOVE_ARROW",data:{orderID:v}},"mapCommands","all"),S){var Y=S.find((function(t){return t.unitID===P}));Y&&B(t,Object(_.a)({},Y.id,{saved:!1,update:{type:"Retreats"===E?"Disband":"Hold",toTerrID:null}}))}t.order.type="Retreats"===E?"disband":"hold"}else if("convoy"!==y||R)if(!x||"hold"!==y&&"move"!==y&&"convoy"!==y&&"disband"!==y&&"retreat"!==y){if(R&&"build"===y)j(t,{command:"REMOVE_BUILD"},"territoryCommands",N.a[m]),w(t);else if("territory"===L&&x&&N.a[f]!==D&&!y&&d){var W=c[v].allowedBorderCrossings,z=null===W||void 0===W?void 0:W.find((function(t){var e=T[t.name];return N.a[e.territory]===D}));if(z){M(t);j(t,{command:"MOVE"},"territoryCommands",D),B(t,Object(_.a)({},v,{saved:!1,update:{type:"Retreats"===E?"Retreat":"Move",toTerrID:z.id,viaConvoy:"No"}})),t.order.toTerritory=T[z.name].territory,t.order.type="Retreats"===E?"retreat":"move"}else{j(t,{command:"INVALID_CLICK",data:{click:{evt:g,territoryName:D}}},"mapCommands","all")}}}else M(t),w(t);else t.order.toTerritory=Number(N.a[D]),function(t){var e=Object(A.a)(t),r=e.board,a=e.data.data.currentOrders,n=e.order,i=e.ordersMeta,o=e.maps,s=n.subsequentClicks[n.subsequentClicks.length-1];if(s){var c=i[s.order].convoyToChoices,u=o.enumToTerritory[n.toTerritory],l=o.enumToTerritory[n.onTerritory];if(c.includes(u)){var d=r.findUnitByID(s.unitID),h=null===a||void 0===a?void 0:a.find((function(t){return t.unitID===s.unitID}));if(h){var v=new rt(r,h,d),f=r.findTerritoryByID(u),p=v.getConvoyFromChoices(f).find((function(t){return t.id===n.unitID}));if(p){var m=p.ConvoyGroup.pathArmyToCoastWithFleet(r.findTerritoryByID(l),f,v.unit.Territory);if(m){n.subsequentClicks.map((function(t){return o.enumToTerritory[t.onTerritory]})).push(o.enumToTerritory[n.onTerritory]);var y={};m.forEach((function(t){var e=o.enumToTerritory[n.onTerritory]===t&&n;if(e||(e=n.subsequentClicks.find((function(e){return o.enumToTerritory[e.onTerritory]===t}))),e){var a=o.unitToOrder[e.unitID],i="Army"===r.findUnitByID(e.unitID).type;y[a]=i?{saved:!1,update:{convoyPath:m,toTerrID:u,type:"Move",viaConvoy:"Yes"}}:{saved:!1,update:{convoyPath:m,toTerrID:u,fromTerrID:l,type:"Convoy"}}}})),B(t,y),j(t,{command:"MOVE"},"territoryCommands",N.a[n.toTerritory])}}}return}}j(t,{command:"INVALID_CLICK"},"territoryCommands",N.a[n.toTerritory])}(t)}else if(d&&"dblClick"===h){if(p.length){var K=c[v],Z=p[0],X=Number(N.a[D]);if(X===Z.onTerritory){var q,Q=null===(q=K.supportHoldChoices)||void 0===q?void 0:q.find((function(t){return t.unitID===Z.unitID}));if(Q)return B(t,Object(_.a)({},v,{saved:!1,update:{type:"Support hold",toTerrID:Q.id}})),void w(t)}else{var J,$=null===(J=K.supportMoveChoices)||void 0===J?void 0:J.find((function(t){var e=t.supportMoveTo.name;return T[e].territory===X}));if($&&$.supportMoveFrom.length){var tt=$.supportMoveFrom.find((function(t){return t.unitID===Z.unitID}));if(tt)return B(t,Object(_.a)({},v,{saved:!1,update:{type:"Support move",toTerrID:$.supportMoveTo.id,fromTerrID:tt.id}})),void w(t)}}j(t,{command:"INVALID_CLICK",data:{click:{evt:g,territoryName:D}}},"mapCommands","all")}}else if("territory"===L&&"Builds"===E&&S){var et=l[N.a[D]];if(et){var at=et.coast,nt=et.countryID,it=et.id,ot=et.supply,st=et.type;if(b.countryID.toString()!==nt||!ot)return;var ct=l[N.a.SAINT_PETERSBURG],ut=l[N.a.SAINT_PETERSBURG_NORTH_COAST],lt=l[N.a.SAINT_PETERSBURG_SOUTH_COAST],dt={};ct&&(dt[ct.id]=[null===ut||void 0===ut?void 0:ut.id,null===lt||void 0===lt?void 0:lt.id]);var ht=dt[it]?[it].concat(Object(G.a)(dt[it])):[it],vt=Object.entries(c).find((function(t){var e=Object(n.a)(t,2)[1].update;return!!e&&ht.includes(e.toTerrID)}));if(vt){var ft=Object(n.a)(vt,1)[0],pt={command:"REMOVE_BUILD",data:{removeBuild:{orderID:ft}}};return j(t,pt,"territoryCommands",D),F.forEach((function(e){j(t,pt={command:"SET_UNIT",data:{setUnit:{unitSlotName:e}}},"territoryCommands",D)})),void B(t,Object(_.a)({},ft,{saved:!1,update:{type:"Wait",toTerrID:null}}))}for(var mt,yt=!!et.unitID,At=0;At<S.length;At+=1){var Ot,bt=S[At].id,Nt=c[bt];if(!Nt.update||null===(Ot=Nt.update)||void 0===Ot||!Ot.toTerrID){mt=bt;break}}if(mt&&!yt&&!d){var Tt=0;"Parent"!==at&&"No"!==at||(Tt+=H.a.Army),"Land"!==st&&"Parent"!==at&&(Tt+=H.a.Fleet);var Et={command:"BUILD",data:{build:[{availableOrder:mt,canBuild:Tt,toTerrID:et.id,unitSlotName:"main"}]}};if(et.territory===N.a.SAINT_PETERSBURG){var St,jt,It,Ct,Lt=l[N.a.SAINT_PETERSBURG_NORTH_COAST],gt=l[N.a.SAINT_PETERSBURG_SOUTH_COAST];Lt&&(null===(St=Et.data)||void 0===St||null===(jt=St.build)||void 0===jt||jt.push({availableOrder:mt,canBuild:H.a.Fleet,toTerrID:Lt.id,unitSlotName:"nc"})),gt&&(null===(It=Et.data)||void 0===It||null===(Ct=It.build)||void 0===Ct||Ct.push({availableOrder:mt,canBuild:H.a.Fleet,toTerrID:gt.id,unitSlotName:"sc"}))}j(t,Et,"territoryCommands",D),k(t,{payload:{inProgress:!0,method:"click",orderID:mt,onTerritory:null,subsequentClicks:[],toTerritory:et.territory,type:"build",unitID:""}})}}}},deleteCommand:function(t,e){var r=e.payload,a=r.type,n=r.command,i=r.id,o=Object(A.a)(t).commands[a],s=new Map(o[i]),c=n;if(s&&s.has(c)){var u=new Map(s);u.delete(c),t.commands[a][i]=u}},highlightMapTerritoriesBasedOnStatuses:M,drawBuilds:I,dispatchCommand:function(t,e){var r=e.payload;j(t,r.command,r.container,r.identifier)}},extraReducers:function(t){t.addCase(nt.pending,(function(t){t.apiStatus="loading"})).addCase(nt.fulfilled,at).addCase(nt.rejected,(function(t,e){t.apiStatus="failed",t.error=e.error.message})).addCase(it.pending,(function(t){t.apiStatus="loading"})).addCase(it.fulfilled,(function(t,e){t.apiStatus="succeeded",t.overview=e.payload})).addCase(it.rejected,(function(t,e){t.apiStatus="failed",t.error=e.error.message})).addCase(ot.pending,(function(t){t.apiStatus="loading"})).addCase(ot.fulfilled,(function(t,e){t.apiStatus="succeeded",t.status=e.payload})).addCase(ot.rejected,(function(t,e){t.apiStatus="failed",t.error=e.error.message})).addCase(ut.fulfilled,(function(t,e){if(e.payload){var r=e.payload,a=r.orders,i=r.newContext,o=r.newContextKey;i&&o&&(t.data.data.contextVars={context:i,contextKey:o}),Object.entries(a).forEach((function(e){var r=Object(n.a)(e,2),a=r[0];"Complete"===r[1].status&&(t.ordersMeta[a].saved=!0)}))}x(t)})).addCase(st.fulfilled,(function(t,e){if(e.payload){var r=e.payload,a=r.messages,n=r.phase,i=r.pressType;t.messages={messages:a,phase:n,pressType:i}}}))}}),ht=dt.actions,vt=function(t){return t.game.data},ft=function(t){return t.game.overview},pt=function(t){return t.game.ordersMeta};e.a=dt.reducer},34:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var a=r(40),n=r(18),i=r(23),o=r(4),s=r(62);function c(t,e,r,c,u,l){var d,h,v,f,p,m,y,A,O,b,N,T,E,S=a.a("#map"),j=o.a[l],I=a.a("#".concat(j,"-territory")).node(),C=a.a("#".concat(j,"-unit")).node();if(C&&I){C=C.parentNode;var L=Number(I.getAttribute("x")),g=Number(I.getAttribute("y")),D=C.getBBox();switch(p=D.x,m=D.y,y=D.width,A=D.height,p=L+Number(C.getAttribute("x"))+p,m=g+Number(C.getAttribute("y"))+m,c){case"arrow":var R=a.b(".arrow__".concat(u)).node();if(R){d=p,v=m;var x=Number(R.getAttribute("x1")),P=Number(R.getAttribute("y1"));b=(h=x+.75*(Number(R.getAttribute("x2"))-x))-d,N=(f=P+.75*(Number(R.getAttribute("y2"))-P))-v,O=60}break;case"unit":var B=o.a[u],M=a.a("#".concat(B,"-unit")).node(),w=a.a("#".concat(B,"-territory")).node();if(w&&M){var U=(M=M.parentNode).getBBox(),k=U.x,_=U.y,G=U.width,H=U.height,F=Number(M.getAttribute("x"))+k,V=Number(M.getAttribute("y"))+_;d=p,v=m,T=G,E=H,b=(h=Number(w.getAttribute("x"))+F)-d,N=(f=Number(w.getAttribute("y"))+V)-v,O=75}break;default:var Y=o.a[u],W=a.a("#".concat(Y,"-arrow-receiver")).node(),z=a.a("#".concat(Y,"-territory")).node();z&&Y&&(d=p,v=m,b=(h=Number(z.getAttribute("x"))+Number(W.getAttribute("x")))-d,N=(f=Number(z.getAttribute("y"))+Number(W.getAttribute("y")))-v,O=75)}var K="arrow__".concat(t);e===i.a.MOVE&&a.b(".".concat(K)).remove();var Z=function(t,e,r,a,n,i,o,s,c,u,l){var d=s,h=c,v=u,f=l;return Math.abs(i)<t&&o<0?(d+=r/2,n&&a&&(h+=n/2,f+=a)):Math.abs(i)<t&&o>0?(v+=e,d+=r/2,n&&(h+=n/2)):i>t&&o<0&&Math.abs(o)>t?(d+=r,a&&(f+=a)):i>t&&Math.abs(o)<t?(v+=e/2,d+=r,a&&(f+=a/2)):i>t&&o>t?(v+=e,d+=r):i<0&&Math.abs(o)<t?(v+=e/2,n&&a&&(h+=n,f+=a/2)):i<0&&o>t&&(v+=e,n&&(h+=n)),{x1:d,x2:h,y1:v,y2:f}}(O,A,y,E,T,b,N,d,h,v,f);d=Z.x1,h=Z.x2,v=Z.y1,f=Z.y2,S.select("#container").append("line").attr("x1",d).attr("y1",v).attr("x2",h).attr("y2",f).attr("marker-end","url(#arrowHead__".concat(i.a[e],"_").concat(n.a[r],")")).attr("stroke",s.a.palette.arrowColors[r].main).attr("stroke-width","3").attr("class",K)}}},35:function(t,e,r){"use strict";var a;!function(t){t.DESTROY="destroy",t.NONE="none",t.SELECTED="selected",t.HOLD="hold",t.DISBANDED="disbanded",t.DISLODGED="dislodged",t.BUILD="build",t.ACTIVE="active",t.INACTIVE="inactive"}(a||(a={})),e.a=a},38:function(t,e,r){"use strict";var a;!function(t){t[t.Army=2]="Army",t[t.Fleet=4]="Fleet",t[t.All=6]="All"}(a||(a={})),e.a=a},39:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return i}));var a=r(61),n=function(){return Object(a.b)()},i=a.c},4:function(t,e,r){"use strict";var a;!function(t){t[t.ADRIATIC_SEA=0]="ADRIATIC_SEA",t[t.AEGEAN_SEA=1]="AEGEAN_SEA",t[t.ALBANIA=2]="ALBANIA",t[t.ANKARA=3]="ANKARA",t[t.APULIA=4]="APULIA",t[t.ARMENIA=5]="ARMENIA",t[t.BALTIC_SEA=6]="BALTIC_SEA",t[t.BARENTS_SEA=7]="BARENTS_SEA",t[t.BELGIUM=8]="BELGIUM",t[t.BERLIN=9]="BERLIN",t[t.BLACK_SEA=10]="BLACK_SEA",t[t.BOHEMIA=11]="BOHEMIA",t[t.BREST=12]="BREST",t[t.BUDAPEST=13]="BUDAPEST",t[t.BULGARIA=14]="BULGARIA",t[t.BULGARIA_NORTH_COAST=15]="BULGARIA_NORTH_COAST",t[t.BULGARIA_SOUTH_COAST=16]="BULGARIA_SOUTH_COAST",t[t.BURGUNDY=17]="BURGUNDY",t[t.CHANNEL_1=18]="CHANNEL_1",t[t.CLYDE=19]="CLYDE",t[t.CONSTANTINOPLE=20]="CONSTANTINOPLE",t[t.DENMARK=21]="DENMARK",t[t.EASTERN_MEDITERRANEAN=22]="EASTERN_MEDITERRANEAN",t[t.EDINBURGH=23]="EDINBURGH",t[t.ENGLISH_CHANNEL=24]="ENGLISH_CHANNEL",t[t.FINLAND=25]="FINLAND",t[t.GALICIA=26]="GALICIA",t[t.GASCONY=27]="GASCONY",t[t.GREECE=28]="GREECE",t[t.GULF_OF_BOTHNIA=29]="GULF_OF_BOTHNIA",t[t.GULF_OF_LYONS=30]="GULF_OF_LYONS",t[t.HELIGOLAND_BIGHT=31]="HELIGOLAND_BIGHT",t[t.HOLLAND=32]="HOLLAND",t[t.IONIAN_SEA=33]="IONIAN_SEA",t[t.IRISH_SEA=34]="IRISH_SEA",t[t.KIEL=35]="KIEL",t[t.LIVERPOOL=36]="LIVERPOOL",t[t.LIVONIA=37]="LIVONIA",t[t.LONDON=38]="LONDON",t[t.MARSEILLES=39]="MARSEILLES",t[t.MIDDLE_ATLANTIC=40]="MIDDLE_ATLANTIC",t[t.MOSCOW=41]="MOSCOW",t[t.MUNICH=42]="MUNICH",t[t.NAPLES=43]="NAPLES",t[t.NEUTRAL_1=44]="NEUTRAL_1",t[t.NEUTRAL_2=45]="NEUTRAL_2",t[t.NEUTRAL_3=46]="NEUTRAL_3",t[t.NEUTRAL_4=47]="NEUTRAL_4",t[t.NEUTRAL_5=48]="NEUTRAL_5",t[t.NEUTRAL_6=49]="NEUTRAL_6",t[t.NEUTRAL_7=50]="NEUTRAL_7",t[t.NEUTRAL_8=51]="NEUTRAL_8",t[t.NEUTRAL_9=52]="NEUTRAL_9",t[t.NORTH_AFRICA=53]="NORTH_AFRICA",t[t.NORTH_ATLANTIC=54]="NORTH_ATLANTIC",t[t.NORTH_ATLANTIC2=55]="NORTH_ATLANTIC2",t[t.NORTH_SEA=56]="NORTH_SEA",t[t.NORWAY=57]="NORWAY",t[t.NORWEGIAN_SEA=58]="NORWEGIAN_SEA",t[t.PARIS=59]="PARIS",t[t.PICARDY=60]="PICARDY",t[t.PIEDMONT=61]="PIEDMONT",t[t.PORTUGAL=62]="PORTUGAL",t[t.PRUSSIA=63]="PRUSSIA",t[t.ROME=64]="ROME",t[t.RUHR=65]="RUHR",t[t.RUMANIA=66]="RUMANIA",t[t.SAINT_PETERSBURG=67]="SAINT_PETERSBURG",t[t.SAINT_PETERSBURG_NORTH_COAST=68]="SAINT_PETERSBURG_NORTH_COAST",t[t.SAINT_PETERSBURG_SOUTH_COAST=69]="SAINT_PETERSBURG_SOUTH_COAST",t[t.SERBIA=70]="SERBIA",t[t.SEVASTOPOL=71]="SEVASTOPOL",t[t.SILESIA=72]="SILESIA",t[t.SKAGERRACK=73]="SKAGERRACK",t[t.SKAGERRACK2=74]="SKAGERRACK2",t[t.SMYRNA=75]="SMYRNA",t[t.SPAIN=76]="SPAIN",t[t.SPAIN_NORTH_COAST=77]="SPAIN_NORTH_COAST",t[t.SPAIN_SOUTH_COAST=78]="SPAIN_SOUTH_COAST",t[t.SWEDEN=79]="SWEDEN",t[t.SYRIA=80]="SYRIA",t[t.TRIESTE=81]="TRIESTE",t[t.TUNIS=82]="TUNIS",t[t.TUSCANY=83]="TUSCANY",t[t.TYROLIA=84]="TYROLIA",t[t.TYRRHENIAN_SEA=85]="TYRRHENIAN_SEA",t[t.UKRAINE=86]="UKRAINE",t[t.UNPLAYABLE_LAND1=87]="UNPLAYABLE_LAND1",t[t.UNPLAYABLE_LAND2=88]="UNPLAYABLE_LAND2",t[t.UNPLAYABLE_LAND3=89]="UNPLAYABLE_LAND3",t[t.UNPLAYABLE_LAND4=90]="UNPLAYABLE_LAND4",t[t.UNPLAYABLE_LAND5=91]="UNPLAYABLE_LAND5",t[t.UNPLAYABLE_LAND6=92]="UNPLAYABLE_LAND6",t[t.UNPLAYABLE_LAND7=93]="UNPLAYABLE_LAND7",t[t.UNPLAYABLE_LAND8=94]="UNPLAYABLE_LAND8",t[t.UNPLAYABLE_SEA1=95]="UNPLAYABLE_SEA1",t[t.UNPLAYABLE_SEA2=96]="UNPLAYABLE_SEA2",t[t.UNPLAYABLE_SEA3=97]="UNPLAYABLE_SEA3",t[t.UNPLAYABLE_SEA4=98]="UNPLAYABLE_SEA4",t[t.UNPLAYABLE_SEA5=99]="UNPLAYABLE_SEA5",t[t.UNPLAYABLE_SEA6=100]="UNPLAYABLE_SEA6",t[t.UNPLAYABLE_SEA7=101]="UNPLAYABLE_SEA7",t[t.UNPLAYABLE_SEA8=102]="UNPLAYABLE_SEA8",t[t.UNPLAYABLE_SEA9=103]="UNPLAYABLE_SEA9",t[t.VENICE=104]="VENICE",t[t.VIENNA=105]="VIENNA",t[t.WALES=106]="WALES",t[t.WARSAW=107]="WARSAW",t[t.WESTERN_MEDITERRANEAN=108]="WESTERN_MEDITERRANEAN",t[t.YORK=109]="YORK"}(a||(a={})),e.a=a},44:function(t,e,r){"use strict";var a=r(48),n={Russia:a.a.RUSSIA,Germany:a.a.GERMANY,Italy:a.a.ITALY,Austria:a.a.AUSTRIA,England:a.a.ENGLAND,France:a.a.FRANCE,Turkey:a.a.TURKEY};e.a=n},45:function(t,e,r){"use strict";function a(t){var e=t.split(",");return{None:e.includes("None"),Saved:e.includes("Saved"),Completed:e.includes("Completed"),Ready:e.includes("Ready")}}r.d(e,"a",(function(){return a}))},48:function(t,e,r){"use strict";var a;!function(t){t.FRANCE="France",t.AUSTRIA="Austria",t.ENGLAND="England",t.GERMANY="Germany",t.RUSSIA="Russia",t.ITALY="Italy",t.TURKEY="Turkey"}(a||(a={})),e.a=a},62:function(t,e,r){"use strict";var a,n=r(11),i=r(3),o=r(88),s=r(18),c="#000",u="#fff",l={backgroundColor:u,boxShadow:"0 0 2px 2px",color:c},d={backgroundColor:c,boxShadow:"0 0 2px 2px",color:u},h=1.2,v=(a={},Object(i.a)(a,s.a.CONVOY,{main:"#2042B8"}),Object(i.a)(a,s.a.IMPLIED,{main:"#989898"}),Object(i.a)(a,s.a.IMPLIED_FOREIGN,{main:"rgba(0,0,0,.3)"}),Object(i.a)(a,s.a.MOVE,{main:"#000000"}),Object(i.a)(a,s.a.MOVE_FAILED,{main:"#BB0000"}),Object(i.a)(a,s.a.RETREAT,{main:"#BD2894"}),Object(i.a)(a,s.a.SUPPORT_HOLD,{main:"#3FC621"}),Object(i.a)(a,s.a.SUPPORT_MOVE,{main:"#F8F83D"}),a),f=Object(o.a)({breakpoints:{values:{mobile:0,mobileLandscape:600,mobileLg:414,mobileLgLandscape:896,tablet:820,tabletLandscape:1024,desktop:1200}},components:{MuiUseMediaQuery:{defaultProps:{noSsr:!0}},MuiButton:{styleOverrides:{root:{borderRadius:18,padding:"10px 18px"},containedPrimary:{"&:active":Object(n.a)({},l),"&:focus":Object(n.a)({},d),"&:hover":{backgroundColor:"#757575",color:u}},containedSecondary:{"&.Mui-disabled":{backgroundColor:"transparent",color:"#bababa"},"&:active":Object(n.a)({},l),"&:focus":Object(n.a)({},l),"&:hover":{backgroundColor:"#fafafa"}}}}},palette:Object(n.a)(Object(n.a)({action:{disabledBackground:"#b8b8b8",disabled:"#cacaca"},error:{main:"#f00",contrastText:u},primary:{main:c,contrastText:u},secondary:{main:u,contrastText:c}},{France:{main:"#2D5EE8",light:"#B9C9F7"},Austria:{main:"#FC4343",light:"#FEC0C0"},England:{main:"#E136EA",light:"#F5BCF8"},Germany:{main:"#F37C0E",light:"#FBD3AF"},Russia:{main:"#3F1BC1",light:"#BFB3EA"},Italy:{main:"#47D2A0",light:"#C2F0DF"},Turkey:{main:"#F3C400",light:"#FBEBAA"}}),{},{arrowColors:v,svg:{filters:{dropShadows:["drop-shadow(0px 3px 10px rgba(0, 0, 0, 0.7))","drop-shadow(1px 4px 4px #323232)"]}}}),typography:{button:{fontSize:12,fontWeight:700,lineHeight:h,textTransform:"none"}}});f.typography.body1={fontFamily:f.typography.fontFamily,fontSize:14,fontWeight:400,lineHeight:h},f.typography.h1=Object(i.a)({fontFamily:f.typography.fontFamily,fontSize:16,fontWeight:700,lineHeight:h},f.breakpoints.up("desktop"),{fontSize:20}),f.typography.h2={fontFamily:f.typography.fontFamily,fontSize:14,fontWeight:700,lineHeight:h},f.typography.label={fontFamily:f.typography.fontFamily,fontSize:10,fontWeight:400,lineHeight:1},e.a=f},83:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var a,n,i=r(3),o=r(38),s=(a={Army:o.a.Army,Fleet:o.a.Fleet},Object(i.a)(a,o.a.Army,"Army"),Object(i.a)(a,o.a.Fleet,"Fleet"),a),c=(n={},Object(i.a)(n,o.a.Army,"Build Army"),Object(i.a)(n,o.a.Fleet,"Build Fleet"),Object(i.a)(n,"Build Army",o.a.Army),Object(i.a)(n,"Build Fleet",o.a.Fleet),n);e.b=c}},[[176,1,2]]]);
//# sourceMappingURL=main.66a016d8.chunk.js.map