{"version":3,"sources":["enums/Device.ts","enums/Position.ts","components/ui/WDPositionContainer.tsx","enums/Vote.ts","components/ui/WDLineClamp.tsx","components/ui/WDInfoDisplay.tsx","components/ui/WDCountryTable.tsx","components/ui/icons/country-table/WDPower.tsx","components/ui/icons/country-table/WDUnits.tsx","components/ui/icons/country-table/WDCenters.tsx","components/ui/icons/country-table/WDBet.tsx","components/ui/icons/country-table/WDDelays.tsx","components/ui/WDButton.tsx","enums/ModalViews.ts","components/ui/icons/WDCheckmarkIcon.tsx","components/ui/WDVoteButtons.tsx","components/ui/WDInfoPanel.tsx","components/ui/WDPress.tsx","components/ui/WDTabItem.tsx","components/ui/WDTabGroup.tsx","components/ui/WDViewsContainer.tsx","components/ui/WDTabPanel.tsx","components/ui/WDFullModal.tsx","components/ui/WDPopover.tsx","enums/Season.ts","components/ui/icons/WDActionIcon.tsx","utils/parseSeconds.ts","components/ui/WDCountdownPill.tsx","enums/ScrollButton.ts","utils/formatTime.ts","assets/png/icn_phase_countdown_red.png","assets/png/icn_phase_countdown_black.png","components/ui/icons/WDPhaseArrowIcon.tsx","components/ui/WDScrollButton.tsx","components/ui/WDPillScroller.tsx","components/ui/icons/WDGamePhaseIcon.tsx","enums/Move.ts","components/ui/WDPhaseUI.tsx","utils/capitalizeString.ts","components/ui/WDMoveControls.tsx","components/ui/icons/WDHomeIcon.tsx","components/ui/WDUI.tsx","components/ui/WDMain.tsx","App.tsx","state/store.ts","index.tsx","enums/ArrowColor.ts","enums/ArrowType.ts","utils/getDevice.ts","hooks/useViewport.ts","enums/ApiRoute.ts","utils/api/index.ts","state/game/initial-state.ts","data/map/variants/classic/TerritoryMap.ts","utils/state/setCommand.ts","utils/map/drawBuilds.ts","utils/map/updateUnitsRetreat.ts","utils/map/drawOrders.ts","utils/map/removeAllArrows.ts","utils/map/drawMoveOrders.ts","utils/map/drawSupportMoveOrders.ts","utils/map/drawSupportHoldOrders.ts","utils/map/drawConvoyOrders.ts","utils/map/drawRetreatOrders.ts","utils/state/updateOrdersMeta.ts","utils/map/highlightMapTerritoriesBasedOnStatuses.ts","utils/state/resetOrder.ts","utils/state/startNewOrder.ts","utils/state/getDataForOrder.ts","types/map/UnitSlotName.ts","models/PathClass.ts","models/PathSearchClass.ts","models/NodeSetClass.ts","models/enums.ts","models/ConvoyGroupClass.ts","models/TerritoryClass.ts","models/UnitClass.ts","models/BoardClass.ts","models/OrderClass.ts","utils/state/gameApiSlice/extraReducers/fetchGameData/fulfilled.ts","utils/state/generateMaps.ts","utils/map/getUnits.ts","utils/getTerritoriesMeta.ts","utils/map/getOrdersMeta.ts","state/game/game-api-slice.ts","utils/state/gameApiSlice/reducers/processUnitDoubleClick.ts","utils/state/gameApiSlice/reducers/processUnitClick.ts","utils/state/getAvailableOrder.ts","utils/state/gameApiSlice/reducers/processMapClick.ts","utils/state/processConvoy.ts","utils/state/gameApiSlice/reducers/deleteCommand.ts","utils/state/gameApiSlice/reducers/dispatchCommand.ts","utils/map/drawArrow.ts","utils/map/arrowDispatchReceiveCoordinates.ts","enums/UIState.ts","enums/BuildUnit.ts","state/hooks.ts","enums/map/variants/classic/Territory.ts","data/map/variants/classic/CountryMap.ts","utils/state/getOrderStates.ts","enums/Country.ts","webDiplomacyTheme.ts","data/BuildUnit.ts"],"names":["Device","Position","responsiveDistance","mobile","tablet","desktop","WDPositionContainer","children","position","placement","useMemo","BOTTOM_LEFT","bottom","left","BOTTOM_RIGHT","right","TOP_RIGHT","top","TOP_LEFT","Box","sx","zIndex","defaultProps","Vote","WDLineClamp","lineHeight","maxHeight","WebkitLineClamp","display","overflow","textOverflow","WebkitBoxOrient","wordWrap","tableCellStyles","border","fontSize","p","WDInfoDisplay","alternatives","phase","potNumber","season","title","year","useViewport","viewport","device","getDevice","width","MOBILE_LANDSCAPE","MOBILE_LG_LANDSCAPE","MOBILE","MOBILE_LG","TableContainer","overflowX","Table","size","TableHead","TableRow","TableCell","fontWeight","TableBody","columns","id","label","icon","theme","useTheme","height","viewBox","fill","xmlns","fillRule","clipRule","d","palette","primary","main","align","stroke","cx","cy","r","strokeWidth","WDCountryTable","countries","maxDelays","isMobile","WDTableCell","styled","padding","tableCellClasses","head","borderBottom","body","stickyHeader","verticalAlign","map","column","toUpperCase","country","value","style","color","abbr","power","votes","paddingTop","colSpan","length","Object","values","reduce","prev","curr","action","disabledBackground","marginRight","entries","data","Chip","secondary","background","WDButton","disabled","onClick","startIcon","Button","variant","undefined","ModalViews","WDCheckmarkIcon","voteLabel","draw","pause","cancel","WDVoteButtons","voteState","toggleVote","mobileLandscapeLayout","spacing","commandButtons","vote","status","Stack","direction","alignItems","WDInfoPanel","gameID","userCountry","React","setVoteState","dispatch","useAppDispatch","voteName","voteKey","newVoteState","currentGameID","String","countryID","toggleVoteStatus","charAt","slice","m","WDPress","textButtonStyle","borderRadius","minWidth","textButtonSelected","WDTabItem","currentTab","currentView","onChange","WDTabGroup","tabList","tabGroup","WDViewsContainer","WDTabPanel","hidden","PRESS","INFO","WDFullModal","excusedMissedTurns","useState","view","setView","tab","WDPopover","isOpen","onClose","anchorEl","Popover","anchorOrigin","horizontal","vertical","open","pointerEvents","PaperProps","backgroundColor","boxShadow","filter","svg","filters","dropShadows","transformOrigin","mt","content","useMediaQuery","breakpoints","up","transform","maxWidth","minHeight","overflowY","Season","WDActionIcon","iconState","UIState","INACTIVE","ACTIVE","parseSeconds","seconds","timeLeft","h","s","Math","floor","ScrollButtonState","milli","WDCountdownPill","endTime","phaseTime","quarterTimeRemaining","secondsLeft","Date","setTimeLeft","useEffect","timer","setTimeout","clearTimeout","chipDisplay","time","availableTimeIntervals","keys","key","formatTime","isTimeRunningOut","avatar","Avatar","src","alt","error","WDPhaseArrowIcon","BACKWARD","opacity","FORWARD","WDScrollButton","className","disableRipple","WDPillScroller","onChangeSeason","ButtonGroup","bgcolor","textTransform","WDGamePhaseIcon","dropShadow","AUTUMN","SPRING","strokeLinecap","strokeLinejoin","WINTER","textAlign","Move","WDPhaseUI","currentSeason","setCurrentSeason","currentYear","setCurrentYear","currentProcessTime","setCurrentProcessTime","timerDisplayState","setTimerDisplayState","useAppSelector","gameOverview","phaseMinutes","processTime","phaseSeconds","marginTop","capitalizeString","string","WDMoveControls","gameState","ready","save","readyDisabled","toggleState","gameData","ordersMeta","gameOrdersMeta","clickButton","type","gameApiSliceActions","processMapClick","name","clickObject","currentOrders","contextVars","orderUpdates","forEach","fromTerrID","toTerrID","moveType","unitID","viaConvoy","updateReference","update","orderUpdate","push","orderSubmission","context","JSON","stringify","contextKey","queryParams","READY","notready","saveOrders","ordersMetaValues","ordersLength","ordersSaved","acc","meta","saved","SAVE","saveDisabled","WDHomeIcon","abbrMap","Russia","Germany","Italy","Austria","England","France","Turkey","gameStatusData","WDUI","showControlModal","setShowControlModal","setReadyDisabled","popoverTrigger","members","pot","user","constructTableData","member","memberCountry","countryMap","includes","userID","userTableData","toggleControlModal","controlModalTrigger","IconButton","setGameState","current","orderStatus","orderStates","getOrderStates","None","Ready","preState","popover","Link","href","pt","ref","move","WDMapController","WDMain","fallback","App","URLSearchParams","window","location","search","get","loadGame","store","configureStore","reducer","game","gameApiSliceReducer","ReactDOM","render","StrictMode","ThemeProvider","webDiplomacyTheme","CssBaseline","document","getElementById","ArrowColor","ArrowType","DESKTOP","tabletLandscape","TABLET_LANDSCAPE","mobileLgLandscape","mobileLg","TABLET","mobileLandscape","getViewport","visualViewport","scale","round","setValue","setViewport","addEventListener","removeEventListener","ApiRoute","buildQueryString","params","keyValuePairs","encodeURI","join","api","axios","create","baseURL","process","headers","getGameApiRequest","route","submitOrders","orders","post","initialState","apiStatus","board","msg","referenceCode","success","territories","territoryStatuses","units","order","inProgress","method","onTerritory","orderID","subsequentClicks","toTerritory","ownUnits","maps","territoryToUnit","unitToOrder","unitToTerritory","enumToTerritory","territoryToEnum","territoriesMeta","commands","mapCommands","territoryCommands","unitCommands","overview","anon","drawType","gameOver","minimumBet","pauseTimeRemaining","playerTypes","potType","processStatus","startTime","turn","bet","missedPhases","newMessagesFrom","online","supplyCenterNo","timeLoggedIn","unitNo","username","mapID","fullName","description","author","variantClasses","drawMap","adjudicatorPreGame","codeVersion","cacheVersion","coastParentIDByChildID","coastChildIDsByParentID","terrIDByName","supplyCenterCount","supplyCenterTarget","variantID","pressType","phases","standoffs","occupiedFrom","messages","TerritoryMap","Clyde","territory","Territory","CLYDE","unitSlotName","Edinburgh","EDINBURGH","Liverpool","LIVERPOOL","Yorkshire","YORK","Wales","WALES","London","LONDON","Portugal","PORTUGAL","Spain","SPAIN","NORTH_AFRICA","Tunis","TUNIS","Naples","NAPLES","Rome","ROME","Tuscany","TUSCANY","Piedmont","PIEDMONT","Venice","VENICE","Apulia","APULIA","Greece","GREECE","Albania","ALBANIA","Serbia","SERBIA","Bulgaria","BULGARIA","Rumania","RUMANIA","Constantinople","CONSTANTINOPLE","Smyrna","SMYRNA","Ankara","ANKARA","Armenia","ARMENIA","Syria","SYRIA","Sevastopol","SEVASTOPOL","Ukraine","UKRAINE","Warsaw","WARSAW","Livonia","LIVONIA","Moscow","MOSCOW","SAINT_PETERSBURG","Finland","FINLAND","Sweden","SWEDEN","Norway","NORWAY","Denmark","DENMARK","Kiel","KIEL","Berlin","BERLIN","Prussia","PRUSSIA","Silesia","SILESIA","Munich","MUNICH","Ruhr","RUHR","Holland","HOLLAND","Belgium","BELGIUM","Picardy","PICARDY","Brest","BREST","Paris","PARIS","Burgundy","BURGUNDY","Marseilles","MARSEILLES","Gascony","GASCONY","BARENTS_SEA","NORWEGIAN_SEA","NORTH_SEA","Skagerrack","SKAGERRACK","HELIGOLAND_BIGHT","BALTIC_SEA","GULF_OF_BOTHNIA","NORTH_ATLANTIC","IRISH_SEA","ENGLISH_CHANNEL","MIDDLE_ATLANTIC","WESTERN_MEDITERRANEAN","GULF_OF_LYONS","TYRRHENIAN_SEA","IONIAN_SEA","ADRIATIC_SEA","AEGEAN_SEA","EASTERN_MEDITERRANEAN","BLACK_SEA","Tyrolia","TYROLIA","Bohemia","BOHEMIA","Vienna","VIENNA","Trieste","TRIESTE","Budapest","BUDAPEST","Galicia","GALICIA","parent","SPAIN_NORTH_COAST","SPAIN_SOUTH_COAST","SAINT_PETERSBURG_NORTH_COAST","SAINT_PETERSBURG_SOUTH_COAST","BULGARIA_NORTH_COAST","BULGARIA_SOUTH_COAST","setCommand","state","command","container","commandsContainer","newCommand","Map","set","uuidv4","drawBuilds","territoryMeta","buildType","BuildUnitMap","mappedTerritory","find","toString","setUnit","componentType","BUILD","unitType","BuildUnitTypeMap","commandTerritoryDestination","updateUnitsRetreat","drawOrders","d3","remove","ordersMetaEntries","originalOrder","convoyPath","unitData","onTerrDetails","terrID","toTerrDetails","fromTerr","toTerr","drawArrow","MOVE","path","findTerritoryByID","findUnitByID","ConvoyGroup","pathArmyToCoastWithoutFleet","convoyingUnitID","convoyingUnitOrder","unitOrderMeta","CONVOY","IMPLIED","Number","drawMoveOrders","unitBeingSupported","unitBeingSupportedOrder","supportingTerritory","supportingTerritoryDetails","unitBeingSupportedOrderDetails","supportedUnitActualOrderType","supportedUnitToTerrID","supportArrowIdentifer","SUPPORT","SUPPORT_MOVE","IMPLIED_FOREIGN","drawSupportMoveOrders","HOLD","SUPPORT_HOLD","drawSupportHoldOrders","unitBeingConvoyed","unitBeingConvoyedOrder","convoyingTerritory","convoyingTerritoryDetails","unitBeingConvoyedOrderDetails","drawConvoyOrders","RETREAT","drawRetreatOrders","updateOrdersMeta","updates","highlightMapTerritoriesBasedOnStatuses","membersMap","terr","ownerCountryID","resetOrder","startNewOrder","prevUnitID","orderData","newOrder","getDataForOrder","payload","UnitSlotNames","PathClass","node","pathToNode","complete","alternativeChecked","pathNextNodes","rank","this","removeFirst","newPathToNode","nextNode","setRank","indexOf","pnn","changeRank","setComplete","getRank","change","newRank","diff","getLastPathNode","splice","dissolvePathToNode","removePathNextNode","hasPath","fEndNode","nextNodeRank","getNextNodeRank","alternativeRouteSearch","PathSearchClass","getMaxRank","findPath","alternativeRoute","attachToNodePath","searchAlternativeRoutes","getAlternativeRoute","markPath","retValue","inPath","canBeAppendedTo","array","toArray","getLength","getFirst","getAllPathsFromThis","flat","startTerr","fAllNode","forceInternalNode","start","setVisited","testPaths","getValidBorderTerritories","addNode","testPath","shift","visited","NodeSetClass","Nodes","Path","n","Node","nodeInit","fleets","f","armies","a","coasts","c","StartTerr","fAnyNode","initNodes","AnyNodes","EndTerr","fMiddleNode","path1","path2","search2","reverse","concat","pop","CoastType","freeze","Child","No","Parent","GamePhaseType","Build","Diplomacy","Retreat","UnitType","Army","Fleet","TerritoryType","Coast","Land","Sea","ConvoyGroupClass","Hold","SupportHold","SupportMove","Convoy","Disband","BuildArmy","BuildFleet","Wait","Destroy","Set","fleet","convoyLink","setConvoyLink","setConvoyGroup","add","getBorderTerritories","bt","Unit","loadFleet","has","setConvoyGroups","ConvoyGroups","newConvoyGroup","cg","setArmies","Array","from","setCoasts","setFleets","ns","routeSetLoad","nodeSetClass","routeSetStart","EndNode","AllNode","WithoutFleetTerr","WithFleetTerr","AnyNode","TerritoryClass","terrData","terrStatusData","coast","coastParent","coastParentID","occupiedFromTerrID","supply","standoff","Borders","CoastalBorders","convoyNode","lastVisitedBy","lastSearchNotSuccess","validBorderTerritoriesCache","assign","unit","convoyGroup","Infinity","b","isConvoyNode","UnitClass","BoardClass","terrStatus","convoyGroups","supplyCenters","coastParents","coastChildren","curTerrStatus","ts","currTerritory","currUnit","u","setTerritory","cc","cp","setCoastParent","loadCoasts","linkGroups","t","territoryID","borderIDs","cur","canCrossBorder","borderTerritory","movableTerritories","getMovableTerritories","convoyableTerritories","canConvoyTo","targetTerritory","OrderClass","choices","supportHoldChoices","getMovableUnits","againstTerritory","possibleUnits","getBorderUnits","bu","canMoveInto","ConvoyArmies","possibleUnit","possibleUnitTerritory","convoyArmy","pathArmyToCoastWithFleet","fetchGameDataFulfilled","generateMaps","unitsToDraw","territoryStatus","territoryHasMultipleUnits","getUnits","homeCountryID","getTerritoriesMeta","newOrders","o","orderUnit","unitTerr","moveChoices","getMoveChoices","supportMoveToChoices","getSupportMoveToChoices","getSupportHoldChoices","supportMoveChoices","convoyToChoices","getConvoyToChoices","convoyToNames","convoyTo","supportMoveTo","supportMoveFrom","getSupportMoveFromChoices","allowedBorderCrossings","choice","occupiedTerritory","crossing","getOrdersMeta","fetchGameData","createAsyncThunk","GAME_DATA","fetchGameOverview","GAME_OVERVIEW","fetchGameStatus","GAME_STATUS","fetchGameMessages","GAME_MESSAGES","GAME_TOGGLEVOTE","formData","FormData","response","confirmation","parsed","parse","substring","Promise","all","allMessages","gameApiSlice","createSlice","reducers","updateTerritoriesMeta","processUnitDoubleClick","clickData","processUnitClick","isDestroy","some","existingOrder","eOrderID","eOrder","availableOrder","i","orderMeta","getAvailableOrder","currentOrderUnitType","newClickUnitType","evt","territoryName","truthyToTerritory","truthyOnTerritory","currOrderUnitID","orderToUpdate","canMove","click","lastFleetInChain","fromTerritory","fleetOrder","convoyOrder","getConvoyFromChoices","foundClick","unitOrderID","unitIsArmy","processConvoy","unitSupporting","terrEnum","match","supportMoveMatch","territoryCoast","webDipTerritoryID","territoryType","stp","stpnc","stpsc","specialIds","affectedTerritoryIds","existingBuildOrder","removeBuild","slot","territoryHasUnit","canBuild","BuildUnit","build","nc","sc","deleteCommand","commandsType","commandSet","deleteKey","newCommandSet","delete","dispatchCommand","identifier","extraReducers","builder","addCase","pending","fulfilled","rejected","message","newContext","newContextKey","actions","arrowIdentifier","arrowType","arrowColor","receiverType","receiverIdentifier","unitTerritory","x1","x2","y1","y2","unitX","unitY","unitW","unitH","positionChangeBuffer","xDiff","yDiff","rw","rh","d3MapSelector","fromTerritoryName","fromTerritoryEl","parentNode","fromTerritoryX","getAttribute","fromTerritoryY","getBBox","x","y","arrow","arrowX1","arrowY1","toTerritoryName","receiverUnit","toTerritoryEl","rUnitX","rUnitY","rUnitW","rUnitH","receiverSlotElX","receiverSlotElY","toTerritoryReceiver","arrowClass","X1","X2","Y1","Y2","abs","arrowDispatchReceiveCoordinates","select","append","attr","arrowColors","useDispatch","useSelector","Country","RUSSIA","GERMANY","ITALY","AUSTRIA","ENGLAND","FRANCE","TURKEY","split","Saved","Completed","mainColor","secondaryColor","activeButtonStyle","focusButtonStyle","defaultLineHeight","MOVE_FAILED","createTheme","components","MuiUseMediaQuery","noSsr","MuiButton","styleOverrides","root","containedPrimary","containedSecondary","contrastText","light","typography","button","body1","fontFamily","h1","h2"],"mappings":"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rBA,KAAK,QAAST,M,oCEvKhB72B,G,SAAAA,K,kBAAAA,E,YAAAA,E,oBAAAA,E,YAAAA,E,sBAAAA,E,sBAAAA,E,cAAAA,E,gBAAAA,E,qBAAAA,M,KAYUA,O,oCCVV6yB,G,SAAAA,O,eAAAA,I,iBAAAA,I,cAAAA,M,KAMUA,O,gCCRf,gFAGa72B,EAAiB,kBAAmBw7B,eACpCvzB,EAAkDwzB,K,mCCJ1D1lB,G,SAAAA,O,+BAAAA,I,2BAAAA,I,qBAAAA,I,mBAAAA,I,mBAAAA,I,qBAAAA,I,2BAAAA,I,6BAAAA,I,qBAAAA,I,mBAAAA,I,0BAAAA,I,sBAAAA,I,kBAAAA,I,wBAAAA,I,wBAAAA,I,gDAAAA,I,gDAAAA,I,wBAAAA,I,0BAAAA,I,kBAAAA,I,oCAAAA,I,sBAAAA,I,kDAAAA,I,0BAAAA,I,sCAAAA,I,sBAAAA,I,sBAAAA,I,sBAAAA,I,oBAAAA,I,sCAAAA,I,kCAAAA,I,wCAAAA,I,sBAAAA,I,4BAAAA,I,0BAAAA,I,gBAAAA,I,0BAAAA,I,sBAAAA,I,oBAAAA,I,4BAAAA,I,sCAAAA,I,oBAAAA,I,oBAAAA,I,oBAAAA,I,0BAAAA,I,0BAAAA,I,0BAAAA,I,0BAAAA,I,0BAAAA,I,0BAAAA,I,0BAAAA,I,0BAAAA,I,0BAAAA,I,gCAAAA,I,oCAAAA,I,sCAAAA,I,0BAAAA,I,oBAAAA,I,kCAAAA,I,kBAAAA,I,sBAAAA,I,wBAAAA,I,wBAAAA,I,sBAAAA,I,gBAAAA,I,gBAAAA,I,sBAAAA,I,wCAAAA,I,gEAAAA,I,gEAAAA,I,oBAAAA,I,4BAAAA,I,sBAAAA,I,4BAAAA,I,8BAAAA,I,oBAAAA,I,kBAAAA,I,0CAAAA,I,0CAAAA,I,oBAAAA,I,kBAAAA,I,sBAAAA,I,kBAAAA,I,sBAAAA,I,sBAAAA,I,oCAAAA,I,sBAAAA,I,wCAAAA,I,wCAAAA,I,wCAAAA,I,wCAAAA,I,wCAAAA,I,wCAAAA,I,wCAAAA,I,wCAAAA,I,sCAAAA,I,sCAAAA,I,sCAAAA,I,sCAAAA,I,sCAAAA,I,uCAAAA,I,uCAAAA,I,uCAAAA,I,uCAAAA,I,qBAAAA,I,qBAAAA,I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","file":"static/js/main.66a016d8.chunk.js","sourcesContent":["enum Device {\n  DESKTOP = \"DESKTOP\",\n  MOBILE = \"MOBILE\",\n  MOBILE_LANDSCAPE = \"MOBILE_LANDSCAPE\",\n  MOBILE_LG = \"MOBILE_LG\",\n  MOBILE_LG_LANDSCAPE = \"MOBILE_LG_LANDSCAPE\",\n  TABLET = \"TABLET\",\n  TABLET_LANDSCAPE = \"TABLET_LANDSCAPE\",\n}\n\nexport default Device;\n","export enum Position {\n  BOTTOM_LEFT = \"bottom-left\",\n  BOTTOM_RIGHT = \"bottom-right\",\n  TOP_LEFT = \"top-left\",\n  TOP_RIGHT = \"top-right\",\n}\n\nexport default Position;\n","import * as React from \"react\";\nimport Box from \"@mui/material/Box\";\nimport { useMemo } from \"react\";\nimport Position from \"../../enums/Position\";\n\ninterface WDPositionContainerProps {\n  children: React.ReactNode;\n  position?: Position;\n}\n\nconst MOBILE_DISTANCE = 16;\nconst TABLET_UP_DISTANCE = 24;\nconst Z_INDEX = 2;\n\nconst responsiveDistance = {\n  mobile: MOBILE_DISTANCE,\n  tablet: TABLET_UP_DISTANCE,\n  desktop: TABLET_UP_DISTANCE,\n} as const;\n\n/**\n * This component is used to position a box and its children absolute\n */\nconst WDPositionContainer: React.FC<WDPositionContainerProps> = function ({\n  children,\n  position,\n}): React.ReactElement {\n  const placement = useMemo(() => {\n    switch (position) {\n      case Position.BOTTOM_LEFT:\n        return { bottom: responsiveDistance, left: responsiveDistance };\n      case Position.BOTTOM_RIGHT:\n        return { bottom: responsiveDistance, right: responsiveDistance };\n      case Position.TOP_RIGHT:\n        return { right: responsiveDistance, top: responsiveDistance };\n      case Position.TOP_LEFT:\n      default:\n        return { left: responsiveDistance, top: responsiveDistance };\n    }\n  }, [position]);\n\n  return (\n    <Box\n      sx={{\n        position: \"absolute\",\n        zIndex: Z_INDEX,\n        ...placement,\n      }}\n    >\n      {children}\n    </Box>\n  );\n};\n\nWDPositionContainer.defaultProps = {\n  position: Position.TOP_LEFT,\n};\n\nexport default WDPositionContainer;\n","enum Vote {\n  cancel,\n  draw,\n  pause,\n}\n\nexport default Vote;\n","import * as React from \"react\";\nimport { Box } from \"@mui/material\";\n\ninterface WDLineClampProps {\n  children: React.ReactNode;\n  lineHeight: string;\n  maxHeight: string;\n  WebkitLineClamp: number;\n}\n\nconst WDLineClamp: React.FC<WDLineClampProps> = function ({\n  children,\n  lineHeight,\n  maxHeight,\n  WebkitLineClamp,\n}): React.ReactElement {\n  return (\n    <Box\n      sx={{\n        display: \"-webkit-box\",\n        lineHeight,\n        maxHeight,\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\",\n        WebkitBoxOrient: \"vertical\",\n        WebkitLineClamp,\n        wordWrap: \"break-word\",\n      }}\n    >\n      {children}\n    </Box>\n  );\n};\n\nexport default WDLineClamp;\n","import * as React from \"react\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n  TableContainer,\n} from \"@mui/material\";\nimport IntegerRange from \"../../types/IntegerRange\";\nimport WDLineClamp from \"./WDLineClamp\";\nimport Device from \"../../enums/Device\";\nimport getDevice from \"../../utils/getDevice\";\nimport useViewport from \"../../hooks/useViewport\";\n\n/**\n * game setting datas which would be passed to the component by parent component/ context/redux store\n */\n\ninterface WDInfoDisplayProps {\n  alternatives: string;\n  phase: string;\n  potNumber: IntegerRange<35, 666>;\n  season: string;\n  title: string;\n  year: number;\n}\n\nconst tableCellStyles = {\n  border: \"none\",\n  fontSize: \"0.7rem\",\n  p: \"0 5px 0 0\",\n};\n\nconst WDInfoDisplay: React.FC<WDInfoDisplayProps> = function ({\n  alternatives,\n  phase,\n  potNumber,\n  season,\n  title,\n  year,\n}) {\n  const [viewport] = useViewport();\n  const device = getDevice(viewport);\n  const isMobile =\n    device === Device.MOBILE_LANDSCAPE ||\n    device === Device.MOBILE_LG_LANDSCAPE ||\n    device === Device.MOBILE ||\n    device === Device.MOBILE_LG;\n\n  const width = isMobile ? 260 : 320;\n  return (\n    <TableContainer sx={{ overflowX: \"inherit\" }}>\n      <Table\n        aria-label=\"A table of game information\"\n        size=\"small\"\n        sx={{\n          width,\n        }}\n      >\n        <TableHead>\n          <TableRow>\n            <TableCell\n              sx={{\n                border: \"none\",\n                fontWeight: 600,\n                p: \"2px 5px 5px 0\",\n              }}\n            >\n              <WDLineClamp\n                lineHeight=\"1.2rem\"\n                maxHeight=\"2.4rem\"\n                WebkitLineClamp={2}\n              >\n                {title}\n              </WDLineClamp>\n            </TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          <TableRow>\n            <TableCell sx={tableCellStyles}>\n              Pot: {potNumber} - {season} {year} - <b>{phase}</b>\n            </TableCell>\n          </TableRow>\n          <TableRow>\n            <TableCell sx={tableCellStyles}>{alternatives}</TableCell>\n          </TableRow>\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n};\n\nexport default WDInfoDisplay;\n","import * as React from \"react\";\nimport {\n  Box,\n  Chip,\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n  tableCellClasses,\n  useTheme,\n} from \"@mui/material\";\nimport { styled } from \"@mui/material/styles\";\nimport BetIcon from \"./icons/country-table/WDBet\";\nimport CentersIcon from \"./icons/country-table/WDCenters\";\nimport { CountryTableData } from \"../../interfaces\";\nimport DelaysIcon from \"./icons/country-table/WDDelays\";\nimport Device from \"../../enums/Device\";\nimport IntegerRange from \"../../types/IntegerRange\";\nimport PowerIcon from \"./icons/country-table/WDPower\";\nimport UnitsIcon from \"./icons/country-table/WDUnits\";\nimport useViewport from \"../../hooks/useViewport\";\nimport getDevice from \"../../utils/getDevice\";\n\ninterface WDCountryTableProps {\n  countries: CountryTableData[];\n  maxDelays: IntegerRange<0, 5>;\n}\n\ninterface Column {\n  align?: \"right\" | \"left\" | \"center\";\n  icon?: React.FC;\n  id: keyof CountryTableData;\n  label: string;\n}\n\nconst columns: readonly Column[] = [\n  { id: \"power\", label: \"Power\", icon: PowerIcon, align: \"left\" },\n  { id: \"unitNo\", label: \"Units\", icon: UnitsIcon, align: \"center\" },\n  {\n    id: \"supplyCenterNo\",\n    label: \"Centers\",\n    icon: CentersIcon,\n    align: \"center\",\n  },\n  {\n    id: \"bet\",\n    label: \"Bet\",\n    icon: BetIcon,\n    align: \"center\",\n  },\n  {\n    id: \"excusedMissedTurns\",\n    label: \"Delays\",\n    icon: DelaysIcon,\n    align: \"center\",\n  },\n];\n\nconst WDCountryTable: React.FC<WDCountryTableProps> = function ({\n  countries,\n  maxDelays,\n}): React.ReactElement {\n  const theme = useTheme();\n  const [viewport] = useViewport();\n  const device = getDevice(viewport);\n  const isMobile =\n    device === Device.MOBILE_LANDSCAPE ||\n    device === Device.MOBILE_LG_LANDSCAPE ||\n    device === Device.MOBILE ||\n    device === Device.MOBILE_LG;\n  const WDTableCell = styled(TableCell)(() => {\n    const padding = isMobile ? 6 : \"6px 16px\";\n    return {\n      [`&.${tableCellClasses.head}`]: {\n        borderBottom: 0,\n        lineHeight: \"normal\",\n        padding,\n      },\n      [`&.${tableCellClasses.body}`]: {\n        borderBottom: 0,\n        padding,\n      },\n    };\n  });\n  return (\n    <div>\n      <Table aria-label=\"country info table\" size=\"small\" stickyHeader>\n        <TableHead sx={{ height: \"55px\" }}>\n          <TableRow sx={{ verticalAlign: \"top\" }}>\n            {columns.map((column) => (\n              <WDTableCell key={column.id} align={column.align}>\n                {column.icon && <column.icon />}\n                <Box sx={{ fontSize: 10, fontWeight: 400 }}>\n                  {column.label.toUpperCase()}\n                </Box>\n              </WDTableCell>\n            ))}\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {countries.map((country) => (\n            <React.Fragment key={country.power}>\n              <TableRow>\n                {columns.map((column) => {\n                  const style = {\n                    color: theme.palette.primary.main,\n                    fontWeight: 400,\n                  };\n                  let value: string;\n                  switch (column.id) {\n                    case \"power\":\n                      value = isMobile\n                        ? country.abbr.toUpperCase()\n                        : country.power.toUpperCase();\n                      style.color = country.color;\n                      style.fontWeight = 700;\n                      break;\n                    case \"excusedMissedTurns\":\n                      value = `${country[column.id]}/${maxDelays}`;\n                      break;\n                    default:\n                      value = `${country[column.id]}`;\n                      break;\n                  }\n                  return (\n                    <WDTableCell key={column.id} align={column.align}>\n                      <span style={style}>{value}</span>\n                    </WDTableCell>\n                  );\n                })}\n              </TableRow>\n              {country.votes && (\n                <TableRow>\n                  <WDTableCell\n                    sx={{\n                      fontSize: \"70%\",\n                      paddingTop: \"0px !important\",\n                      fontWeight: 700,\n                    }}\n                    colSpan={columns.length}\n                  >\n                    {Object.values(country.votes).reduce(\n                      (prev, curr) => prev + +curr,\n                      0,\n                    ) > 0 && (\n                      <Box\n                        sx={{\n                          color: theme.palette.action.disabledBackground,\n                          display: \"inline-block\",\n                          marginRight: 1.5,\n                        }}\n                      >\n                        VOTED\n                      </Box>\n                    )}\n                    {Object.entries(country.votes).map(\n                      (data) =>\n                        data[1] && (\n                          <Chip\n                            key={`${country.power}-vote-${data[0]}`}\n                            size=\"small\"\n                            label={data[0].toUpperCase()}\n                            sx={{\n                              color: theme.palette.secondary.main,\n                              background: country.color,\n                              fontWeight: 900,\n                              fontSize: \"90%\",\n                              height: 14,\n                              marginRight: 1,\n                            }}\n                          />\n                        ),\n                    )}\n                  </WDTableCell>\n                </TableRow>\n              )}\n            </React.Fragment>\n          ))}\n        </TableBody>\n      </Table>\n    </div>\n  );\n};\n\nexport default WDCountryTable;\n","import * as React from \"react\";\nimport { useTheme } from \"@mui/material\";\n\nconst PowerIcon: React.FC = function (): React.ReactElement {\n  const theme = useTheme();\n  return (\n    <svg\n      width=\"17\"\n      height=\"16\"\n      viewBox=\"0 0 17 15\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M1.70981 0.477386C1.78835 0.619928 1.82959 0.781129 1.82946 0.94512C1.82981 1.10363 1.79129 1.25965 1.71748 1.39864C1.64367 1.53763 1.53697 1.65507 1.40733 1.74V15H0.422124V1.74C0.288272 1.65169 0.179006 1.52891 0.105082 1.38376C0.0311585 1.23861 -0.0048749 1.07608 0.000529656 0.912187C0.00593421 0.748291 0.0525902 0.588672 0.135905 0.449046C0.219219 0.309419 0.336321 0.194598 0.47568 0.115885C0.615039 0.0371731 0.771851 -0.00271635 0.93068 0.000143651C1.08951 0.00300365 1.24488 0.0485146 1.38149 0.132196C1.51811 0.215878 1.63126 0.334845 1.70981 0.477386ZM6.82686 10.3877C3.67647 10.3877 2.34265 11.6935 2.34265 11.6935V2.12591C3.87882 0.511105 5.98034 0.288913 10.7745 2.00699C14.7654 3.44263 16.7615 1.84034 16.7615 1.84034C15.5 6.5 12.8518 6.80289 12.8518 6.80289C13.3353 8.67822 16.1636 11.7529 16.1636 11.7529C15.8415 11.8953 14.876 12.1089 14.1977 12.0729C12.8739 12.0034 11.8654 11.6305 10.8447 11.2531C9.68237 10.8233 8.50427 10.3877 6.82686 10.3877Z\"\n        fill={theme.palette.primary.main}\n      />\n    </svg>\n  );\n};\n\nexport default PowerIcon;\n","import * as React from \"react\";\nimport { useTheme } from \"@mui/material\";\n\nconst Units: React.FC = function (): React.ReactElement {\n  const theme = useTheme();\n  return (\n    <svg\n      width=\"31\"\n      height=\"16\"\n      viewBox=\"0 0 30 14\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M8.96588 5.41579H14L9.71916 8.56579L11.2992 14L7 10.8684L2.68241 14L4.29921 8.54737L0 5.41579H5.07087L6.98163 0L8.96588 5.41579ZM28.3195 7.60486C28.8782 7.02312 29.3431 6.35499 29.6971 5.62524C30.0303 6.56852 30.09 7.58962 29.8693 8.56659C29.4904 10.1601 28.9394 10.5462 28.9394 10.5462C28.9274 10.1651 28.8906 9.78515 28.8292 9.40898C28.2569 10.2167 27.5751 10.9376 26.8041 11.5501C26.0815 12.1296 25.3093 12.6418 24.4967 13.0804C24.1235 13.3383 23.7874 13.6478 23.4979 14C23.2105 13.6483 22.8767 13.3388 22.506 13.0804C21.6934 12.6418 20.9212 12.1296 20.1986 11.5501C19.4276 10.9376 18.7458 10.2167 18.1735 9.40898C18.1122 9.78515 18.0753 10.1651 18.0633 10.5462C18.0633 10.5462 17.5123 10.1601 17.1334 8.56659C16.9105 7.59029 16.9678 6.56921 17.2988 5.62524C17.6527 6.35499 18.1176 7.02312 18.6763 7.60486C19.2836 8.05578 19.958 8.40421 20.6739 8.63679C20.195 8.92681 19.6233 9.01258 19.0827 8.87546C19.0827 8.87546 18.7315 8.86142 19.3445 9.38792C19.9317 9.99516 20.635 10.473 21.4109 10.7919C21.5608 10.8277 21.7163 10.8322 21.868 10.8049C22.0197 10.7776 22.1643 10.7192 22.2931 10.6332C22.422 10.5472 22.5323 10.4354 22.6175 10.3046C22.7026 10.1738 22.7608 10.0267 22.7884 9.87229C22.878 9.50726 22.9469 6.45359 22.9469 4.45994L21.5142 4.03172C21.4877 4.06765 21.451 4.09436 21.4091 4.10818C21.3672 4.12201 21.3221 4.12227 21.28 4.10894C21.2372 4.09511 21.1991 4.06938 21.1699 4.03465C21.1407 3.99993 21.1216 3.95758 21.1147 3.91238L20.7427 3.80006C20.7146 3.8358 20.6766 3.86222 20.6337 3.87596C20.5908 3.88971 20.5448 3.89017 20.5017 3.87728C20.4588 3.86468 20.4208 3.83915 20.3925 3.80406C20.3642 3.76897 20.347 3.72597 20.3432 3.68073L20.0264 3.58245C20.001 3.57517 19.9773 3.56284 19.9566 3.54618C19.9359 3.52951 19.9187 3.50883 19.9058 3.48534C19.893 3.46184 19.8849 3.436 19.882 3.40929C19.879 3.38258 19.8813 3.35554 19.8886 3.32973L20.0539 2.76814C20.0763 2.72192 20.1151 2.68607 20.1624 2.66783C20.2097 2.64959 20.262 2.65032 20.3088 2.66986L20.6256 2.76814C20.6538 2.7324 20.6918 2.70598 20.7347 2.69224C20.7776 2.67849 20.8235 2.67803 20.8667 2.69092C20.9091 2.70436 20.9466 2.73013 20.9748 2.76505C21.0029 2.79998 21.0204 2.84253 21.0251 2.88748L21.404 2.99979C21.4304 2.96387 21.4671 2.93716 21.5091 2.92333C21.551 2.90951 21.5961 2.90924 21.6382 2.92258C21.681 2.93518 21.719 2.96071 21.7473 2.9958C21.7756 3.03089 21.7928 3.07389 21.7966 3.11913L22.9606 3.46311V2.86642C22.6471 2.73621 22.3877 2.49902 22.2268 2.19543C22.066 1.89183 22.0136 1.54069 22.0787 1.20209C22.1438 0.863481 22.3223 0.558448 22.5837 0.339171C22.8451 0.119894 23.1731 0 23.5117 0C23.8502 0 24.1783 0.119894 24.4397 0.339171C24.7011 0.558448 24.8796 0.863481 24.9447 1.20209C25.0098 1.54069 24.9574 1.89183 24.7965 2.19543C24.6356 2.49902 24.3762 2.73621 24.0627 2.86642V3.46311L25.2268 3.11913C25.2306 3.07389 25.2478 3.03089 25.2761 2.9958C25.3043 2.96071 25.3424 2.93518 25.3852 2.92258C25.4273 2.90924 25.4724 2.90951 25.5143 2.92333C25.5562 2.93716 25.5929 2.96387 25.6194 2.99979L25.9982 2.88748C26.0029 2.84253 26.0205 2.79998 26.0486 2.76505C26.0768 2.73013 26.1143 2.70436 26.1567 2.69092C26.1998 2.67803 26.2458 2.67849 26.2887 2.69224C26.3316 2.70598 26.3696 2.7324 26.3977 2.76814L26.6939 2.62774C26.7192 2.62025 26.7458 2.61794 26.772 2.62095C26.7982 2.62397 26.8235 2.63224 26.8466 2.64529C26.8696 2.65834 26.8899 2.67592 26.9063 2.697C26.9226 2.71809 26.9347 2.74226 26.9419 2.76814L27.1003 3.34377C27.1077 3.36958 27.1099 3.39662 27.107 3.42333C27.104 3.45004 27.0959 3.47588 27.0831 3.49938C27.0703 3.52287 27.053 3.54355 27.0323 3.56022C27.0117 3.57688 26.9879 3.58921 26.9625 3.59649L26.6457 3.69477C26.6419 3.74001 26.6247 3.78301 26.5964 3.8181C26.5681 3.85319 26.5301 3.87872 26.4873 3.89132C26.4441 3.90421 26.3981 3.90375 26.3552 3.89C26.3123 3.87626 26.2744 3.84984 26.2462 3.8141L25.8742 3.92642C25.8674 3.97162 25.8483 4.01396 25.8191 4.04869C25.7898 4.08342 25.7517 4.10915 25.7089 4.12298C25.6669 4.13631 25.6218 4.13605 25.5798 4.12222C25.5379 4.1084 25.5012 4.08169 25.4747 4.04576L24.0421 4.47398L24.0429 4.5346C24.0704 6.52893 24.1118 9.52497 24.2005 9.88633C24.2281 10.0407 24.2863 10.1878 24.3715 10.3186C24.4566 10.4494 24.5669 10.5612 24.6958 10.6472C24.8246 10.7332 24.9693 10.7916 25.1209 10.8189C25.2726 10.8462 25.4281 10.8418 25.5781 10.8059C26.3539 10.4871 27.0572 10.0092 27.6444 9.40196C28.2575 8.8895 27.9062 8.8895 27.9062 8.8895C27.3657 9.02662 26.7939 8.94085 26.3151 8.65082C27.0342 8.41461 27.7111 8.0614 28.3195 7.60486ZM22.7088 1.11528C22.6659 1.22089 22.6438 1.33408 22.6438 1.44839C22.6414 1.5843 22.6707 1.71886 22.7294 1.84092C22.7881 1.96299 22.8744 2.06907 22.9813 2.15038C22.9951 1.70813 23.0777 1.44839 23.5117 1.44839C23.9456 1.44839 24.0421 1.74323 24.0421 2.15038C24.1439 2.06614 24.225 1.95878 24.2788 1.83688C24.3326 1.71498 24.3577 1.58194 24.352 1.44839C24.352 1.33408 24.3299 1.22089 24.287 1.11528C24.2441 1.00967 24.1812 0.913708 24.1019 0.832878C24.0225 0.752047 23.9284 0.687929 23.8248 0.644184C23.7211 0.600439 23.6101 0.577923 23.4979 0.577923C23.3857 0.577923 23.2747 0.600439 23.1711 0.644184C23.0674 0.687929 22.9733 0.752047 22.894 0.832878C22.8147 0.913708 22.7517 1.00967 22.7088 1.11528Z\"\n        fill={theme.palette.primary.main}\n      />\n    </svg>\n  );\n};\n\nexport default Units;\n","import * as React from \"react\";\nimport { useTheme } from \"@mui/material\";\n\nconst Centers: React.FC = function (): React.ReactElement {\n  const theme = useTheme();\n  return (\n    <svg\n      width=\"18\"\n      height=\"16\"\n      viewBox=\"0 0 18 18\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M9.00005 17C13.4183 17 17.0001 13.4183 17.0001 9C17.0001 4.58172 13.4183 1 9.00005 1C4.58174 1 1 4.58172 1 9C1 13.4183 4.58174 17 9.00005 17Z\"\n        stroke=\"black\"\n      />\n      <path\n        d=\"M9.00324 13.3635C11.4132 13.3635 13.3668 11.4098 13.3668 8.99987C13.3668 6.5899 11.4132 4.63623 9.00324 4.63623C6.5933 4.63623 4.63965 6.5899 4.63965 8.99987C4.63965 11.4098 6.5933 13.3635 9.00324 13.3635Z\"\n        fill={theme.palette.primary.main}\n      />\n    </svg>\n  );\n};\n\nexport default Centers;\n","import * as React from \"react\";\nimport { useTheme } from \"@mui/material\";\n\nconst Bet: React.FC = function (): React.ReactElement {\n  const theme = useTheme();\n  return (\n    <svg\n      width=\"16\"\n      height=\"16\"\n      viewBox=\"0 0 16 16\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        fillRule=\"evenodd\"\n        clipRule=\"evenodd\"\n        d=\"M8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16ZM4.79785 11.8914V4H8.17207C10.5674 4 11.9729 5.36172 11.9729 7.88828C11.9729 10.4148 10.5619 11.8914 8.17207 11.8914H4.79785ZM7.84394 5.84297H7.1166V10.0484H7.84394C9.00332 10.0484 9.61035 9.34297 9.61035 7.88828C9.61035 6.55938 8.9541 5.84297 7.84394 5.84297Z\"\n        fill={theme.palette.primary.main}\n      />\n    </svg>\n  );\n};\n\nexport default Bet;\n","import * as React from \"react\";\nimport { useTheme } from \"@mui/material\";\n\nconst Delays: React.FC = function (): React.ReactElement {\n  const theme = useTheme();\n  return (\n    <svg\n      width=\"16\"\n      height=\"16\"\n      viewBox=\"0 0 16 16\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <circle\n        cx=\"8\"\n        cy=\"8\"\n        r=\"7\"\n        stroke={theme.palette.primary.main}\n        strokeWidth=\"2\"\n      />\n      <path\n        d=\"M8 3.5L8 8.5L11 10.5\"\n        stroke={theme.palette.primary.main}\n        strokeWidth=\"2\"\n      />\n    </svg>\n  );\n};\n\nexport default Delays;\n","import * as React from \"react\";\nimport Button from \"@mui/material/Button\";\nimport { SxProps } from \"@mui/material\";\n\ninterface WDButtonProps {\n  children: React.ReactNode;\n  color?: \"primary\" | \"secondary\";\n  disabled?: boolean;\n  onClick?: React.MouseEventHandler<HTMLButtonElement> | undefined;\n  startIcon?: React.ReactNode | undefined;\n  sx?: SxProps | undefined;\n}\n\nconst WDButton: React.FC<WDButtonProps> = function ({\n  children,\n  color,\n  disabled,\n  onClick,\n  startIcon,\n  sx,\n}): React.ReactElement {\n  return (\n    <Button\n      sx={sx}\n      color={color}\n      disabled={disabled}\n      onClick={onClick}\n      startIcon={startIcon}\n      variant=\"contained\"\n    >\n      {children}\n    </Button>\n  );\n};\n\nWDButton.defaultProps = {\n  color: \"primary\",\n  disabled: false,\n  onClick: undefined,\n  startIcon: undefined,\n  sx: undefined,\n};\n\nexport default WDButton;\n","enum ModalViews {\n  PRESS = \"PRESS\",\n  ORDERS = \"ORDERS\",\n  INFO = \"INFO\",\n}\n\nexport default ModalViews;\n","import * as React from \"react\";\n\nconst WDCheckmarkIcon: React.FC = function () {\n  return (\n    <svg width={12} height={11} fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"m2 6.164 2.5 2.5 5.5-7.5\" stroke=\"#000\" strokeWidth=\"3\" />\n    </svg>\n  );\n};\n\nexport default WDCheckmarkIcon;\n","import * as React from \"react\";\nimport { Stack } from \"@mui/material\";\nimport WDButton from \"./WDButton\";\nimport Vote from \"../../enums/Vote\";\nimport VoteType from \"../../types/Vote\";\nimport getDevice from \"../../utils/getDevice\";\nimport useViewport from \"../../hooks/useViewport\";\nimport Device from \"../../enums/Device\";\nimport WDCheckmarkIcon from \"./icons/WDCheckmarkIcon\";\n\ninterface voteProps {\n  voteState: VoteType;\n  toggleVote: (vote: Vote) => void;\n}\n\nconst voteLabel = {\n  draw: \"Draw\",\n  pause: \"Pause\",\n  cancel: \"Cancel\",\n};\n\nconst WDVoteButtons: React.FC<voteProps> = function ({\n  voteState,\n  toggleVote,\n}): React.ReactElement {\n  const [viewport] = useViewport();\n  const device = getDevice(viewport);\n  const mobileLandscapeLayout =\n    device === Device.MOBILE_LANDSCAPE ||\n    device === Device.MOBILE_LG_LANDSCAPE ||\n    device === Device.MOBILE;\n  const padding = mobileLandscapeLayout ? \"10px 10px\" : \"10px 18px\";\n  const spacing = mobileLandscapeLayout ? 1 : 2;\n  const commandButtons = Object.entries(voteState).map(([vote, status]) => {\n    return (\n      <WDButton\n        key={vote}\n        sx={{ p: padding }}\n        color={status ? \"secondary\" : \"primary\"}\n        onClick={() => toggleVote(Vote[vote])}\n        startIcon={status ? <WDCheckmarkIcon /> : \"\"}\n      >\n        {voteLabel[vote]}\n      </WDButton>\n    );\n  });\n\n  return (\n    <Stack direction=\"row\" spacing={spacing} alignItems=\"center\">\n      {commandButtons}\n    </Stack>\n  );\n};\n\nexport default WDVoteButtons;\n","import * as React from \"react\";\nimport Box from \"@mui/material/Box\";\nimport Device from \"../../enums/Device\";\nimport Vote from \"../../enums/Vote\";\nimport WDCountryTable from \"./WDCountryTable\";\nimport WDVoteButtons from \"./WDVoteButtons\";\nimport { CountryTableData } from \"../../interfaces/CountryTableData\";\nimport GameOverviewResponse from \"../../state/interfaces/GameOverviewResponse\";\nimport useViewport from \"../../hooks/useViewport\";\nimport getDevice from \"../../utils/getDevice\";\nimport { toggleVoteStatus } from \"../../state/game/game-api-slice\";\nimport { useAppDispatch } from \"../../state/hooks\";\n\ninterface WDInfoPanelProps {\n  countries: CountryTableData[];\n  gameID: GameOverviewResponse[\"gameID\"];\n  maxDelays: GameOverviewResponse[\"excusedMissedTurns\"];\n  userCountry: CountryTableData;\n}\n\nconst WDInfoPanel: React.FC<WDInfoPanelProps> = function ({\n  countries,\n  gameID,\n  maxDelays,\n  userCountry,\n}): React.ReactElement {\n  const [voteState, setVoteState] = React.useState(userCountry.votes);\n  const [viewport] = useViewport();\n  const device = getDevice(viewport);\n  const dispatch = useAppDispatch();\n\n  React.useEffect(() => {\n    setVoteState(userCountry.votes);\n  }, [userCountry]);\n\n  const toggleVote = (voteName: Vote) => {\n    const voteKey = Vote[voteName];\n    const newVoteState = {\n      ...voteState,\n      [voteKey]: !voteState[voteKey],\n    };\n\n    const currentGameID = String(gameID);\n    const countryID = String(userCountry.countryID);\n\n    setVoteState(newVoteState);\n\n    dispatch(\n      toggleVoteStatus({\n        countryID,\n        gameID: currentGameID,\n        vote: voteKey.charAt(0).toUpperCase() + voteKey.slice(1),\n      }),\n    );\n  };\n\n  const mobileLandscapeLayout =\n    device === Device.MOBILE_LANDSCAPE ||\n    device === Device.MOBILE_LG_LANDSCAPE ||\n    device === Device.MOBILE;\n\n  const padding = mobileLandscapeLayout ? \"0 6px\" : \"0 16px\";\n\n  return (\n    <Box>\n      <Box sx={{ p: padding }}>\n        <WDVoteButtons toggleVote={toggleVote} voteState={voteState} />\n      </Box>\n      <Box\n        sx={{\n          m: \"20px 5px 10px 0\",\n        }}\n      >\n        <WDCountryTable\n          maxDelays={maxDelays}\n          /**\n           * always show current user at the top\n           *\n           */\n          countries={[{ ...userCountry, votes: voteState }, ...countries]}\n        />\n      </Box>\n    </Box>\n  );\n};\n\nexport default WDInfoPanel;\n","import * as React from \"react\";\nimport { Box } from \"@mui/material\";\nimport Device from \"../../enums/Device\";\nimport useViewport from \"../../hooks/useViewport\";\nimport getDevice from \"../../utils/getDevice\";\n\ninterface WDPressProps {\n  children: React.ReactNode;\n}\n\nconst WDPress: React.FC<WDPressProps> = function ({\n  children,\n}): React.ReactElement {\n  const [viewport] = useViewport();\n  const device = getDevice(viewport);\n  const mobileLandscapeLayout =\n    device === Device.MOBILE_LANDSCAPE ||\n    device === Device.MOBILE_LG_LANDSCAPE ||\n    device === Device.MOBILE;\n  const padding = mobileLandscapeLayout ? \"0 6px\" : \"0 16px\";\n  const width = mobileLandscapeLayout ? 272 : 358;\n\n  return (\n    <Box\n      sx={{\n        m: \"20px 0 10px 0\",\n        p: padding,\n        width,\n      }}\n    >\n      {children}\n    </Box>\n  );\n};\n\nexport default WDPress;\n","import * as React from \"react\";\nimport { Button } from \"@mui/material\";\nimport ModalViews from \"../../enums/ModalViews\";\n\nconst textButtonStyle = {\n  borderRadius: 0,\n  fontWeight: 400,\n  minWidth: 0,\n  p: \"0 0 5px 0\",\n  \"&:hover\": {\n    background: \"transparent\",\n  },\n};\n\nconst textButtonSelected = {\n  borderRadius: 0,\n  borderBottom: \"solid black 2px\",\n  fontWeight: 600,\n  minWidth: 0,\n  p: \"0 0 5px 0\",\n  \"&:hover\": {\n    background: \"transparent\",\n  },\n};\n\ninterface WDTabItemProps {\n  currentTab: ModalViews;\n  currentView: ModalViews;\n  onChange: (currentTab: ModalViews) => void;\n}\n\nconst WDTabItem: React.FC<WDTabItemProps> = function ({\n  currentTab,\n  currentView,\n  onChange,\n}): React.ReactElement {\n  return (\n    <Button\n      onClick={() => onChange(currentTab)}\n      sx={currentView === currentTab ? textButtonSelected : textButtonStyle}\n    >\n      {currentTab}\n    </Button>\n  );\n};\n\nexport default WDTabItem;\n","import * as React from \"react\";\nimport { Stack } from \"@mui/material\";\nimport ModalViews from \"../../enums/ModalViews\";\nimport WDTabItem from \"./WDTabItem\";\n\ninterface WDTabGroupProps {\n  currentView: ModalViews;\n  onChange: (currentTab: ModalViews) => void;\n  padding: string;\n  tabGroup: ModalViews[];\n}\n\nconst WDTabGroup: React.FC<WDTabGroupProps> = function ({\n  currentView,\n  onChange,\n  padding,\n  tabGroup,\n}): React.ReactElement {\n  const tabList = tabGroup.map((currentTab) => {\n    return (\n      <WDTabItem\n        currentTab={currentTab}\n        currentView={currentView}\n        key={currentTab}\n        onChange={onChange}\n      />\n    );\n  });\n\n  return (\n    <Stack alignItems=\"center\" direction=\"row\" spacing={2} sx={{ p: padding }}>\n      {tabList}\n    </Stack>\n  );\n};\n\nexport default WDTabGroup;\n","import * as React from \"react\";\nimport { Box } from \"@mui/material\";\nimport WDTabGroup from \"./WDTabGroup\";\nimport ModalViews from \"../../enums/ModalViews\";\n\ninterface WDViewsContainerProps {\n  children: React.ReactNode;\n  currentView: ModalViews;\n  onChange: (currentTab: ModalViews) => void;\n  padding: string;\n  tabGroup: ModalViews[];\n}\n\nconst WDViewsContainer: React.FC<WDViewsContainerProps> = function ({\n  children,\n  currentView,\n  onChange,\n  padding,\n  tabGroup,\n}): React.ReactElement {\n  return (\n    <Box>\n      <WDTabGroup\n        currentView={currentView}\n        onChange={onChange}\n        padding={padding}\n        tabGroup={tabGroup}\n      />\n      {children}\n    </Box>\n  );\n};\n\nexport default WDViewsContainer;\n","import * as React from \"react\";\nimport { Box } from \"@mui/material\";\nimport ModalViews from \"../../enums/ModalViews\";\n\ninterface WDTabPanelProps {\n  currentTab: ModalViews;\n  currentView: ModalViews;\n  children: React.ReactNode;\n}\n\nconst WDTabPanel: React.FC<WDTabPanelProps> = function ({\n  currentTab,\n  currentView,\n  children,\n}): React.ReactElement {\n  return (\n    <Box\n      hidden={currentView !== currentTab}\n      id={currentTab}\n      aria-labelledby={currentTab}\n    >\n      {currentView === currentTab && <Box>{children}</Box>}\n    </Box>\n  );\n};\n\nexport default WDTabPanel;\n","import * as React from \"react\";\nimport { useState } from \"react\";\nimport { Box } from \"@mui/material\";\nimport WDInfoDisplay from \"./WDInfoDisplay\";\nimport { CountryTableData } from \"../../interfaces\";\nimport Device from \"../../enums/Device\";\nimport WDInfoPanel from \"./WDInfoPanel\";\nimport WDPress from \"./WDPress\";\nimport ModalViews from \"../../enums/ModalViews\";\nimport GameOverviewResponse from \"../../state/interfaces/GameOverviewResponse\";\nimport useViewport from \"../../hooks/useViewport\";\nimport getDevice from \"../../utils/getDevice\";\nimport WDViewsContainer from \"./WDViewsContainer\";\nimport WDTabPanel from \"./WDTabPanel\";\n\ninterface WDFullModalProps {\n  alternatives: GameOverviewResponse[\"alternatives\"];\n  children: React.ReactNode;\n  countries: CountryTableData[];\n  excusedMissedTurns: GameOverviewResponse[\"excusedMissedTurns\"];\n  phase: GameOverviewResponse[\"phase\"];\n  potNumber: GameOverviewResponse[\"pot\"];\n  gameID: GameOverviewResponse[\"gameID\"];\n  season: GameOverviewResponse[\"season\"];\n  title: GameOverviewResponse[\"name\"];\n  userCountry: CountryTableData;\n  year: GameOverviewResponse[\"year\"];\n}\n\nconst tabGroup: ModalViews[] = [ModalViews.PRESS, ModalViews.INFO];\n\nconst WDFullModal: React.FC<WDFullModalProps> = function ({\n  alternatives,\n  children,\n  countries,\n  excusedMissedTurns,\n  gameID,\n  phase,\n  potNumber,\n  season,\n  title,\n  userCountry,\n  year,\n}): React.ReactElement {\n  const [view, setView] = useState(ModalViews.PRESS);\n  const onChangeView = (tab: ModalViews) => setView(tab);\n  const [viewport] = useViewport();\n  const device = getDevice(viewport);\n\n  const mobileLandscapeLayout =\n    device === Device.MOBILE_LANDSCAPE ||\n    device === Device.MOBILE_LG_LANDSCAPE ||\n    device === Device.MOBILE;\n\n  const padding = mobileLandscapeLayout ? \"0 6px\" : \"0 16px\";\n\n  return (\n    <WDViewsContainer\n      tabGroup={tabGroup}\n      currentView={view}\n      onChange={onChangeView}\n      padding={padding}\n    >\n      <WDTabPanel currentTab={ModalViews.INFO} currentView={view}>\n        <Box>\n          <Box\n            sx={{\n              m: \"20px 0 10px 0\",\n              p: padding,\n            }}\n          >\n            <WDInfoDisplay\n              alternatives={alternatives}\n              phase={phase}\n              potNumber={potNumber}\n              season={season}\n              title={title}\n              year={year}\n            />\n          </Box>\n          <WDInfoPanel\n            countries={countries}\n            maxDelays={excusedMissedTurns}\n            userCountry={userCountry}\n            gameID={gameID}\n          />\n        </Box>\n      </WDTabPanel>\n      <WDTabPanel currentTab={ModalViews.PRESS} currentView={view}>\n        <WDPress>{children}</WDPress>\n      </WDTabPanel>\n    </WDViewsContainer>\n  );\n};\n\nexport default WDFullModal;\n","import * as React from \"react\";\nimport {\n  Box,\n  ModalProps,\n  Popover,\n  useMediaQuery,\n  useTheme,\n} from \"@mui/material\";\nimport useViewport from \"../../hooks/useViewport\";\nimport getDevice from \"../../utils/getDevice\";\nimport Device from \"../../enums/Device\";\n\ninterface WDPopoverProps {\n  children: React.ReactNode;\n  isOpen: boolean;\n  /**\n   * A optional callback to be called when the Popover closes. For example:\n   *\n   * () => setIsOpen(false)\n   */\n  onClose?: ModalProps[\"onClose\"];\n  /**\n   * A component that opens or closes the Popover when clicked.\n   */\n  anchorEl: HTMLElement;\n}\n\nconst WDPopover: React.FC<WDPopoverProps> = function ({\n  children,\n  isOpen,\n  onClose,\n  anchorEl,\n}): React.ReactElement {\n  const theme = useTheme();\n  const [viewport] = useViewport();\n  const device = getDevice(viewport);\n  let isMobile: boolean;\n  switch (device) {\n    case Device.MOBILE:\n    case Device.MOBILE_LG:\n    case Device.MOBILE_LANDSCAPE:\n    case Device.MOBILE_LG_LANDSCAPE:\n      isMobile = true;\n      break;\n    default:\n      isMobile = false;\n      break;\n  }\n  return (\n    <Box>\n      <Popover\n        anchorEl={anchorEl}\n        anchorOrigin={{\n          horizontal: \"left\",\n          vertical: \"center\",\n        }}\n        onClose={onClose}\n        open={isOpen}\n        sx={{ pointerEvents: \"none\" }}\n        PaperProps={{\n          sx: {\n            backgroundColor: \"transparent\",\n            boxShadow: \"none\",\n            maxHeight: \"unset\",\n            pointerEvents: \"all\",\n            filter: theme.palette.svg.filters.dropShadows[0],\n          },\n        }}\n        transformOrigin={{\n          horizontal: \"right\",\n          vertical: \"center\",\n        }}\n      >\n        <Box\n          sx={{\n            position: \"relative\",\n            width: isMobile ? 276 : 400,\n          }}\n        >\n          <Box\n            sx={{\n              mt: \"0px\",\n              position: \"relative\",\n              \"&::before\": {\n                background: theme.palette.secondary.main,\n                content: '\"\"',\n                height: 22,\n                position: \"absolute\",\n                left: \"calc(90% - 11px)\",\n                top: useMediaQuery(theme.breakpoints.up(\"tablet\")) ? 76 : 68,\n                transform: \"rotateX(45deg) rotateZ(45deg)\",\n                width: 22,\n              },\n            }}\n          />\n          <Box\n            sx={{\n              background: theme.palette.secondary.main,\n              borderRadius: 3,\n              maxWidth: \"90%\",\n              minHeight: 264,\n              maxHeight: viewport.height - 32,\n              overflowX: \"hidden\",\n              overflowY: \"scroll\",\n              m: 0,\n              p: \"16px 0\",\n            }}\n          >\n            {children}\n          </Box>\n        </Box>\n      </Popover>\n    </Box>\n  );\n};\n\nWDPopover.defaultProps = {\n  onClose: undefined,\n};\n\nexport default WDPopover;\n","enum Season {\n  AUTUMN = \"Autumn\",\n  SPRING = \"Spring\",\n  WINTER = \"Winter\",\n}\n\nexport default Season;\n","import * as React from \"react\";\nimport { useTheme } from \"@mui/material\";\nimport { NavIconProps } from \"../../../interfaces/Icons\";\nimport UIState from \"../../../enums/UIState\";\n\nconst WDActionIcon: React.FC<NavIconProps> = function ({\n  iconState = UIState.INACTIVE,\n}): React.ReactElement {\n  const theme = useTheme();\n  return (\n    <svg\n      filter={theme.palette.svg.filters.dropShadows[0]}\n      height={42}\n      width={42}\n      viewBox=\"6 3 42 42\"\n    >\n      {iconState === UIState.ACTIVE && (\n        <circle cx={27} cy={24} r={20} fill=\"#000\" />\n      )}\n      <g fill=\"#fff\">\n        <path d=\"M37.12 20.147h-4.293c-.88 0-1.651.77-1.651 1.651v4.294c0 .88.77 1.651 1.651 1.651h4.294c.88 0 1.651-.77 1.651-1.651v-4.294c0-.88-.77-1.651-1.651-1.651Zm-.22 4.073-1.21 1.211c-.11.11-.11.11-.22.11s-.22 0-.22-.11a.335.335 0 0 1 0-.44l.66-.66h-2.642c-.22 0-.33-.11-.33-.331 0-.22.11-.33.33-.33H35.8l-.55-.66a.335.335 0 0 1 0-.441c.11-.11.33-.11.44 0l1.21 1.21c.11.11.11.221 0 .441ZM20.718 20.147h-4.183c-.881 0-1.652.77-1.652 1.651v4.294c0 .88.77 1.651 1.652 1.651h4.293c.88 0 1.652-.77 1.652-1.651v-4.294c-.11-.88-.771-1.651-1.762-1.651Zm-.33 4.073h-2.642l.66.66c.11.11.11.331 0 .441-.11.11-.11.11-.22.11s-.22 0-.22-.11l-1.211-1.21a.335.335 0 0 1 0-.441l1.21-1.211c.11-.11.331-.11.441 0 .11.11.11.33 0 .44l-.66.66h2.642c.22 0 .33.11.33.33 0 .221-.22.331-.33.331ZM28.975 28.404h-4.293c-.88 0-1.651.77-1.651 1.651v4.294c0 .88.77 1.651 1.65 1.651h4.294c.881 0 1.652-.77 1.652-1.651v-4.294c0-.99-.77-1.651-1.652-1.651Zm-.66 4.403-1.211 1.211c-.11.11-.33.11-.44 0l-1.212-1.21c-.11-.11-.11-.11-.11-.22 0-.111 0-.221.11-.221.11-.11.33-.11.44 0l.661.66v-2.642c0-.22.11-.33.33-.33.22 0 .331.11.331.33v2.532l.66-.66c.11-.11.33-.11.44 0 .111.22.111.44 0 .55ZM28.975 12h-4.293c-.88 0-1.651.77-1.651 1.651v4.294c0 .88.77 1.651 1.65 1.651h4.294c.881 0 1.652-.77 1.652-1.651V13.65c0-.88-.77-1.651-1.652-1.651Zm-.66 3.523c-.11.11-.33.11-.44 0l-.661-.66v2.532c0 .22-.11.33-.33.33-.22 0-.33-.11-.33-.33v-2.533l-.661.66c-.11.111-.33.111-.44 0a.335.335 0 0 1 0-.44l1.21-1.21c.11-.11.33-.11.44 0l1.212 1.21c.11.11.11.11.11.22s-.11.22-.11.22Z\" />\n      </g>\n    </svg>\n  );\n};\n\nexport default WDActionIcon;\n","import { ParsedTime } from \"../interfaces/ParsedTime\";\n\nconst secondsInMinute = 60;\nconst minutesInHour = 60;\nconst hoursInDay = 24;\n\nexport default function parseSeconds(seconds: number): ParsedTime {\n  let timeLeft: ParsedTime = {\n    d: 0,\n    h: 0,\n    m: 0,\n    s: 0,\n  };\n\n  if (seconds > 0) {\n    timeLeft = {\n      d: Math.floor(seconds / (secondsInMinute * minutesInHour * hoursInDay)),\n      h: Math.floor((seconds / (secondsInMinute * minutesInHour)) % hoursInDay),\n      m: Math.floor((seconds / secondsInMinute) % minutesInHour),\n      s: Math.floor(seconds % secondsInMinute),\n    };\n  }\n\n  return timeLeft;\n}\n","import * as React from \"react\";\nimport { useEffect, useState } from \"react\";\nimport { Avatar, Chip, useTheme } from \"@mui/material\";\nimport TimeNotRunningOutIcon from \"../../assets/png/icn_phase_countdown_black.png\";\nimport TimeRunningOutIcon from \"../../assets/png/icn_phase_countdown_red.png\";\nimport parseSeconds from \"../../utils/parseSeconds\";\nimport { ParsedTime } from \"../../interfaces/ParsedTime\";\nimport formatTime from \"../../utils/formatTime\";\n\ninterface WDCountdownPillProps {\n  endTime: number;\n  phaseTime: number;\n}\n\nconst milli = 1000;\n\nconst WDCountdownPill: React.FC<WDCountdownPillProps> = function ({\n  endTime,\n  phaseTime,\n}) {\n  const theme = useTheme();\n  const endTimeInMilliSeconds = endTime * milli;\n  const phaseTimeInMilliSeconds = phaseTime * milli;\n\n  const quarterTimeRemaining =\n    endTimeInMilliSeconds - phaseTimeInMilliSeconds / 4;\n\n  const secondsLeft = endTime - +new Date() / milli;\n\n  const [timeLeft, setTimeLeft] = useState<ParsedTime>(\n    parseSeconds(secondsLeft),\n  );\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setTimeLeft(parseSeconds(secondsLeft));\n    }, 1000);\n\n    return () => clearTimeout(timer);\n  }, [secondsLeft]);\n\n  const chipDisplay: string = formatTime(timeLeft);\n  const isTimeRunningOut = +new Date() > quarterTimeRemaining;\n\n  return (\n    <Chip\n      avatar={\n        <Avatar>\n          <img\n            src={isTimeRunningOut ? TimeRunningOutIcon : TimeNotRunningOutIcon}\n            alt=\"Countdown icon\"\n          />\n        </Avatar>\n      }\n      sx={{\n        backgroundColor: isTimeRunningOut\n          ? theme.palette.error.main\n          : theme.palette.primary.main,\n        color: theme.palette.secondary.main,\n        filter: theme.palette.svg.filters.dropShadows[0],\n      }}\n      label={chipDisplay}\n    />\n  );\n};\n\nexport default WDCountdownPill;\n","enum ScrollButtonState {\n  BACKWARD = \"left\",\n  FORWARD = \"right\",\n  DISABLED = \"disabled\",\n}\n\nexport default ScrollButtonState;\n","import { ParsedTime } from \"../interfaces/ParsedTime\";\n\nexport default function formatTime(time: ParsedTime): string {\n  const availableTimeIntervals = Object.keys(time).filter((key) => time[key]);\n\n  if (availableTimeIntervals.length > 1) {\n    return `${time[availableTimeIntervals[0]]}${availableTimeIntervals[0]} ${\n      time[availableTimeIntervals[1]]\n    }${availableTimeIntervals[1]}`;\n  }\n  if (availableTimeIntervals.length === 0) {\n    return \"Time Up\";\n  }\n\n  return `${time[availableTimeIntervals[0]]}${availableTimeIntervals[0]}`;\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAABnlBMVEUAAAD/q6j/nJn/xsT/c23/xsX/npr/5uX/lpL/aWL/2tn/8fD/npv/m5j/cWv/7ez/xsT/mpf/c23/7+//6en/3Nv/1tX/r63/tLL/jIj/hID/cGn/dG7/9fX/z87/wL7/vLr/pqP/fHf/+vr/8vL/1NP/rar/zMr/g37/eXP/3dz/YVn/t7X/oqD/jYn/+Pj/qqj/ZFz/t7X/gn3/j4v/5OP/b2j/6+r/xMP/9vb/4N//uLf/qKX/kIz/0tH/////xsT/srD/e3b/2dj/jIj/vLr/j4v/f3r/eHL/+vr/9vb/5uX/4uH/3Nv/1NP/op//lpP/iYX/hoL/cWv/ysn/vrz/ubf/tbP/ko7/gn3/dW//7Oz/zcz/wL7/rKn/qKb/7u7/6ur/4N//3dz/0c//z87/t7X/n5z/nZr/mZX/hH//bmf/a2T/Zl//ZF3/6Of/1tX/zMr/wsH/r63/rqv/p6T/lJD/bWX/aGH/8/P/5OP/09L/yMb/pKH/m5j/cGn/Ylr/+Pf/8PD/qqj/paL/mpb/397/3t3/wsD/oZ5mKiOUAAAAP3RSTlMA/v5gX+7u397ej19fUEAgICAg7+/v7+/u7u7u7d/f3t7e3c/Pz8/Ozs6/v76+vpCQkI+PjmBQT09AQEBAQD8x8KLFAAABAWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iPz48cjpSREYgeG1sbnM6cj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+PHI6RGVzY3JpcHRpb24geG1sbnM6eD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+PHg6Q3JlYXRlRGF0ZT4yMDIyLTAyLTA4VDE2OjAwOjU5LTAwOjAwPC94OkNyZWF0ZURhdGU+PC9yOkRlc2NyaXB0aW9uPjwvcjpSREY+PD94cGFja2V0IGVuZD0iciI/PsAzAGQAAAHNSURBVCjPXc1nY9JgFIbhA6XV1lr33nvvPQMtIKTURJlCIaQDiMQSKIFipSqCrf/a52R03R9z5TkvbfbqwRVBEMQ7jyZod/vOidGogH4tLY36dtCBqx1R/O3gtxV99PC22ZFep7OFul4989y1F7lcsbeJGLarP+M+5+ZRNVcsioJgIa6yZc/al/fUVEwZLFzRYfFs5Bbbs+npmqrmXMQQu2wkMunj4XdoTRVdbFdtm7xM9DoWizG7Ux0GQh8maGxuzmbn1TaMBT2h2+vrf+HgqIVxEOALuknH5jl21cIICPAVnaapqRmneeswPn92AzoZhoHDvWAw+MmNjhvGR251YbE+I0YbciYcDgetTtE1WxYWZxP+ZKkgeTU5A+cf7tPYKgvoh38jlG6akncgt1qZMH54Su9ZZuuJhL+RTKWbSrdcGWjMmcw7ovOgOnb+fCiVXvaYUrmypsmy3NpLREOYwRr5ZKgUWC4oXansXdPA44Ru8IwxxfjHlP5hO9AwRAeHYRsYptKMSt/SkUMgPowdjDHQ9Ch9HK5U9pPTy+E8D0uMBcXsS9KIa3z5AoY24q7ZvYeb2xq6aCEe9SiXxml3bx7fPRkInLj+8C25/Qfm+Mpp+q+KIQAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,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\"","import * as React from \"react\";\nimport ScrollButtonState from \"../../../enums/ScrollButton\";\n\ninterface PhaseArrowProps {\n  direction: ScrollButtonState;\n  disabled?: boolean;\n}\n\nconst WDPhaseArrowIcon: React.FC<PhaseArrowProps> = function ({\n  disabled,\n  direction,\n}): React.ReactElement {\n  return (\n    <svg fill=\"none\" height=\"15\" width=\"8\" xmlns=\"http://www.w3.org/2000/svg\">\n      {direction === ScrollButtonState.BACKWARD && (\n        <path d=\"M0 7.5 8 0v15z\" fill=\"#000\" opacity={disabled ? \"40%\" : \"\"} />\n      )}\n      {direction === ScrollButtonState.FORWARD && (\n        <path\n          d=\"m0 0 8 7.5L0 15z\"\n          fill=\"#000\"\n          opacity={disabled ? \"40%\" : \"\"}\n        />\n      )}\n    </svg>\n  );\n};\n\nWDPhaseArrowIcon.defaultProps = {\n  disabled: false,\n};\n\nexport default WDPhaseArrowIcon;\n","import * as React from \"react\";\nimport Button from \"@mui/material/Button\";\nimport ScrollButtonState from \"../../enums/ScrollButton\";\nimport WDPhaseArrowIcon from \"./icons/WDPhaseArrowIcon\";\n\ninterface ScrollButtonProps {\n  className: string;\n  direction: ScrollButtonState;\n  disabled?: boolean;\n  onClick?: React.MouseEventHandler<HTMLButtonElement> | undefined;\n}\n\nconst WDScrollButton: React.FC<ScrollButtonProps> = function ({\n  className,\n  direction,\n  disabled,\n  onClick,\n}): React.ReactElement {\n  return (\n    <Button\n      sx={{\n        backgroundColor: \"secondary.main\",\n        boxShadow: \"none\",\n        borderRadius: \"22px\",\n        padding: \"13px 19px 12px 13px\",\n        \"&:hover, &:focus, &:disabled\": {\n          backgroundColor: \"#fff\",\n          boxShadow: \"none\",\n        },\n      }}\n      className={className}\n      disabled={disabled}\n      disableRipple\n      onClick={onClick}\n      variant=\"contained\"\n    >\n      <WDPhaseArrowIcon direction={direction} disabled={disabled} />\n    </Button>\n  );\n};\n\nWDScrollButton.defaultProps = {\n  disabled: false,\n  onClick: undefined,\n};\n\nexport default WDScrollButton;\n","import * as React from \"react\";\nimport { Box, ButtonGroup, useTheme } from \"@mui/material\";\nimport WDScrollButton from \"./WDScrollButton\";\nimport ScrollButtonState from \"../../enums/ScrollButton\";\nimport Season from \"../../enums/Season\";\n\ninterface WDPillScrollerProps {\n  disabled?: ScrollButtonState | undefined;\n  onChangeSeason?: React.MouseEventHandler<HTMLButtonElement> | undefined;\n  season: Season;\n  year: number;\n}\n\nconst WDPillScroller: React.FC<WDPillScrollerProps> = function ({\n  disabled,\n  onChangeSeason,\n  season,\n  year,\n}): React.ReactElement {\n  const theme = useTheme();\n  return (\n    <Box\n      sx={{\n        alignItems: \"flex-start\",\n        display: \"flex\",\n        backgroundColor: \"white\",\n        borderRadius: \"22px\",\n        filter: theme.palette.svg.filters.dropShadows[0],\n      }}\n    >\n      <ButtonGroup>\n        <WDScrollButton\n          className=\"WDScroll--Backward\"\n          direction={ScrollButtonState.BACKWARD}\n          disabled={disabled === ScrollButtonState.BACKWARD}\n          onClick={onChangeSeason}\n        />\n        <Box\n          sx={{\n            alignItems: \"center\",\n            bgcolor: \"secondary.main\",\n            display: \"flex\",\n            fontWeight: \"bold\",\n            fontSize: 12,\n            textTransform: \"uppercase\",\n          }}\n        >\n          {`${season} ${year}`}\n        </Box>\n        <WDScrollButton\n          className=\"WDScroll--Forward\"\n          direction={ScrollButtonState.FORWARD}\n          disabled={disabled === ScrollButtonState.FORWARD}\n          onClick={onChangeSeason}\n        />\n      </ButtonGroup>\n    </Box>\n  );\n};\n\nWDPillScroller.defaultProps = {\n  disabled: undefined,\n  onChangeSeason: undefined,\n};\n\nexport default WDPillScroller;\n","import * as React from \"react\";\nimport { Box, Button, useTheme } from \"@mui/material\";\nimport UIState from \"../../../enums/UIState\";\nimport Season from \"../../../enums/Season\";\n\ninterface GamePhaseIconProps {\n  disabled?: boolean;\n  icon: Season | UIState.ACTIVE;\n  onClick?: React.MouseEventHandler<HTMLButtonElement> | undefined;\n  year: number;\n}\n\nconst WDGamePhaseIcon: React.FC<GamePhaseIconProps> = function ({\n  disabled,\n  icon,\n  onClick,\n  year,\n}): React.ReactElement {\n  const theme = useTheme();\n  const dropShadow = theme.palette.svg.filters.dropShadows[0];\n  const squareSide = 64;\n  return (\n    <Button\n      disabled={disabled}\n      onClick={onClick}\n      sx={{\n        position: \"relative\",\n        fontSize: 12,\n        padding: 0,\n        minHeight: squareSide,\n        minWidth: squareSide,\n        borderRadius: \"50%\",\n      }}\n    >\n      {icon === UIState.ACTIVE && (\n        <svg fill=\"none\" filter={dropShadow} height={50} width={50}>\n          <circle cx={25} cy={25} r={22} fill=\"#000\" />\n          <path d=\"m28 17-9 8 9 8\" stroke=\"#fff\" strokeWidth={3} />\n        </svg>\n      )}\n      {icon === Season.AUTUMN && (\n        <svg fill=\"none\" filter={dropShadow} height={31} width={27}>\n          <path\n            d=\"M19.31 21.29c.12-.62 3.78-3.38 6.94-5.83l-1.18-.38a.85.85 0 0 1-.56-1l1.16-4.18-3.18.87a1 1 0 0 1-1.26-.84l-.15-1.27-3.27 3.15a.38.38 0 0 1-.64-.35l1.31-7-1.84 1a.59.59 0 0 1-.81-.25L13.14 0l-2.68 5.21a.6.6 0 0 1-.82.25l-1.84-1 1.31 7a.38.38 0 0 1-.64.35L5.21 8.66 5.06 9.9a1 1 0 0 1-1.27.84L.58 9.87l1.16 4.18a.85.85 0 0 1-.56 1L0 15.43c3.16 2.45 6.82 5.21 6.94 5.83s-1 2.35-1 2.35a38.53 38.53 0 0 1 5.38-1.41c.94 0 1.17.85 1.17 1.7s-.55 6.45-.27 6.65a2.65 2.65 0 0 0 1.78 0c.22-.2-.27-5.8-.27-6.65s.23-1.68 1.17-1.7c1.825.34 3.623.811 5.38 1.41 0 0-1.11-1.59-.97-2.32z\"\n            fill=\"#fff\"\n          />\n        </svg>\n      )}\n      {icon === Season.SPRING && (\n        <svg fill=\"none\" filter={dropShadow} height={32} width={25}>\n          <g fill=\"#fff\">\n            <path d=\"m18.87.574-3.42 3.281L12.038 0l-3.42 3.855L5.198.574S-2.82 14.489 11.981 17h.103C26.867 14.49 18.87.574 18.87.574zM24.016 19.526c.3-.987-4.167-.329-4.75-.078-1.249.528-3.585 1.731-4.055 4.561s.154 3.376-.077 3.68c-.231.302 2.832.44 3.961.155a5.78 5.78 0 0 0 2.266-1.07 5.859 5.859 0 0 0 1.61-1.934c1.301-2.155.762-4.38 1.045-5.314zM.044 19.526c-.3-.987 4.168-.329 4.75-.078 1.249.528 3.585 1.731 4.055 4.561s-.154 3.376.077 3.68c.231.302-2.832.44-3.961.155a5.781 5.781 0 0 1-2.266-1.07 5.86 5.86 0 0 1-1.61-1.934C-.17 22.685.326 20.46.043 19.526z\" />\n          </g>\n          <path\n            d=\"M12.125 9.187V31\"\n            stroke=\"#fff\"\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n          />\n        </svg>\n      )}\n      {icon === Season.WINTER && (\n        <svg fill=\"none\" filter={dropShadow} height={35} width={31}>\n          <path\n            clipRule=\"evenodd\"\n            d=\"m29.54 25.188.49.53a.178.178 0 0 1-.047.155.179.179 0 0 1-.153.055l-.7-.16c-1.36-.3-2.666-.81-3.87-1.51l-.19-.1-.1 2a.52.52 0 0 1-.22.39l-.19.13a.3.3 0 0 1-.36 0l-.15-.13a.49.49 0 0 1-.19-.42l.14-2.54-.88-.51-.2 3.56a.53.53 0 0 1-.21.39l-.23.16a.29.29 0 0 1-.36 0l-.21-.18a.52.52 0 0 1-.18-.41l.23-4.17-.84-.49-.17 3.07a.479.479 0 0 1-.21.39l-.23.16a.29.29 0 0 1-.36 0l-.22-.19a.54.54 0 0 1-.17-.4l.1-3.16.18-.47-.94-.54-1 1.77h-2v1.08l.5.08 2.79 1.49a.538.538 0 0 1 .26.35v.28a.3.3 0 0 1-.16.33l-.25.11a.51.51 0 0 1-.45 0l-2.76-1.43v1l3.78 1.91a.5.5 0 0 1 .27.35v.27a.3.3 0 0 1-.16.33l-.25.11a.51.51 0 0 1-.45 0l-3.19-1.62v1l2.3 1.14a.51.51 0 0 1 .28.37v.21a.3.3 0 0 1-.17.31l-.21.1a.521.521 0 0 1-.44 0l-1.76-.89v.21a13.93 13.93 0 0 1-.59 4.11l-.22.68a.18.18 0 0 1-.175.138.18.18 0 0 1-.175-.138l-.21-.68a13.62 13.62 0 0 1-.63-4.11v-.21l-1.72.88a.521.521 0 0 1-.44 0l-.22-.1a.29.29 0 0 1-.16-.31v-.21a.521.521 0 0 1 .27-.37l2.27-1.15v-1l-3.18 1.65a.51.51 0 0 1-.45 0l-.25-.11a.32.32 0 0 1-.17-.33l.06-.27a.5.5 0 0 1 .27-.35l3.72-1.89v-1l-2.8 1.39a.51.51 0 0 1-.45 0l-.25-.11a.32.32 0 0 1-.17-.33l.06-.28a.542.542 0 0 1 .26-.35l2.78-1.49.5-.08v-1.07h-2l-1-1.75-.93.53.21.61.1 3.16a.499.499 0 0 1-.18.39l-.21.19a.29.29 0 0 1-.36 0l-.23-.16a.51.51 0 0 1-.22-.39l-.16-3.06-.84.48.22 4.17a.49.49 0 0 1-.17.41l-.21.19a.29.29 0 0 1-.36 0l-.23-.16a.51.51 0 0 1-.21-.39l-.2-3.57-.88.51.14 2.54a.49.49 0 0 1-.19.42l-.16.13a.29.29 0 0 1-.35 0l-.19-.14a.51.51 0 0 1-.22-.39l-.1-2-.17.08a14 14 0 0 1-3.87 1.51l-.7.15a.18.18 0 0 1-.17-.3l.48-.53a13.777 13.777 0 0 1 3.25-2.59l.18-.11-1.71-1.07a.5.5 0 0 1-.22-.38v-.24a.3.3 0 0 1 .19-.3l.2-.07a.48.48 0 0 1 .45.05l2.08 1.44.89-.51-3-1.95a.5.5 0 0 1-.22-.38v-.28a.29.29 0 0 1 .2-.3l.26-.09a.519.519 0 0 1 .44.05l3.5 2.29.84-.49-2.57-1.68a.51.51 0 0 1-.23-.38v-.27a.3.3 0 0 1 .2-.31l.27-.09a.5.5 0 0 1 .43 0l2.7 1.71.31.4.93-.54-1-1.75 1-1.75-.94-.55-.32.4-2.69 1.66a.5.5 0 0 1-.43 0l-.27-.09a.3.3 0 0 1-.2-.31v-.27a.55.55 0 0 1 .23-.39l2.57-1.67-.84-.49-3.49 2.28a.521.521 0 0 1-.45.06l-.26-.09a.29.29 0 0 1-.2-.3v-.28a.48.48 0 0 1 .23-.38l3-1.95-.88-.51-2.08 1.44a.54.54 0 0 1-.45.05l-.2-.08a.28.28 0 0 1-.18-.3v-.23a.5.5 0 0 1 .23-.38l1.64-1.07-.18-.11a13.571 13.571 0 0 1-3.24-2.6l-.49-.52a.19.19 0 0 1 .17-.31l.7.16a13.73 13.73 0 0 1 3.87 1.51l.18.19.1-2a.51.51 0 0 1 .22-.39l.19-.14a.32.32 0 0 1 .36 0l.15.13a.51.51 0 0 1 .19.43l-.14 2.54.88.51.2-3.57a.53.53 0 0 1 .21-.39l.23-.16a.29.29 0 0 1 .36 0l.21.18a.55.55 0 0 1 .18.41l-.23 4.17.84.49.17-3.07a.45.45 0 0 1 .21-.38l.23-.16a.29.29 0 0 1 .36 0l.22.18a.539.539 0 0 1 .17.4l-.1 3.16-.18.47 1 .49 1-1.74h1.93v-1.11l-.5-.07-2.79-1.5a.52.52 0 0 1-.26-.35v-.28a.28.28 0 0 1 .16-.32l.25-.12a.51.51 0 0 1 .45 0l2.76 1.44v-1l-3.8-1.87a.54.54 0 0 1-.27-.36v-.27a.28.28 0 0 1 .16-.32l.25-.12a.51.51 0 0 1 .45 0l3.21 1.59v-1l-2.32-1.11a.51.51 0 0 1-.28-.37v-.2a.31.31 0 0 1 .17-.32l.21-.09a.49.49 0 0 1 .44 0l1.78.85v-.21c-.009-1.392.19-2.777.59-4.11l.22-.68a.18.18 0 0 1 .35 0l.21.68c.418 1.33.63 2.716.63 4.11v.21l1.76-.85a.49.49 0 0 1 .44 0l.18.07a.3.3 0 0 1 .16.32v.2a.519.519 0 0 1-.27.37l-2.27 1.15v1l3.19-1.62a.51.51 0 0 1 .45 0l.25.12a.3.3 0 0 1 .17.32l-.06.27a.54.54 0 0 1-.28.34l-3.72 1.88v1l2.74-1.42a.51.51 0 0 1 .45 0l.24.14a.3.3 0 0 1 .17.32l-.06.28a.52.52 0 0 1-.26.35l-2.78 1.5-.5.07v1.16h2l1 1.73 1-.55-.19-.55-.1-3.16a.52.52 0 0 1 .18-.4l.21-.19a.29.29 0 0 1 .36 0l.23.16a.51.51 0 0 1 .22.39l.16 3.06.84-.48-.22-4.17a.49.49 0 0 1 .17-.41l.21-.19a.3.3 0 0 1 .36 0l.23.15a.51.51 0 0 1 .21.39l.2 3.57.88-.51-.14-2.54a.49.49 0 0 1 .19-.42l.14-.22a.29.29 0 0 1 .35 0l.19.13a.509.509 0 0 1 .22.39l.1 2 .17-.06a13.43 13.43 0 0 1 3.87-1.51l.7-.16a.18.18 0 0 1 .17.3l-.48.53a14.08 14.08 0 0 1-3.25 2.6l-.18.1 1.76.92a.51.51 0 0 1 .22.39v.23a.3.3 0 0 1-.19.3l-.2.07a.48.48 0 0 1-.45 0l-2.13-1.39-.89.51 3 2a.51.51 0 0 1 .22.39v.27a.3.3 0 0 1-.2.31l-.26.08a.521.521 0 0 1-.44 0l-3.5-2.28-.84.48 2.57 1.68a.53.53 0 0 1 .23.38v.28a.29.29 0 0 1-.2.3l-.27.09a.5.5 0 0 1-.43-.05l-2.63-1.66-.31-.39-1 .55 1 1.76-1 1.73.94.54.32-.39 2.67-1.66a.5.5 0 0 1 .43-.05l.27.09a.29.29 0 0 1 .2.3v.28a.55.55 0 0 1-.23.38l-2.57 1.68.84.48 3.51-2.33a.52.52 0 0 1 .45-.06l.26.09a.3.3 0 0 1 .2.31v.27a.52.52 0 0 1-.23.39l-3 2 .88.51 2.04-1.44a.48.48 0 0 1 .45 0l.2.07a.28.28 0 0 1 .18.3v.23a.48.48 0 0 1-.23.38l-1.64 1.08.27.1c1.207.695 2.3 1.572 3.24 2.6zm-14.62-4.52 2.79-1.61v-3.23l-2.79-1.62-2.8 1.62v3.23zm.1-1.84-1.31-.76v-1.51l1.31-.76 1.31.76v1.51z\"\n            fill=\"#fff\"\n            fillRule=\"evenodd\"\n          />\n        </svg>\n      )}\n      <Box\n        sx={{\n          position: \"absolute\",\n          textAlign: \"center\",\n          width: squareSide,\n          left: 0,\n          bottom: \"-7px\",\n          color: \"#fff\",\n          fontWeight: \"bold\",\n          textTransform: \"uppercase\",\n        }}\n      >\n        <span style={{ filter: dropShadow }}>{year}</span>\n      </Box>\n    </Button>\n  );\n};\n\nWDGamePhaseIcon.defaultProps = {\n  onClick: undefined,\n  disabled: false,\n};\n\nexport default WDGamePhaseIcon;\n","enum Move {\n  SAVE = \"save\",\n  READY = \"ready\",\n}\n\nexport default Move;\n","import * as React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport { Box } from \"@mui/material\";\nimport { gameOverview } from \"../../state/game/game-api-slice\";\nimport { useAppSelector } from \"../../state/hooks\";\nimport GameOverviewResponse from \"../../state/interfaces/GameOverviewResponse\";\nimport Season from \"../../enums/Season\";\nimport UIState from \"../../enums/UIState\";\nimport WDCountdownPill from \"./WDCountdownPill\";\nimport WDPillScroller from \"./WDPillScroller\";\nimport WDGamePhaseIcon from \"./icons/WDGamePhaseIcon\";\n\nconst WDPhaseUI: React.FC = function (): React.ReactElement {\n  const [currentSeason, setCurrentSeason] = useState<Season>(Season.SPRING);\n  const [currentYear, setCurrentYear] = useState<number>(1901);\n  const [currentProcessTime, setCurrentProcessTime] =\n    useState<GameOverviewResponse[\"processTime\"]>(null);\n  const [timerDisplayState, setTimerDisplayState] = useState(true);\n\n  const { phaseMinutes, processTime, season, year } =\n    useAppSelector(gameOverview);\n\n  const showPillTimer = () => {\n    setTimerDisplayState(!timerDisplayState);\n  };\n\n  const phaseSeconds = phaseMinutes * 60;\n\n  useEffect(() => {\n    setCurrentSeason(season as Season);\n    setCurrentYear(year);\n    setCurrentProcessTime(processTime);\n  }, [processTime, season, year]);\n\n  return (\n    <Box\n      sx={{\n        display: \"flex\",\n        alignItems: \"center\",\n        height: 40,\n        marginTop: \"3px\",\n      }}\n    >\n      <WDGamePhaseIcon\n        icon={timerDisplayState ? currentSeason : UIState.ACTIVE}\n        onClick={showPillTimer}\n        year={currentYear}\n      />\n      {timerDisplayState && currentProcessTime && (\n        <WDCountdownPill\n          endTime={currentProcessTime}\n          phaseTime={phaseSeconds}\n        />\n      )}\n      {!timerDisplayState && (\n        <WDPillScroller season={currentSeason} year={currentYear} />\n      )}\n    </Box>\n  );\n};\n\nexport default WDPhaseUI;\n","export default function capitalizeString(string: string): string {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n","import * as React from \"react\";\nimport { Stack, useTheme } from \"@mui/material\";\nimport WDButton from \"./WDButton\";\nimport MoveStatus from \"../../types/MoveStatus\";\nimport Move from \"../../enums/Move\";\nimport useViewport from \"../../hooks/useViewport\";\nimport getDevice from \"../../utils/getDevice\";\nimport Device from \"../../enums/Device\";\nimport { useAppDispatch, useAppSelector } from \"../../state/hooks\";\nimport {\n  gameApiSliceActions,\n  gameData,\n  gameOrdersMeta,\n  saveOrders,\n} from \"../../state/game/game-api-slice\";\nimport UpdateOrder from \"../../interfaces/state/UpdateOrder\";\n\ninterface WDMoveControlsProps {\n  gameState: MoveStatus;\n  readyDisabled: boolean;\n  toggleState: (move: Move) => void;\n}\n\nconst WDMoveControls: React.FC<WDMoveControlsProps> = function ({\n  gameState: { ready, save },\n  readyDisabled,\n  toggleState,\n}): React.ReactElement {\n  const theme = useTheme();\n  const [viewport] = useViewport();\n  const { data } = useAppSelector(gameData);\n  const ordersMeta = useAppSelector(gameOrdersMeta);\n  const dispatch = useAppDispatch();\n  const device = getDevice(viewport);\n  let isMobile: boolean;\n  switch (device) {\n    case Device.MOBILE:\n    case Device.MOBILE_LG:\n    case Device.MOBILE_LANDSCAPE:\n    case Device.MOBILE_LG_LANDSCAPE:\n      isMobile = true;\n      break;\n    default:\n      isMobile = false;\n      break;\n  }\n\n  const clickButton = (type: Move) => {\n    dispatch(\n      gameApiSliceActions.processMapClick({\n        name: undefined,\n        clickObject: \"save_button\",\n      }),\n    );\n    if (\"currentOrders\" in data && \"contextVars\" in data) {\n      const { currentOrders, contextVars } = data;\n      if (contextVars && currentOrders) {\n        const orderUpdates: UpdateOrder[] = [];\n        currentOrders.forEach(\n          ({ fromTerrID, id, toTerrID, type: moveType, unitID, viaConvoy }) => {\n            const updateReference = ordersMeta[id].update;\n            let orderUpdate: UpdateOrder = {\n              fromTerrID,\n              id,\n              toTerrID,\n              type: moveType,\n              unitID,\n              viaConvoy,\n            };\n            if (updateReference) {\n              orderUpdate = {\n                ...orderUpdate,\n                ...updateReference,\n              };\n            }\n            orderUpdates.push(orderUpdate);\n          },\n        );\n        const orderSubmission = {\n          orderUpdates,\n          context: JSON.stringify(contextVars.context),\n          contextKey: contextVars.contextKey,\n          queryParams: {},\n        };\n        if (type === Move.READY) {\n          orderSubmission.queryParams = ready\n            ? { notready: \"on\" }\n            : { ready: \"on\" };\n        }\n        dispatch(saveOrders(orderSubmission));\n      }\n    }\n    if (type === Move.READY) {\n      toggleState(type);\n    }\n  };\n\n  const ordersMetaValues = Object.values(ordersMeta);\n  const ordersLength = ordersMetaValues.length;\n  const ordersSaved = ordersMetaValues.reduce(\n    (acc, meta) => acc + +meta.saved,\n    0,\n  );\n\n  if (\n    (ordersLength === ordersSaved && save) ||\n    (ordersLength !== ordersSaved && !save)\n  ) {\n    toggleState(Move.SAVE);\n  }\n\n  const saveDisabled = ready || !save;\n\n  return (\n    <Stack\n      alignItems=\"center\"\n      direction={isMobile ? \"column\" : \"row\"}\n      spacing={2}\n    >\n      <WDButton\n        color=\"primary\"\n        disabled={saveDisabled}\n        onClick={() => clickButton(Move.SAVE)}\n        sx={{\n          filter: saveDisabled\n            ? undefined\n            : theme.palette.svg.filters.dropShadows[0],\n        }}\n      >\n        Save\n      </WDButton>\n      <WDButton\n        color=\"primary\"\n        disabled={readyDisabled}\n        onClick={() => clickButton(Move.READY)}\n        sx={{\n          filter: readyDisabled\n            ? undefined\n            : theme.palette.svg.filters.dropShadows[0],\n        }}\n      >\n        {ready ? \"Unready\" : \"Ready\"}\n      </WDButton>\n    </Stack>\n  );\n};\n\nexport default WDMoveControls;\n","import * as React from \"react\";\nimport { useTheme } from \"@mui/material\";\nimport UIState from \"../../../enums/UIState\";\nimport { NavIconProps } from \"../../../interfaces/Icons\";\n\nconst WDHomeIcon: React.FC<NavIconProps> = function ({\n  iconState = UIState.INACTIVE,\n}): React.ReactElement {\n  const theme = useTheme();\n  return (\n    <svg\n      filter={theme.palette.svg.filters.dropShadows[0]}\n      height={40}\n      width={40}\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      {iconState === UIState.ACTIVE && (\n        <circle cx=\"20\" cy=\"20\" r=\"20\" fill=\"#000\" />\n      )}\n      <path\n        d=\"M30.692 16.247 20.579 7.562a.874.874 0 0 0-1.137 0L9.307 16.247a.855.855 0 0 0-.251.962c.063.167.176.31.325.412a.9.9 0 0 0 .506.156h2.047V28.94a.42.42 0 0 0 .127.289.436.436 0 0 0 .294.124h5.074a.436.436 0 0 0 .294-.124.42.42 0 0 0 .126-.29v-7.59a.41.41 0 0 1 .124-.292.425.425 0 0 1 .297-.121h3.413c.111 0 .218.043.297.12a.41.41 0 0 1 .124.293v7.59a.42.42 0 0 0 .126.29.436.436 0 0 0 .294.124h5.074a.436.436 0 0 0 .294-.124.42.42 0 0 0 .127-.29V17.778h2.047a.9.9 0 0 0 .524-.136.875.875 0 0 0 .346-.41.856.856 0 0 0-.244-.984Z\"\n        fill=\"#fff\"\n      />\n    </svg>\n  );\n};\n\nexport default WDHomeIcon;\n","import * as React from \"react\";\nimport { Box, IconButton, Link, useTheme } from \"@mui/material\";\n\nimport WDPositionContainer from \"./WDPositionContainer\";\nimport Position from \"../../enums/Position\";\nimport { useAppSelector } from \"../../state/hooks\";\nimport { gameData, gameOverview } from \"../../state/game/game-api-slice\";\nimport { CountryTableData } from \"../../interfaces\";\nimport Country from \"../../enums/Country\";\nimport WDFullModal from \"./WDFullModal\";\nimport WDPopover from \"./WDPopover\";\nimport WDActionIcon from \"./icons/WDActionIcon\";\nimport WDPhaseUI from \"./WDPhaseUI\";\nimport UIState from \"../../enums/UIState\";\nimport capitalizeString from \"../../utils/capitalizeString\";\nimport Vote from \"../../enums/Vote\";\nimport Move from \"../../enums/Move\";\nimport WDMoveControls from \"./WDMoveControls\";\nimport MoveStatus from \"../../types/MoveStatus\";\nimport countryMap from \"../../data/map/variants/classic/CountryMap\";\nimport WDHomeIcon from \"./icons/WDHomeIcon\";\nimport getOrderStates from \"../../utils/state/getOrderStates\";\n\nconst abbrMap = {\n  Russia: \"RUS\",\n  Germany: \"GER\",\n  Italy: \"ITA\",\n  Austria: \"AUS\",\n  England: \"ENG\",\n  France: \"FRA\",\n  Turkey: \"TUR\",\n};\n/**\n * the game status data created here is for displaying purpose\n * the real gamestatus data will be provided from Redux Store?\n */\nconst gameStatusData: MoveStatus = {\n  save: false,\n  ready: false,\n};\n\nconst WDUI: React.FC = function (): React.ReactElement {\n  const theme = useTheme();\n\n  const [showControlModal, setShowControlModal] = React.useState(false);\n  const [readyDisabled, setReadyDisabled] = React.useState(false);\n  const popoverTrigger = React.useRef<HTMLElement>(null);\n\n  const {\n    alternatives,\n    excusedMissedTurns,\n    gameID,\n    members,\n    name,\n    phase,\n    pot,\n    season,\n    user,\n    year,\n  } = useAppSelector(gameOverview);\n\n  const {\n    data: { contextVars },\n  } = useAppSelector(gameData);\n\n  const constructTableData = (member) => {\n    const memberCountry: Country = countryMap[member.country];\n    return {\n      ...member,\n      abbr: abbrMap[member.country],\n      color: theme.palette[memberCountry].main,\n      power: memberCountry,\n      votes: {\n        cancel: member.votes.includes(capitalizeString(Vote[Vote.cancel])),\n        draw: member.votes.includes(capitalizeString(Vote[Vote.draw])),\n        pause: member.votes.includes(capitalizeString(Vote[Vote.pause])),\n      },\n    };\n  };\n\n  const countries: CountryTableData[] = [];\n\n  members.forEach((member) => {\n    if (member.userID !== user.member.userID) {\n      countries.push(constructTableData(member));\n    }\n  });\n\n  const userTableData = constructTableData(user.member);\n\n  const closeControlModal = () => {\n    setShowControlModal(false);\n  };\n\n  const toggleControlModal = () => {\n    setShowControlModal(!showControlModal);\n  };\n\n  const controlModalTrigger = (\n    <IconButton\n      sx={{ padding: 0, pointerEvents: \"all\" }}\n      onClick={toggleControlModal}\n    >\n      <WDActionIcon\n        iconState={showControlModal ? UIState.ACTIVE : UIState.INACTIVE}\n      />\n    </IconButton>\n  );\n\n  const [gameState, setGameState] = React.useState(gameStatusData);\n  const toggleState = (move: Move) => {\n    setGameState((preState) => ({\n      ...preState,\n      [move]: !gameState[move],\n    }));\n  };\n\n  React.useEffect(() => {\n    if (popoverTrigger.current) {\n      setTimeout(() => {\n        toggleControlModal();\n      }, 1000);\n    }\n  }, [popoverTrigger]);\n\n  if (contextVars?.context?.orderStatus) {\n    const orderStates = getOrderStates(contextVars.context.orderStatus);\n    if (orderStates.None) {\n      setReadyDisabled(true);\n    }\n    if (!orderStates.Ready && gameState.ready) {\n      setGameState((preState) => ({\n        ...preState,\n        [Move.READY]: false,\n      }));\n    }\n    if ((orderStates.Ready || orderStates.None) && !gameState.ready) {\n      setGameState((preState) => ({\n        ...preState,\n        [Move.READY]: true,\n      }));\n    }\n  }\n\n  const popover = popoverTrigger.current ? (\n    <WDPopover\n      isOpen={showControlModal}\n      onClose={closeControlModal}\n      anchorEl={popoverTrigger.current}\n    >\n      <WDFullModal\n        alternatives={alternatives}\n        countries={countries}\n        excusedMissedTurns={excusedMissedTurns}\n        gameID={gameID}\n        phase={phase}\n        potNumber={pot}\n        season={season}\n        title={name}\n        userCountry={userTableData}\n        year={year}\n      >\n        {null}\n      </WDFullModal>\n    </WDPopover>\n  ) : null;\n\n  return (\n    <>\n      <WDPositionContainer position={Position.TOP_RIGHT}>\n        <Link href=\"/\">\n          <WDHomeIcon />\n        </Link>\n        <Box\n          sx={{\n            pt: \"15px\",\n          }}\n          ref={popoverTrigger}\n        >\n          {controlModalTrigger}\n        </Box>\n        {popover}\n      </WDPositionContainer>\n      <WDPositionContainer position={Position.TOP_LEFT}>\n        <WDPhaseUI />\n      </WDPositionContainer>\n      <WDPositionContainer position={Position.BOTTOM_RIGHT}>\n        <WDMoveControls\n          readyDisabled={readyDisabled}\n          gameState={gameState}\n          toggleState={toggleState}\n        />\n      </WDPositionContainer>\n    </>\n  );\n};\n\nexport default WDUI;\n","import * as React from \"react\";\nimport WDUI from \"./WDUI\";\n\nconst WDMapController = React.lazy(() => import(\"../map/WDMapController\"));\n\nconst WDMain: React.FC = function (): React.ReactElement {\n  return (\n    <React.Suspense fallback={<div>Loading...</div>}>\n      <WDMapController />\n      <WDUI />\n    </React.Suspense>\n  );\n};\n\nexport default WDMain;\n","import * as React from \"react\";\nimport \"./assets/css/App.css\";\nimport Box from \"@mui/material/Box\";\nimport WDMain from \"./components/ui/WDMain\";\nimport { useAppDispatch } from \"./state/hooks\";\nimport { loadGame } from \"./state/game/game-api-slice\";\n\nconst App: React.FC = function (): React.ReactElement {\n  const urlParams = new URLSearchParams(window.location.search);\n  const currentGameID = urlParams.get(\"gameID\");\n  const dispatch = useAppDispatch();\n  dispatch(loadGame(String(currentGameID)));\n  return (\n    <Box className=\"App\">\n      <WDMain />\n    </Box>\n  );\n};\n\nexport default App;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport gameApiSliceReducer from \"./game/game-api-slice\";\n\nexport const store = configureStore({\n  reducer: {\n    game: gameApiSliceReducer,\n  },\n});\n\nexport type AppDispatch = typeof store.dispatch;\nexport type RootState = ReturnType<typeof store.getState>;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { CssBaseline, ThemeProvider } from \"@mui/material\";\nimport { Provider } from \"react-redux\";\nimport webDiplomacyTheme from \"./webDiplomacyTheme\";\nimport \"./assets/css/index.css\";\nimport App from \"./App\";\nimport { store } from \"./state/store\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <ThemeProvider theme={webDiplomacyTheme}>\n        <CssBaseline />\n        <App />\n      </ThemeProvider>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\"),\n);\n","enum ArrowColor {\n  CONVOY,\n  IMPLIED,\n  IMPLIED_FOREIGN,\n  MOVE,\n  MOVE_FAILED,\n  RETREAT,\n  SUPPORT_HOLD,\n  SUPPORT_MOVE,\n}\n\nexport default ArrowColor;\n","enum ArrowType {\n  CONVOY,\n  MOVE,\n  SUPPORT,\n  HOLD,\n}\n\nexport default ArrowType;\n","import { useTheme } from \"@mui/material\";\nimport Device from \"../enums/Device\";\n\nexport default function getDevice({\n  height,\n  width,\n}: {\n  width: number;\n  height: number;\n}): Device {\n  const theme = useTheme();\n\n  const desktop = width >= theme.breakpoints.values.desktop;\n  if (desktop) {\n    return Device.DESKTOP;\n  }\n\n  const tabletLandscape =\n    width >= theme.breakpoints.values.tabletLandscape &&\n    height <= theme.breakpoints.values.tablet;\n  if (tabletLandscape) {\n    return Device.TABLET_LANDSCAPE;\n  }\n\n  const mobileLgLandscape =\n    width >= theme.breakpoints.values.mobileLgLandscape &&\n    height <= theme.breakpoints.values.mobileLg;\n  if (mobileLgLandscape) {\n    return Device.MOBILE_LG_LANDSCAPE;\n  }\n\n  const tablet =\n    width >= theme.breakpoints.values.tablet &&\n    height >= theme.breakpoints.values.tabletLandscape;\n  if (tablet) {\n    return Device.TABLET;\n  }\n\n  const mobileLg =\n    width >= theme.breakpoints.values.mobileLg &&\n    height >= theme.breakpoints.values.mobileLgLandscape;\n  if (mobileLg) {\n    return Device.MOBILE_LG;\n  }\n\n  const mobileLandscape = width >= theme.breakpoints.values.mobileLandscape;\n  if (mobileLandscape) {\n    return Device.MOBILE_LANDSCAPE;\n  }\n\n  return Device.MOBILE;\n}\n","import * as React from \"react\";\nimport { Viewport } from \"../interfaces\";\n\nexport default function useViewport(): [Viewport, () => void] {\n  const getViewport = (): Viewport => {\n    let { height, width } = window.visualViewport;\n    const { scale } = window.visualViewport;\n    height = Math.round(height * scale);\n    width = Math.round(width * scale);\n    return {\n      height,\n      width,\n      scale,\n    };\n  };\n\n  const [viewport, setValue] = React.useState<Viewport>(getViewport());\n\n  const setViewport = () => {\n    setValue(getViewport());\n  };\n\n  React.useEffect(() => {\n    window.addEventListener(\"resize\", setViewport);\n    return () => window.removeEventListener(\"resize\", setViewport);\n  }, []);\n\n  return [viewport, setViewport];\n}\n","enum ApiRoute {\n  GAME_DATA = \"game/data\",\n  GAME_STATUS = \"game/status\",\n  GAME_MESSAGES = \"game/getmessages\",\n  GAME_OVERVIEW = \"game/overview\",\n  GAME_TOGGLEVOTE = \"game/togglevote\",\n}\n\nexport default ApiRoute;\n","import axios, { AxiosResponse } from \"axios\";\nimport ApiRoute from \"../../enums/ApiRoute\";\n\nexport type QueryParams = {\n  [key: string]: string;\n};\n\nconst buildQueryString = (params: QueryParams): string =>\n  Object.entries(params)\n    .reduce((keyValuePairs: string[], [key, value]) => {\n      if (value) {\n        keyValuePairs.push(`${encodeURI(key)}=${encodeURI(value)}`);\n      }\n      return keyValuePairs;\n    }, [])\n    .join(\"&\");\n\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_WD_BASE_URL,\n  headers: {\n    \"Content-Type\": \"multipart/form-data\",\n  },\n});\n\nexport const getGameApiRequest = (\n  route: ApiRoute,\n  queryParams: QueryParams,\n): Promise<AxiosResponse> =>\n  api.get(`api.php?route=${route}&${buildQueryString(queryParams)}`);\n\nconst orderSubmission = axios.create({\n  baseURL: process.env.REACT_APP_WD_BASE_URL,\n  headers: {\n    \"Content-Type\": \"application/x-www-form-urlencoded\",\n  },\n});\n\nexport const submitOrders = (\n  orders,\n  queryParams: QueryParams = {},\n): Promise<AxiosResponse> => {\n  if (Object.keys(queryParams).length) {\n    return orderSubmission.post(\n      `ajax.php?${buildQueryString(queryParams)}`,\n      orders,\n    );\n  }\n  return orderSubmission.post(\"ajax.php\", orders);\n};\n","import { GameState } from \"../interfaces/GameState\";\n\nconst initialState: GameState = {\n  apiStatus: \"idle\",\n  board: undefined,\n  data: {\n    msg: \"\",\n    referenceCode: \"\",\n    success: false,\n    data: {\n      currentOrders: [],\n      territories: {},\n      territoryStatuses: [],\n      units: {},\n    },\n  },\n  error: null,\n  order: {\n    inProgress: false,\n    method: \"click\",\n    onTerritory: null,\n    orderID: \"\",\n    subsequentClicks: [],\n    toTerritory: null,\n    unitID: \"\",\n  },\n  ordersMeta: {},\n  ownUnits: [],\n  maps: {\n    territoryToUnit: {},\n    unitToOrder: {},\n    unitToTerritory: {},\n    enumToTerritory: {},\n    territoryToEnum: {},\n  },\n  territoriesMeta: {},\n  commands: {\n    mapCommands: {},\n    territoryCommands: {},\n    unitCommands: {},\n  },\n  overview: {\n    alternatives: \"\",\n    anon: \"Yes\",\n    drawType: \"draw-votes-public\",\n    excusedMissedTurns: 4,\n    gameID: 0,\n    gameOver: \"No\",\n    members: [],\n    minimumBet: 5,\n    name: \"\",\n    pauseTimeRemaining: null,\n    phase: \"\",\n    phaseMinutes: 14400,\n    playerTypes: \"\",\n    pot: 35,\n    potType: \"\",\n    processStatus: \"\",\n    processTime: null,\n    season: \"Spring\",\n    startTime: 0,\n    turn: 0,\n    user: {\n      member: {\n        bet: 5,\n        country: \"Russia\",\n        countryID: 1,\n        excusedMissedTurns: 0,\n        missedPhases: 0,\n        newMessagesFrom: [],\n        online: false,\n        orderStatus: {},\n        status: \"Playing\",\n        supplyCenterNo: 4,\n        timeLoggedIn: 0,\n        unitNo: 4,\n        userID: 1,\n        username: \"\",\n        votes: [],\n      },\n    },\n    variant: {\n      id: 1,\n      mapID: 1,\n      name: \"Classic\",\n      fullName: \"Classic\",\n      description: \"The standard Diplomacy map of Europe.\",\n      author: \"Avalon Hill\",\n      countries: [],\n      variantClasses: {\n        drawMap: \"Classic\",\n        adjudicatorPreGame: \"Classic\",\n      },\n      codeVersion: null,\n      cacheVersion: null,\n      coastParentIDByChildID: {\n        \"76\": 8,\n        \"77\": 8,\n        \"78\": 32,\n        \"79\": 32,\n        \"80\": 20,\n        \"81\": 20,\n      },\n      coastChildIDsByParentID: {\n        \"8\": [76, 77],\n        \"32\": [78, 79],\n        \"20\": [80, 81],\n      },\n      terrIDByName: null,\n      supplyCenterCount: 34,\n      supplyCenterTarget: 18,\n    },\n    variantID: 1,\n    year: 1901,\n  },\n  status: {\n    gameID: 2,\n    countryID: 0,\n    variantID: 1,\n    potType: \"\",\n    turn: 0,\n    phase: \"\",\n    gameOver: \"No\",\n    pressType: \"\",\n    phases: [],\n    standoffs: [],\n    occupiedFrom: [],\n    votes: null,\n    orderStatus: \"\",\n    status: \"\",\n  },\n  messages: {\n    messages: [],\n    pressType: \"\",\n    phase: \"\",\n  },\n};\n\nexport default initialState;\n","import Territory from \"../../../../enums/map/variants/classic/Territory\";\nimport UnitSlotName from \"../../../../types/map/UnitSlotName\";\n\nexport interface MTerritory {\n  parent?: Territory;\n  territory: Territory;\n  unitSlotName: UnitSlotName;\n}\n\ntype ITerritoryMap = {\n  [key: string]: MTerritory;\n};\n\n/**\n * This file maps territory names to local app enums.\n */\nconst TerritoryMap: ITerritoryMap = {\n  Clyde: {\n    territory: Territory.CLYDE,\n    unitSlotName: \"main\",\n  },\n  Edinburgh: {\n    territory: Territory.EDINBURGH,\n    unitSlotName: \"main\",\n  },\n  Liverpool: {\n    territory: Territory.LIVERPOOL,\n    unitSlotName: \"main\",\n  },\n  Yorkshire: {\n    territory: Territory.YORK,\n    unitSlotName: \"main\",\n  },\n  Wales: {\n    territory: Territory.WALES,\n    unitSlotName: \"main\",\n  },\n  London: {\n    territory: Territory.LONDON,\n    unitSlotName: \"main\",\n  },\n  Portugal: {\n    territory: Territory.PORTUGAL,\n    unitSlotName: \"main\",\n  },\n  Spain: {\n    territory: Territory.SPAIN,\n    unitSlotName: \"main\",\n  },\n  \"North Africa\": {\n    territory: Territory.NORTH_AFRICA,\n    unitSlotName: \"main\",\n  },\n  Tunis: {\n    territory: Territory.TUNIS,\n    unitSlotName: \"main\",\n  },\n  Naples: {\n    territory: Territory.NAPLES,\n    unitSlotName: \"main\",\n  },\n  Rome: {\n    territory: Territory.ROME,\n    unitSlotName: \"main\",\n  },\n  Tuscany: {\n    territory: Territory.TUSCANY,\n    unitSlotName: \"main\",\n  },\n  Piedmont: {\n    territory: Territory.PIEDMONT,\n    unitSlotName: \"main\",\n  },\n  Venice: {\n    territory: Territory.VENICE,\n    unitSlotName: \"main\",\n  },\n  Apulia: {\n    territory: Territory.APULIA,\n    unitSlotName: \"main\",\n  },\n  Greece: {\n    territory: Territory.GREECE,\n    unitSlotName: \"main\",\n  },\n  Albania: {\n    territory: Territory.ALBANIA,\n    unitSlotName: \"main\",\n  },\n  Serbia: {\n    territory: Territory.SERBIA,\n    unitSlotName: \"main\",\n  },\n  Bulgaria: {\n    territory: Territory.BULGARIA,\n    unitSlotName: \"main\",\n  },\n  Rumania: {\n    territory: Territory.RUMANIA,\n    unitSlotName: \"main\",\n  },\n  Constantinople: {\n    territory: Territory.CONSTANTINOPLE,\n    unitSlotName: \"main\",\n  },\n  Smyrna: {\n    territory: Territory.SMYRNA,\n    unitSlotName: \"main\",\n  },\n  Ankara: {\n    territory: Territory.ANKARA,\n    unitSlotName: \"main\",\n  },\n  Armenia: {\n    territory: Territory.ARMENIA,\n    unitSlotName: \"main\",\n  },\n  Syria: {\n    territory: Territory.SYRIA,\n    unitSlotName: \"main\",\n  },\n  Sevastopol: {\n    territory: Territory.SEVASTOPOL,\n    unitSlotName: \"main\",\n  },\n  Ukraine: {\n    territory: Territory.UKRAINE,\n    unitSlotName: \"main\",\n  },\n  Warsaw: {\n    territory: Territory.WARSAW,\n    unitSlotName: \"main\",\n  },\n  Livonia: {\n    territory: Territory.LIVONIA,\n    unitSlotName: \"main\",\n  },\n  Moscow: {\n    territory: Territory.MOSCOW,\n    unitSlotName: \"main\",\n  },\n  \"St. Petersburg\": {\n    territory: Territory.SAINT_PETERSBURG,\n    unitSlotName: \"main\",\n  },\n  Finland: {\n    territory: Territory.FINLAND,\n    unitSlotName: \"main\",\n  },\n  Sweden: {\n    territory: Territory.SWEDEN,\n    unitSlotName: \"main\",\n  },\n  Norway: {\n    territory: Territory.NORWAY,\n    unitSlotName: \"main\",\n  },\n  Denmark: {\n    territory: Territory.DENMARK,\n    unitSlotName: \"main\",\n  },\n  Kiel: {\n    territory: Territory.KIEL,\n    unitSlotName: \"main\",\n  },\n  Berlin: {\n    territory: Territory.BERLIN,\n    unitSlotName: \"main\",\n  },\n  Prussia: {\n    territory: Territory.PRUSSIA,\n    unitSlotName: \"main\",\n  },\n  Silesia: {\n    territory: Territory.SILESIA,\n    unitSlotName: \"main\",\n  },\n  Munich: {\n    territory: Territory.MUNICH,\n    unitSlotName: \"main\",\n  },\n  Ruhr: {\n    territory: Territory.RUHR,\n    unitSlotName: \"main\",\n  },\n  Holland: {\n    territory: Territory.HOLLAND,\n    unitSlotName: \"main\",\n  },\n  Belgium: {\n    territory: Territory.BELGIUM,\n    unitSlotName: \"main\",\n  },\n  Picardy: {\n    territory: Territory.PICARDY,\n    unitSlotName: \"main\",\n  },\n  Brest: {\n    territory: Territory.BREST,\n    unitSlotName: \"main\",\n  },\n  Paris: {\n    territory: Territory.PARIS,\n    unitSlotName: \"main\",\n  },\n  Burgundy: {\n    territory: Territory.BURGUNDY,\n    unitSlotName: \"main\",\n  },\n  Marseilles: {\n    territory: Territory.MARSEILLES,\n    unitSlotName: \"main\",\n  },\n  Gascony: {\n    territory: Territory.GASCONY,\n    unitSlotName: \"main\",\n  },\n  \"Barents Sea\": {\n    territory: Territory.BARENTS_SEA,\n    unitSlotName: \"main\",\n  },\n  \"Norwegian Sea\": {\n    territory: Territory.NORWEGIAN_SEA,\n    unitSlotName: \"main\",\n  },\n  \"North Sea\": {\n    territory: Territory.NORTH_SEA,\n    unitSlotName: \"main\",\n  },\n  Skagerrack: {\n    territory: Territory.SKAGERRACK,\n    unitSlotName: \"main\",\n  },\n  \"Heligoland Bight\": {\n    territory: Territory.HELIGOLAND_BIGHT,\n    unitSlotName: \"main\",\n  },\n  \"Baltic Sea\": {\n    territory: Territory.BALTIC_SEA,\n    unitSlotName: \"main\",\n  },\n  \"Gulf of Bothnia\": {\n    territory: Territory.GULF_OF_BOTHNIA,\n    unitSlotName: \"main\",\n  },\n  \"North Atlantic Ocean\": {\n    territory: Territory.NORTH_ATLANTIC,\n    unitSlotName: \"main\",\n  },\n  \"Irish Sea\": {\n    territory: Territory.IRISH_SEA,\n    unitSlotName: \"main\",\n  },\n  \"English Channel\": {\n    territory: Territory.ENGLISH_CHANNEL,\n    unitSlotName: \"main\",\n  },\n  \"Mid-Atlantic Ocean\": {\n    territory: Territory.MIDDLE_ATLANTIC,\n    unitSlotName: \"main\",\n  },\n  \"Western Mediterranean\": {\n    territory: Territory.WESTERN_MEDITERRANEAN,\n    unitSlotName: \"main\",\n  },\n  \"Gulf of Lyons\": {\n    territory: Territory.GULF_OF_LYONS,\n    unitSlotName: \"main\",\n  },\n  \"Tyrrhenian Sea\": {\n    territory: Territory.TYRRHENIAN_SEA,\n    unitSlotName: \"main\",\n  },\n  \"Ionian Sea\": {\n    territory: Territory.IONIAN_SEA,\n    unitSlotName: \"main\",\n  },\n  \"Adriatic Sea\": {\n    territory: Territory.ADRIATIC_SEA,\n    unitSlotName: \"main\",\n  },\n  \"Aegean Sea\": {\n    territory: Territory.AEGEAN_SEA,\n    unitSlotName: \"main\",\n  },\n  \"Eastern Mediterranean\": {\n    territory: Territory.EASTERN_MEDITERRANEAN,\n    unitSlotName: \"main\",\n  },\n  \"Black Sea\": {\n    territory: Territory.BLACK_SEA,\n    unitSlotName: \"main\",\n  },\n  Tyrolia: {\n    territory: Territory.TYROLIA,\n    unitSlotName: \"main\",\n  },\n  Bohemia: {\n    territory: Territory.BOHEMIA,\n    unitSlotName: \"main\",\n  },\n  Vienna: {\n    territory: Territory.VIENNA,\n    unitSlotName: \"main\",\n  },\n  Trieste: {\n    territory: Territory.TRIESTE,\n    unitSlotName: \"main\",\n  },\n  Budapest: {\n    territory: Territory.BUDAPEST,\n    unitSlotName: \"main\",\n  },\n  Galicia: {\n    territory: Territory.GALICIA,\n    unitSlotName: \"main\",\n  },\n  \"Spain (North Coast)\": {\n    parent: Territory.SPAIN,\n    territory: Territory.SPAIN_NORTH_COAST,\n    unitSlotName: \"nc\",\n  },\n  \"Spain (South Coast)\": {\n    parent: Territory.SPAIN,\n    territory: Territory.SPAIN_SOUTH_COAST,\n    unitSlotName: \"sc\",\n  },\n  \"St. Petersburg (North Coast)\": {\n    parent: Territory.SAINT_PETERSBURG,\n    territory: Territory.SAINT_PETERSBURG_NORTH_COAST,\n    unitSlotName: \"nc\",\n  },\n  \"St. Petersburg (South Coast)\": {\n    parent: Territory.SAINT_PETERSBURG,\n    territory: Territory.SAINT_PETERSBURG_SOUTH_COAST,\n    unitSlotName: \"sc\",\n  },\n  \"Bulgaria (North Coast)\": {\n    parent: Territory.BULGARIA,\n    territory: Territory.BULGARIA_NORTH_COAST,\n    unitSlotName: \"nc\",\n  },\n  \"Bulgaria (South Coast)\": {\n    parent: Territory.BULGARIA,\n    territory: Territory.BULGARIA_SOUTH_COAST,\n    unitSlotName: \"sc\",\n  },\n};\n\nexport default TerritoryMap;\n","import { v4 as uuidv4 } from \"uuid\";\nimport { current } from \"@reduxjs/toolkit\";\nimport {\n  GameCommand,\n  GameCommandType,\n} from \"../../state/interfaces/GameCommands\";\n\n/* eslint-disable no-param-reassign */\nexport default function setCommand(\n  state,\n  command: GameCommand,\n  container: GameCommandType,\n  id: string,\n): void {\n  const { commands } = current(state);\n  const commandsContainer = commands[container];\n  const newCommand = new Map(commandsContainer[id]) || new Map();\n  newCommand.set(uuidv4(), command);\n  state.commands[container][id] = newCommand;\n}\n","import { current } from \"@reduxjs/toolkit\";\nimport BuildUnitMap, { BuildUnitTypeMap } from \"../../data/BuildUnit\";\nimport countryMap from \"../../data/map/variants/classic/CountryMap\";\nimport TerritoryMap from \"../../data/map/variants/classic/TerritoryMap\";\nimport Territory from \"../../enums/map/variants/classic/Territory\";\nimport UIState from \"../../enums/UIState\";\nimport { GameCommand } from \"../../state/interfaces/GameCommands\";\nimport GameOverviewResponse from \"../../state/interfaces/GameOverviewResponse\";\nimport { GameState } from \"../../state/interfaces/GameState\";\nimport OrderState from \"../../state/interfaces/OrderState\";\nimport OrdersMeta from \"../../state/interfaces/SavedOrders\";\nimport TerritoriesMeta from \"../../state/interfaces/TerritoriesState\";\nimport setCommand from \"../state/setCommand\";\n\nexport default function drawBuilds(state): void {\n  const {\n    ordersMeta,\n    territoriesMeta,\n    overview: { members, phase },\n    maps,\n    ownUnits,\n  }: {\n    order: OrderState;\n    ordersMeta: OrdersMeta;\n    territoriesMeta: TerritoriesMeta;\n    overview: {\n      members: GameOverviewResponse[\"members\"];\n      phase: GameOverviewResponse[\"phase\"];\n    };\n    maps: GameState[\"maps\"];\n    ownUnits;\n  } = current(state);\n  if (phase === \"Builds\") {\n    ownUnits.forEach((unitID) => {\n      const command: GameCommand = {\n        command: \"NONE\",\n      };\n      setCommand(state, command, \"unitCommands\", unitID);\n    });\n    Object.values(ordersMeta).forEach(({ update }) => {\n      if (update) {\n        const { toTerrID, type } = update;\n        if (toTerrID) {\n          const territoryMeta = territoriesMeta[maps.territoryToEnum[toTerrID]];\n          if (territoryMeta) {\n            // Destroy Units\n            if (type === \"Destroy\" && toTerrID) {\n              const command: GameCommand = {\n                command: \"DESTROY\",\n              };\n              setCommand(\n                state,\n                command,\n                \"unitCommands\",\n                maps.territoryToUnit[toTerrID],\n              );\n            } else {\n              const buildType = BuildUnitMap[type];\n              const mappedTerritory = TerritoryMap[territoryMeta.name];\n              const memberCountry = members.find(\n                (member) =>\n                  member.countryID.toString() === territoryMeta.countryID,\n              );\n              if (memberCountry) {\n                let command: GameCommand = {\n                  command: \"SET_UNIT\",\n                  data: {\n                    setUnit: {\n                      componentType: \"Icon\",\n                      country: countryMap[memberCountry?.country],\n                      iconState: UIState.BUILD,\n                      unitSlotName: mappedTerritory.unitSlotName,\n                      unitType: BuildUnitTypeMap[buildType],\n                    },\n                  },\n                };\n                const commandTerritoryDestination =\n                  territoryMeta.territory ===\n                    Territory.SAINT_PETERSBURG_NORTH_COAST ||\n                  territoryMeta.territory ===\n                    Territory.SAINT_PETERSBURG_SOUTH_COAST\n                    ? Territory[Territory.SAINT_PETERSBURG]\n                    : Territory[territoryMeta.territory];\n                setCommand(\n                  state,\n                  command,\n                  \"territoryCommands\",\n                  commandTerritoryDestination,\n                );\n                command = {\n                  command: \"MOVE\",\n                };\n                setCommand(\n                  state,\n                  command,\n                  \"territoryCommands\",\n                  commandTerritoryDestination,\n                );\n              }\n            }\n          }\n        }\n      }\n    });\n  }\n}\n","import { current } from \"@reduxjs/toolkit\";\nimport { GameCommand } from \"../../state/interfaces/GameCommands\";\nimport GameDataResponse from \"../../state/interfaces/GameDataResponse\";\nimport GameOverviewResponse from \"../../state/interfaces/GameOverviewResponse\";\nimport OrderState from \"../../state/interfaces/OrderState\";\nimport OrdersMeta from \"../../state/interfaces/SavedOrders\";\nimport setCommand from \"../state/setCommand\";\n\nexport default function updateUnitsRetreat(state): void {\n  const {\n    data: {\n      data: { currentOrders },\n    },\n    order,\n    ordersMeta,\n    overview: { phase },\n  }: {\n    data: GameDataResponse;\n    order: OrderState;\n    ordersMeta: OrdersMeta;\n    overview: GameOverviewResponse;\n  } = current(state);\n  currentOrders?.forEach(({ id, unitID }) => {\n    const { update } = ordersMeta[id];\n    const toTerrID = update?.toTerrID;\n    const type = update?.type;\n\n    if (phase !== \"Retreats\") {\n      return;\n    }\n\n    let command: GameCommand = {\n      command: \"HOLD\",\n    };\n\n    if (type === \"Retreat\" && !toTerrID) {\n      command = {\n        command: \"DISLODGED\",\n      };\n    } else if (type === \"Retreat\" && toTerrID) {\n      command = {\n        command: \"NONE\",\n      };\n    } else if (type === \"Disband\" && order.orderID !== id) {\n      command = {\n        command: \"DISBAND\",\n      };\n    }\n    setCommand(state, command, \"unitCommands\", unitID);\n  });\n}\n","import { current } from \"@reduxjs/toolkit\";\nimport drawBuilds from \"./drawBuilds\";\nimport drawConvoyOrders from \"./drawConvoyOrders\";\nimport drawMoveOrders from \"./drawMoveOrders\";\nimport drawRetreatOrders from \"./drawRetreatOrders\";\nimport drawSupportHoldOrders from \"./drawSupportHoldOrders\";\nimport drawSupportMoveOrders from \"./drawSupportMoveOrders\";\nimport removeAllArrows from \"./removeAllArrows\";\nimport updateUnitsRetreat from \"./updateUnitsRetreat\";\n\nexport default function drawOrders(state): void {\n  const {\n    board,\n    data: { data },\n    maps,\n    ordersMeta,\n    overview: { phase },\n    ownUnits,\n  } = current(state);\n  removeAllArrows();\n  drawMoveOrders(data, maps, ordersMeta, board);\n  drawSupportMoveOrders(data, maps, ordersMeta, ownUnits);\n  drawSupportHoldOrders(data, ordersMeta);\n  drawConvoyOrders(data, maps, ordersMeta);\n  drawBuilds(state);\n  if (phase === \"Retreats\") {\n    updateUnitsRetreat(state);\n    drawRetreatOrders(data, ordersMeta);\n  }\n}\n","import * as d3 from \"d3\";\n\nexport default function removeAllArrows(): void {\n  d3.selectAll(\"line\").remove();\n}\n","import TerritoryMap from \"../../data/map/variants/classic/TerritoryMap\";\nimport ArrowColor from \"../../enums/ArrowColor\";\nimport ArrowType from \"../../enums/ArrowType\";\nimport { GameState } from \"../../state/interfaces/GameState\";\nimport OrdersMeta from \"../../state/interfaces/SavedOrders\";\nimport drawArrow from \"./drawArrow\";\n\nexport default function drawMoveOrders(\n  data: GameState[\"data\"][\"data\"],\n  maps: GameState[\"maps\"],\n  ordersMeta: OrdersMeta,\n  board: GameState[\"board\"],\n): void {\n  const { currentOrders, territories, units } = data;\n  const ordersMetaEntries = Object.entries(ordersMeta);\n  if (ordersMetaEntries.length && units && territories) {\n    ordersMetaEntries\n      .filter(([, { update }]) => update?.type === \"Move\")\n      .forEach(([orderID, { update }]) => {\n        const originalOrder = currentOrders?.find(({ id }) => id === orderID);\n        if (originalOrder && update) {\n          const { convoyPath, toTerrID, viaConvoy } = update;\n          if (toTerrID) {\n            const { id, unitID } = originalOrder;\n            const unitData = units[unitID];\n            const onTerrDetails = territories[unitData.terrID];\n            const toTerrDetails = territories[toTerrID];\n            const fromTerr = TerritoryMap[onTerrDetails.name].territory;\n            const toTerr = TerritoryMap[toTerrDetails.name].territory;\n            drawArrow(\n              id,\n              ArrowType.MOVE,\n              ArrowColor.MOVE,\n              \"territory\",\n              toTerr,\n              fromTerr,\n            );\n            if (viaConvoy === \"Yes\" && board) {\n              // implied convoy arrow\n              let path = convoyPath;\n              if (!convoyPath) {\n                const onTerritory = board.findTerritoryByID(unitData.terrID);\n                path = board\n                  .findUnitByID(unitID)\n                  ?.ConvoyGroup.pathArmyToCoastWithoutFleet(\n                    onTerritory,\n                    board.findTerritoryByID(toTerrID),\n                    onTerritory,\n                  );\n              }\n              if (path) {\n                path\n                  .filter((p) => p !== unitData.terrID)\n                  .forEach((p) => {\n                    const convoyingUnitID = maps.territoryToUnit[p];\n                    const convoyingUnitOrder =\n                      maps.unitToOrder[convoyingUnitID];\n                    const unitOrderMeta = ordersMeta[convoyingUnitOrder].update;\n                    if (\n                      unitOrderMeta?.fromTerrID !== unitData.terrID ||\n                      unitOrderMeta?.toTerrID !== update.toTerrID\n                    ) {\n                      drawArrow(\n                        `${id}-implied`,\n                        ArrowType.CONVOY,\n                        ArrowColor.IMPLIED,\n                        \"arrow\",\n                        id,\n                        Number(\n                          maps.territoryToEnum[\n                            maps.unitToTerritory[convoyingUnitID]\n                          ],\n                        ),\n                      );\n                    }\n                  });\n              }\n            }\n          }\n        }\n      });\n  }\n}\n","import TerritoryMap from \"../../data/map/variants/classic/TerritoryMap\";\nimport ArrowColor from \"../../enums/ArrowColor\";\nimport ArrowType from \"../../enums/ArrowType\";\nimport GameDataResponse from \"../../state/interfaces/GameDataResponse\";\nimport { GameState } from \"../../state/interfaces/GameState\";\nimport GameStateMaps from \"../../state/interfaces/GameStateMaps\";\nimport OrdersMeta from \"../../state/interfaces/SavedOrders\";\nimport drawArrow from \"./drawArrow\";\n\nexport default function drawSupportMoveOrders(\n  data: GameDataResponse[\"data\"],\n  maps: GameStateMaps,\n  ordersMeta: OrdersMeta,\n  ownUnits: GameState[\"ownUnits\"],\n): void {\n  const { currentOrders, territories, units } = data;\n  const ordersMetaEntries = Object.entries(ordersMeta);\n  if (ordersMetaEntries.length && units && territories) {\n    ordersMetaEntries\n      .filter(([, { update }]) => update?.type === \"Support move\")\n      .forEach(([orderID, { update }]) => {\n        const originalOrder = currentOrders?.find(({ id }) => id === orderID);\n        if (originalOrder && update) {\n          const { fromTerrID, toTerrID } = update;\n          if (fromTerrID && toTerrID) {\n            const { id, unitID } = originalOrder;\n\n            const unitBeingSupported = maps.territoryToUnit[fromTerrID];\n            const unitBeingSupportedOrder =\n              maps.unitToOrder[unitBeingSupported];\n\n            const supportingTerritory = maps.unitToTerritory[unitID];\n            const supportingTerritoryDetails = territories[supportingTerritory];\n            if (!ownUnits.includes(unitBeingSupported)) {\n              const supportArrowIdentifer = `${id}-foreign`;\n              drawArrow(\n                supportArrowIdentifer,\n                ArrowType.MOVE,\n                ArrowColor.IMPLIED_FOREIGN,\n                \"territory\",\n                TerritoryMap[territories[toTerrID].name].territory,\n                TerritoryMap[territories[fromTerrID].name].territory,\n              );\n              drawArrow(\n                id,\n                ArrowType.SUPPORT,\n                ArrowColor.SUPPORT_MOVE,\n                \"arrow\",\n                supportArrowIdentifer,\n                TerritoryMap[supportingTerritoryDetails.name].territory,\n              );\n            } else {\n              // update: unitBeingSupportedOrderDetails will throw an error if the unit being supported\n              // is not your own unit, which is why it is only run after doing an appropriate check\n              // (above if statement)\n              const { update: unitBeingSupportedOrderDetails } =\n                ordersMeta[unitBeingSupportedOrder];\n              if (unitBeingSupportedOrderDetails) {\n                const {\n                  type: supportedUnitActualOrderType,\n                  toTerrID: supportedUnitToTerrID,\n                } = unitBeingSupportedOrderDetails;\n                let supportArrowIdentifer = unitBeingSupportedOrder;\n                if (\n                  supportedUnitActualOrderType !== \"Move\" ||\n                  supportedUnitToTerrID !== toTerrID\n                ) {\n                  supportArrowIdentifer = `${id}-implied`;\n                  drawArrow(\n                    supportArrowIdentifer,\n                    ArrowType.MOVE,\n                    ArrowColor.IMPLIED,\n                    \"territory\",\n                    TerritoryMap[territories[toTerrID].name].territory,\n                    TerritoryMap[territories[fromTerrID].name].territory,\n                  );\n                }\n                drawArrow(\n                  id,\n                  ArrowType.SUPPORT,\n                  ArrowColor.SUPPORT_MOVE,\n                  \"arrow\",\n                  supportArrowIdentifer,\n                  TerritoryMap[supportingTerritoryDetails.name].territory,\n                );\n              }\n            }\n          }\n        }\n      });\n  }\n}\n","import TerritoryMap from \"../../data/map/variants/classic/TerritoryMap\";\nimport ArrowColor from \"../../enums/ArrowColor\";\nimport ArrowType from \"../../enums/ArrowType\";\nimport OrdersMeta from \"../../state/interfaces/SavedOrders\";\nimport drawArrow from \"./drawArrow\";\n\nexport default function drawSupportHoldOrders(\n  data,\n  ordersMeta: OrdersMeta,\n): void {\n  const { currentOrders, territories, units } = data;\n  const ordersMetaEntries = Object.entries(ordersMeta);\n  if (ordersMetaEntries.length && units && territories) {\n    ordersMetaEntries\n      .filter(([, { update }]) => update?.type === \"Support hold\")\n      .forEach(([orderID, { update }]) => {\n        const originalOrder = currentOrders.find(({ id }) => id === orderID);\n        if (originalOrder && update && update.toTerrID) {\n          const { id, unitID } = originalOrder;\n          const unitData = units[unitID];\n          const onTerrDetails = territories[unitData.terrID];\n          const toTerrDetails = territories[update.toTerrID];\n          const fromTerr = TerritoryMap[onTerrDetails.name].territory;\n          const toTerr = TerritoryMap[toTerrDetails.name].territory;\n          drawArrow(\n            id,\n            ArrowType.HOLD,\n            ArrowColor.SUPPORT_HOLD,\n            \"unit\",\n            toTerr,\n            fromTerr,\n          );\n        }\n      });\n  }\n}\n","import TerritoryMap from \"../../data/map/variants/classic/TerritoryMap\";\nimport ArrowColor from \"../../enums/ArrowColor\";\nimport ArrowType from \"../../enums/ArrowType\";\nimport GameDataResponse from \"../../state/interfaces/GameDataResponse\";\nimport GameStateMaps from \"../../state/interfaces/GameStateMaps\";\nimport OrdersMeta from \"../../state/interfaces/SavedOrders\";\nimport drawArrow from \"./drawArrow\";\n\nexport default function drawConvoyOrders(\n  data: GameDataResponse[\"data\"],\n  maps: GameStateMaps,\n  ordersMeta: OrdersMeta,\n): void {\n  const { currentOrders, territories, units } = data;\n  const ordersMetaEntries = Object.entries(ordersMeta);\n  if (ordersMetaEntries.length && units && territories) {\n    ordersMetaEntries\n      .filter(([, { update }]) => update?.type === \"Convoy\")\n      .forEach(([orderID, { update }]) => {\n        const originalOrder = currentOrders?.find(({ id }) => id === orderID);\n        if (originalOrder && update) {\n          const { fromTerrID, toTerrID } = update;\n          if (fromTerrID && toTerrID) {\n            const { id, unitID } = originalOrder;\n\n            const unitBeingConvoyed = maps.territoryToUnit[fromTerrID];\n            const unitBeingConvoyedOrder = maps.unitToOrder[unitBeingConvoyed];\n\n            const convoyingTerritory = maps.unitToTerritory[unitID];\n            const convoyingTerritoryDetails = territories[convoyingTerritory];\n\n            const { update: unitBeingConvoyedOrderDetails } =\n              ordersMeta[unitBeingConvoyedOrder];\n\n            if (update.toTerrID === unitBeingConvoyedOrderDetails?.toTerrID) {\n              drawArrow(\n                id,\n                ArrowType.CONVOY,\n                ArrowColor.CONVOY,\n                \"arrow\",\n                unitBeingConvoyedOrder,\n                TerritoryMap[convoyingTerritoryDetails.name].territory,\n              );\n            } else {\n              // draw implied arrows\n              drawArrow(\n                `${id}-implied`,\n                ArrowType.MOVE,\n                ArrowColor.IMPLIED,\n                \"territory\",\n                Number(maps.territoryToEnum[toTerrID]),\n                Number(maps.territoryToEnum[fromTerrID]),\n              );\n              drawArrow(\n                id,\n                ArrowType.CONVOY,\n                ArrowColor.CONVOY,\n                \"arrow\",\n                `${id}-implied`,\n                TerritoryMap[convoyingTerritoryDetails.name].territory,\n              );\n            }\n          }\n        }\n      });\n  }\n}\n","import TerritoryMap from \"../../data/map/variants/classic/TerritoryMap\";\nimport ArrowColor from \"../../enums/ArrowColor\";\nimport ArrowType from \"../../enums/ArrowType\";\nimport OrdersMeta from \"../../state/interfaces/SavedOrders\";\nimport drawArrow from \"./drawArrow\";\n\nexport default function drawRetreatOrders(data, ordersMeta: OrdersMeta): void {\n  const { currentOrders, territories, units } = data;\n  const ordersMetaEntries = Object.entries(ordersMeta);\n  if (ordersMetaEntries.length && units && territories) {\n    ordersMetaEntries\n      .filter(([, { update }]) => update?.type === \"Retreat\")\n      .forEach(([orderID, { update }]) => {\n        const originalOrder = currentOrders.find(({ id }) => id === orderID);\n        if (originalOrder && update && update.toTerrID) {\n          const { id, unitID } = originalOrder;\n          const unitData = units[unitID];\n          const onTerrDetails = territories[unitData.terrID];\n          const toTerrDetails = territories[update.toTerrID];\n          const fromTerr = TerritoryMap[onTerrDetails.name].territory;\n          const toTerr = TerritoryMap[toTerrDetails.name].territory;\n          drawArrow(\n            id,\n            ArrowType.MOVE,\n            ArrowColor.RETREAT,\n            \"territory\",\n            toTerr,\n            fromTerr,\n          );\n        }\n      });\n  }\n}\n","import { EditOrderMeta } from \"../../state/interfaces/SavedOrders\";\nimport drawOrders from \"../map/drawOrders\";\n\n/* eslint-disable no-param-reassign */\nexport default function updateOrdersMeta(state, updates: EditOrderMeta): void {\n  Object.entries(updates).forEach(([orderID, update]) => {\n    state.ordersMeta[orderID] = {\n      ...state.ordersMeta[orderID],\n      ...update,\n    };\n  });\n  drawOrders(state);\n}\n","import { current } from \"@reduxjs/toolkit\";\nimport countryMap from \"../../data/map/variants/classic/CountryMap\";\nimport Territory from \"../../enums/map/variants/classic/Territory\";\nimport { GameCommand } from \"../../state/interfaces/GameCommands\";\nimport GameOverviewResponse from \"../../state/interfaces/GameOverviewResponse\";\nimport TerritoriesMeta, {\n  TerritoryMeta,\n} from \"../../state/interfaces/TerritoriesState\";\nimport setCommand from \"../state/setCommand\";\n\n/* eslint-disable no-param-reassign */\nexport default function highlightMapTerritoriesBasedOnStatuses(state): void {\n  const {\n    territoriesMeta,\n    overview: { members },\n  }: {\n    territoriesMeta: TerritoriesMeta;\n    overview: {\n      members: GameOverviewResponse[\"members\"];\n    };\n  } = current(state);\n  if (Object.keys(territoriesMeta).length) {\n    const membersMap = {};\n    members.forEach((member) => {\n      membersMap[member.countryID] = member.country;\n    });\n    Object.values(territoriesMeta).forEach((terr: TerritoryMeta) => {\n      const { ownerCountryID, territory } = terr;\n      const country = ownerCountryID ? membersMap[ownerCountryID] : undefined;\n      if (territory) {\n        const command: GameCommand = {\n          command: \"CAPTURED\",\n          data: { country: country ? countryMap[country] : \"none\" },\n        };\n        setCommand(state, command, \"territoryCommands\", Territory[territory]);\n      }\n    });\n  }\n}\n","import { current } from \"@reduxjs/toolkit\";\nimport { GameCommand } from \"../../state/interfaces/GameCommands\";\nimport setCommand from \"./setCommand\";\n\n/* eslint-disable no-param-reassign */\nexport default function resetOrder(state): void {\n  const {\n    order: { unitID, type },\n    overview: { phase },\n  } = current(state);\n  if (type !== \"hold\" && type !== \"retreat\") {\n    const command: GameCommand = {\n      command: phase === \"Retreats\" ? \"DISLODGED\" : \"NONE\",\n    };\n    setCommand(state, command, \"unitCommands\", unitID);\n  }\n  if (type === \"disband\") {\n    const command: GameCommand = {\n      command: \"DISBAND\",\n    };\n    setCommand(state, command, \"unitCommands\", unitID);\n  }\n  state.order.inProgress = false;\n  state.order.unitID = \"\";\n  state.order.orderID = \"\";\n  state.order.onTerritory = 0;\n  state.order.toTerritory = 0;\n  state.order.subsequentClicks = [];\n  delete state.order.type;\n}\n","import { current } from \"@reduxjs/toolkit\";\nimport NewOrderPayload from \"../../interfaces/state/NewOrderPayload\";\nimport { GameCommand } from \"../../state/interfaces/GameCommands\";\nimport getDataForOrder from \"./getDataForOrder\";\nimport setCommand from \"./setCommand\";\n\n/* eslint-disable no-param-reassign */\nexport default function startNewOrder(state, action: NewOrderPayload): void {\n  const {\n    order: { unitID: prevUnitID, type },\n  } = current(state);\n  if (prevUnitID && type !== \"hold\" && type !== \"disband\") {\n    const command: GameCommand = {\n      command: \"NONE\",\n    };\n    setCommand(state, command, \"unitCommands\", prevUnitID);\n  }\n  delete state.order.type;\n  const orderData = getDataForOrder(state, action.payload);\n  state.order = orderData;\n  const { unitID } = orderData;\n  if (unitID) {\n    const command: GameCommand = {\n      command: \"SELECTED\",\n    };\n    setCommand(state, command, \"unitCommands\", unitID);\n  }\n}\n","import { current } from \"@reduxjs/toolkit\";\nimport OrderState from \"../../state/interfaces/OrderState\";\n\nexport default function getDataForOrder(\n  state,\n  { method, onTerritory, orderID, toTerritory, type, unitID }: OrderState,\n): OrderState {\n  const {\n    data: { data: gameData },\n  } = current(state);\n  const newOrder: OrderState = {\n    inProgress: true,\n    method,\n    onTerritory,\n    orderID:\n      orderID ||\n      gameData.currentOrders.find((order) => order.unitID === unitID)?.id,\n    subsequentClicks: [],\n    toTerritory,\n    unitID,\n  };\n  if (type) {\n    newOrder.type = type;\n  }\n  return newOrder;\n}\n","import GetArrayElementType from \"../../utils/getArrayElementType\";\n\nexport const UnitSlotNames = [\"main\", \"nc\", \"sc\"] as const;\n\ntype UnitSlotName = GetArrayElementType<typeof UnitSlotNames>;\n\nexport default UnitSlotName;\n","import PathSearchClass from \"./PathSearchClass\";\nimport TerritoryClass from \"./TerritoryClass\";\n\nexport default class PathClass {\n  complete = false;\n\n  alternativeChecked = false;\n\n  pathNextNodes: TerritoryClass[] | any[] = [];\n\n  rank = 0;\n\n  // eslint-disable-next-line no-useless-constructor\n  constructor(public node, public pathToNode) {}\n\n  includes(node) {\n    if (this.node === node) {\n      return true;\n    }\n\n    if (this.pathToNode == null) {\n      return false;\n    }\n\n    return this.pathToNode.includes(node);\n  }\n\n  /*\n   * Creates a new path identical to this one apart from the fact, that a new\n   * node was added at the end.\n   */\n  addNode(node) {\n    return new PathClass(node, this);\n  }\n\n  /*\n   * removes the first element of the path and return the new first one\n   */\n  removeFirst() {\n    if (this.pathToNode == null) {\n      return;\n    }\n\n    if (this.pathToNode.pathToNode != null) {\n      this.pathToNode.removeFirst();\n    }\n\n    this.newPathToNode(null);\n  }\n\n  /*\n   * The path is a complete path from start node to end node. Set it is\n   * fixed in each node for further searches.\n   */\n  setComplete(nextNode) {\n    this.node.path = this;\n\n    // assure, the rank is set to 0 if this node is the start\n    if (this.pathToNode === null) {\n      this.setRank(0);\n    }\n\n    if (!!nextNode && this.pathNextNodes.indexOf(nextNode) === -1) {\n      // adjust the ranks / count of alternative routes\n      this.pathNextNodes.forEach((pnn) => {\n        pnn.changeRank(1);\n      });\n\n      nextNode.setRank(this.pathNextNodes.length);\n\n      this.pathNextNodes.push(nextNode);\n    }\n\n    // previous nodes of complete path are already set to complete\n    if (!this.complete) {\n      this.complete = true;\n\n      if (this.pathToNode !== null) {\n        this.pathToNode.setComplete(this);\n      }\n    }\n  }\n\n  /*\n   * To avoid resource intensive rank updates for all following nodes\n   * everytime the rank is changed, the (real) rank is only calculated on call\n   * by just summing up this rank and all the rank of the predecessors.\n   */\n  getRank() {\n    return (\n      this.rank + (this.pathToNode !== null ? this.pathToNode.getRank() : 0)\n    );\n  }\n\n  /*\n   * Changes the rank for this path node and all following (in case of a complete path).\n   *\n   * Positive change -> increase\n   * Negative change -> decrease\n   */\n  changeRank(change) {\n    this.rank += change;\n  }\n\n  /*\n   * Sets this rank and adjust the rank of following nodes\n   */\n  setRank(newRank) {\n    const diff = newRank - this.rank;\n\n    this.changeRank(diff);\n  }\n\n  /*\n   * get the last node of the path (normally end node)\n   */\n  getLastPathNode() {\n    if (this.pathNextNodes.length === 0) {\n      // this is the last element of the path\n      return this;\n    }\n\n    // (arbitrarily) choose the first of the next nodes instead\n    return this.pathNextNodes[0].getLastPathNode();\n  }\n\n  removePathNextNode(path) {\n    if (!this.complete) {\n      return;\n    }\n\n    const index = this.pathNextNodes.indexOf(path);\n\n    if (index === -1) {\n      return;\n    }\n\n    this.pathNextNodes.splice(this.pathNextNodes.indexOf(path), 1);\n\n    this.pathNextNodes.forEach((pnn) => {\n      pnn.changeRank(-1);\n    });\n    // this.pathNextNodes.invoke(\"changeRank\", -1); // decrease rank of all other forks (one alternative was just deleted\n\n    if (this.pathNextNodes.length === 0) {\n      // path not part of an alternative path -> dissolve completely\n      this.node.path = null;\n      this.dissolvePathToNode();\n    }\n  }\n\n  dissolvePathToNode() {\n    if (this.pathToNode != null) {\n      this.pathToNode.removePathNextNode(this);\n    }\n\n    this.complete = false;\n  }\n\n  /*\n   * Dissolves the previous path to this node and add new path to node\n   */\n  newPathToNode(node) {\n    this.dissolvePathToNode();\n\n    this.pathToNode = node;\n\n    return this;\n  }\n\n  /*\n   * Attaches the current path to an existing path through the node.\n   *\n   * Returns the path node where the reconnection happened.\n   */\n  attachToNodePath() {\n    if (this.node.hasPath()) {\n      return this.node.path.newPathToNode(this.pathToNode);\n    }\n    return this;\n  }\n\n  getNextNodeRank() {\n    return this.getRank() + this.pathNextNodes.length - 1;\n  }\n\n  /*\n   * check for this path, if alternative paths starting from this.node\n   * to end terr exist.\n   */\n  searchAlternativeRoutes(fEndNode) {\n    if (!this.complete) return;\n\n    /*\n     * Only search for alternative routes in relevant cases:\n     * - not already done\n     * - not end node\n     * - not next to end node (no alternative can be found, where this path is not part of)\n     */\n    if (!this.alternativeChecked) {\n      if (\n        fEndNode(this.node) ||\n        this.pathNextNodes.filter((pnn) => {\n          return pnn.node === fEndNode;\n        })\n      ) {\n        this.alternativeChecked = true;\n      } else {\n        const nextNodeRank = this.getNextNodeRank();\n        const alternativeRouteSearch = new PathSearchClass(\n          this.node, // start at this node\n          (node) => {\n            // final node is found or node with higher rank\n            return (\n              fEndNode(node) ||\n              (node.hasPath() && nextNodeRank < node.getMaxRank())\n            );\n          },\n          (node) => {\n            /* additional condition an alternative route nodes have to fullfill\n             * for optimization:\n             *\n             * node not already used in search of same rank or lower before\n             *\t\t(=> if it is, there are no chances of finding an alternative route)\n             */\n            return nextNodeRank < node.getMaxRank();\n          },\n        );\n\n        if (alternativeRouteSearch.findPath()) {\n          // there exists an alternativeRoute\n          let alternativeRoute = alternativeRouteSearch.path;\n\n          // first check if alternativeRoute reaches endNode or path with lower rank\n          if (!fEndNode(alternativeRoute.node)) {\n            // not EndNode -> reconnect paths\n            alternativeRoute = alternativeRoute.attachToNodePath();\n          }\n\n          // append alternativeRoute to current path\n          alternativeRoute.removeFirst().newPathToNode(this);\n\n          // next set the route complete\n          alternativeRoute.setComplete();\n\n          // now search alternativeRoute for alternativeRoutes (beginning at the node next to end node)\n          alternativeRoute.pathToNode.searchAlternativeRoutes(fEndNode);\n          /*\n           * Note, that not extra check is needed for pathToNode:\n           * Even if the alternativeRoute heads directly into endNode,\n           * pathToNode is at least this. So the extreme case is that other\n           * paths from this node are checked (which is wanted)\n           */\n        } else {\n          // all alternative routes from this node are found\n          this.alternativeChecked = true;\n        }\n      }\n    }\n\n    if (this.pathToNode !== null)\n      this.pathToNode.searchAlternativeRoutes(fEndNode);\n  }\n\n  /*\n   * Returns an alternative path that does not pass through this.node.\n   * Alternative routes have to be searched before-\n   */\n  getAlternativeRoute() {\n    if (!this.alternativeChecked) {\n      return null;\n    }\n\n    if (this.pathToNode === null) {\n      return null;\n    }\n\n    if (this.pathToNode.pathNextNodes.length > 1) {\n      // there is a fork in the path at node before\n      // find a path to next node of previous node that is not this.\n      // and return the complete path\n      return this.pathToNode.pathNextNodes\n        .find((path) => {\n          return path !== this;\n        }, this)\n        .getLastPathNode();\n    }\n    return this.pathToNode.getAlternativeRoute();\n  }\n\n  /*\n   * Checks if this path can be appended to path so a simple path is preserved.\n   * So this basically checks if both paths share any common nodes apart from\n   * path.lastNode and this.firstNode.\n   *\n   * Implemented recursivly\n   */\n  canBeAppendedTo(path) {\n    path.markPath(path);\n\n    let retValue = true;\n\n    if (this.node.inPath === path) {\n      retValue = false;\n    } else if (this.pathToNode !== null) {\n      retValue = this.pathToNode.canBeAppendedTo(path);\n    }\n\n    return retValue;\n  }\n\n  markPath(path) {\n    if (this.node.inPath === path) {\n      return;\n    }\n\n    this.node.inPath = path;\n\n    if (this.pathToNode !== null) {\n      this.pathToNode.markPath(path);\n    }\n  }\n\n  toArray(array: string[] = []) {\n    // do not include last element of path in array representation\n    array.push(this.node.id);\n\n    if (this.pathToNode != null) {\n      return this.pathToNode.toArray(array);\n    }\n\n    return array;\n  }\n\n  getLength() {\n    return 1 + (this.pathToNode !== null ? this.pathToNode.getLength() : 0);\n  }\n\n  // DEBUGGING ONLY\n  getFirst() {\n    if (this.pathToNode === null) {\n      return this;\n    }\n\n    return this.pathToNode.getFirst();\n  }\n\n  getAllPathsFromThis() {\n    if (this.pathNextNodes.length === 0) {\n      return this;\n    }\n    return this.pathNextNodes\n      .map((pnn) => {\n        return pnn.getAllPathsFromThis();\n      })\n      .flat();\n  }\n}\n","import PathClass from \"./PathClass\";\n\nexport default class PathSearchClass {\n  success = false;\n\n  path: any = null;\n\n  // eslint-disable-next-line no-useless-constructor\n  constructor(public startTerr, public fEndNode, public fAllNode?) {}\n\n  /*\n   * Find a path from start node to endNode with simple breadth-first search\n   *\n   * Note that fEndNode and fAllNode might not be the ones\n   * of the general overall search, but search specific. Especially fAllNode\n   * contains path specific restrictions.\n   *\n   * Returns true, if a path was found\n   */\n  findPath(forceInternalNode = false) {\n    // at least one internal node can be enforced in case of direct\n    // path searches from land to land that must include at least\n    // one fleet.\n\n    // start with initial path only containing StartTerr\n    const start = new PathClass(this.startTerr, null);\n    start.node.setVisited(this);\n\n    const testPaths = start.node\n      .getValidBorderTerritories()\n      .filter((nextNode) => {\n        // skip the end node as one starting node if an internal node should be enforced\n        return !forceInternalNode || !this.fEndNode(nextNode);\n      }, this)\n      .map((nextNode) => {\n        return start.addNode(nextNode);\n      });\n\n    while (testPaths.length > 0) {\n      const testPath = testPaths.shift();\n\n      // check if path is found\n      if (this.fEndNode(testPath.node)) {\n        this.success = true;\n        this.path = testPath;\n        return true;\n      }\n\n      // check if node was already visited or fails fAllNode conditions\n      if (\n        testPath.node.visited(this) ||\n        !this.fAllNode ||\n        !this.fAllNode(testPath.node)\n      ) {\n        // set the node visited\n        testPath.node.setVisited(this);\n\n        // create new branches of the path, that reach to neighbored valid territories\n        const NextNodes = testPath.node.getValidBorderTerritories();\n\n        // add new paths to testPaths\n        NextNodes.forEach((nextNode) => {\n          testPaths.push(testPath.addNode(nextNode));\n        });\n      }\n    }\n\n    // no path is found\n    return false;\n  }\n}\n","import PathSearchClass from \"./PathSearchClass\";\nimport TerritoryClass from \"./TerritoryClass\";\n\nexport default class NodeSetClass {\n  Nodes: Record<string, TerritoryClass> = {};\n\n  Path: any;\n\n  addNodes(Nodes: TerritoryClass[]) {\n    Nodes.map((n) => {\n      return this.addNode(n);\n    });\n  }\n\n  addNode(Node: TerritoryClass) {\n    this.Nodes[Node.id] = Node;\n  }\n\n  initNodes(search) {\n    Object.values(this.Nodes).map((n) => {\n      return n.nodeInit(search);\n    });\n  }\n\n  routeSetLoad(ConvoyGroup) {\n    [...ConvoyGroup.fleets].map((f) => {\n      return this.addNode(f.Territory);\n    });\n\n    [...ConvoyGroup.armies].map((a) => {\n      return this.addNode(a.Territory);\n    });\n\n    [...ConvoyGroup.coasts].map((c) => {\n      return this.addNode(c);\n    });\n  }\n\n  routeSetStart(StartTerr, fEndNode, fAllNode, fAnyNode) {\n    // initialize nodes and load valied border territories for this search\n    this.initNodes(new PathSearchClass(StartTerr, fEndNode, fAllNode));\n\n    const AnyNodes: TerritoryClass[] = Object.values(this.Nodes).filter(\n      fAnyNode,\n    );\n\n    if (AnyNodes.length === 1) {\n      let EndTerr = Object.values(this.Nodes).find(fEndNode);\n\n      // The EndTerr might not be part of the Convoy group.\n      // In this case no valid path can be found.\n      if (!EndTerr) return false;\n\n      // find path simple path to AnyNode (from now on middle node)\n      const fMiddleNode = function (node) {\n        return node.id === AnyNodes[0].id;\n      };\n\n      /*\n       * Calculate two paths from start to middle and end to middle (which is works fast).\n       *\n       * If those two paths are seperated ones, the problem is already\n       * solved and we can take a short cut.\n       *\n       * If not, take the shorter one to calculate alternatives\n       * (as shorter paths might have lesser alternatives from a\n       * statistical point of view).\n       *\n       */\n\n      // first path\n      let search = new PathSearchClass(StartTerr, fMiddleNode);\n\n      if (!search.findPath()) {\n        return false;\n      }\n\n      // second path\n      const search2 = new PathSearchClass(EndTerr, fMiddleNode);\n\n      if (!search2.findPath()) {\n        return false;\n      }\n\n      // are the two found paths seperated (apart from middleNode)\n      if (!search2.path.pathToNode.canBeAppendedTo(search.path)) {\n        // if paths are not already found\n\n        // check which path is shorter to search for alternatives\n        if (search.path.getLength() > search2.path.getLength()) {\n          search = search2;\n          EndTerr = StartTerr; // we now started our search at end terr, so start terr is the new end terr\n        }\n\n        // set this path fixed as complete path for further search\n        search.path.setComplete();\n\n        // find all alternative routes to end node\n        // (beginning at the node next to end node)\n        search.path.pathToNode.searchAlternativeRoutes(fMiddleNode);\n\n        // now see if there exists a second path from end node to middle node\n        const newSearch2 = new PathSearchClass(\n          EndTerr, // start search at end node\n          (node) => {\n            // end nodes are the middle node or a path node with a complete fork before (rank > 0)\n            // (which can be used as alternative route from start to middle)\n            return (\n              fMiddleNode(node) || (node.hasPath() && node.getMaxRank() > 0)\n            );\n          },\n          (node) => {\n            // ignore nodes with paths in general (those should only be end nodes if rank > 0)\n            return !node.hasPath();\n          },\n        );\n\n        if (!newSearch2.findPath()) return false;\n      }\n\n      /*\n       * there exists a path start - middle - end\n       * But it has to be completed first:\n       * - a fitting path start - middle has to be found\n       * - path2 might be completed from a node where it connected to one\n       * of the first paths\n       */\n      let path1; // the final chosen first part of the whole path\n      let path2; // the final chosen second part of the whole path\n\n      // first check if second search reaches middleNode (or just a part of an alternative route)\n      if (fMiddleNode(search2.path.node)) {\n        // it does directly reach endNode\n        // the initial path can be chosen as path1\n        path1 = search.path;\n        path2 = search2.path;\n      } else {\n        // not EndNode -> path2 connects to one path from first paths\n        // -> find alternative first path and then reconnect path2\n        path1 = search2.path.node.path.getAlternativeRoute();\n\n        path2 = search2.path.attachToNodePath().getLastPathNode();\n      }\n\n      // now there exist to disjoint paths, one from start and one from end to middle\n      // -> build the final path\n      // toArray generates an element starting with the last element\n      // -> path1 has to be reversed\n      // middleNode should not be included twice\n      // -> chose path2.pathToNode instead\n      this.Path = path1.toArray().reverse().concat(path2.pathToNode.toArray());\n\n      // the path might still be reversed at this point if a search\n      // backwards was considered more efficient\n\n      if (this.Path[0] !== StartTerr.id) {\n        this.Path.reverse();\n      }\n\n      // do not include endNode in the final -> remove last element\n      this.Path.pop();\n\n      return true;\n    }\n\n    if (AnyNodes.length === Object.keys(this.Nodes).length) {\n      const search = new PathSearchClass(StartTerr, fEndNode);\n      if (!search.findPath(true)) {\n        return false;\n      }\n\n      this.Path = search.path.toArray().reverse();\n      this.Path.pop();\n\n      return true;\n    }\n\n    return false;\n  }\n}\n","export const CoastType = Object.freeze({\n  Child: \"Child\",\n  No: \"No\",\n  Parent: \"Parent\",\n});\n\nexport const GamePhaseType = Object.freeze({\n  Build: \"Build\",\n  Diplomacy: \"Diplomacy\",\n  Retreat: \"Retreat\",\n});\n\nexport const UnitType = Object.freeze({\n  Army: \"Army\",\n  Fleet: \"Fleet\",\n});\n\nexport const TerritoryType = Object.freeze({\n  Coast: \"Coast\",\n  Land: \"Land\",\n  Sea: \"Sea\",\n});\n\nexport const OrderStatusType = Object.freeze({\n  Hold: \"Hold\",\n  Move: \"Move\",\n  SupportHold: \"Support hold\",\n  SupportMove: \"Support move\",\n  Convoy: \"Convoy\",\n  Retreat: \"Retreat\",\n  Disband: \"Disband\",\n  BuildArmy: \"Build army\",\n  BuildFleet: \"Build fleet\",\n  Wait: \"Wait\",\n  Destroy: \"Destroy\",\n});\n","import BoardClass from \"./BoardClass\";\nimport TerritoryClass from \"./TerritoryClass\";\nimport UnitClass from \"./UnitClass\";\n\nimport NodeSetClass from \"./NodeSetClass\";\n\nimport { UnitType, TerritoryType } from \"./enums\";\n\nexport default class ConvoyGroupClass {\n  armies: Set<UnitClass> = new Set();\n\n  coasts: Set<TerritoryClass> = new Set();\n\n  fleets: Set<UnitClass> = new Set();\n\n  // eslint-disable-next-line no-useless-constructor\n  constructor(public board: BoardClass) {}\n\n  setArmies(armies: Set<UnitClass>) {\n    this.armies = armies;\n  }\n\n  setCoasts(coasts: Set<TerritoryClass>) {\n    this.coasts = coasts;\n  }\n\n  setFleets(fleets: Set<UnitClass>) {\n    this.fleets = fleets;\n  }\n\n  /**\n   *\n   * @param fleet\n   * @returns\n   */\n  loadFleet(fleet: UnitClass) {\n    if (fleet.convoyLink || fleet.Territory.type !== TerritoryType.Sea) {\n      return;\n    }\n\n    fleet.setConvoyLink();\n    fleet.setConvoyGroup(this);\n\n    this.fleets.add(fleet);\n\n    this.board.getBorderTerritories(fleet.Territory).forEach((bt) => {\n      if (bt.type === TerritoryType.Sea && bt.Unit) {\n        this.loadFleet(bt.Unit);\n      }\n    });\n  }\n\n  loadCoasts() {\n    this.fleets.forEach((f) => {\n      this.board.getBorderTerritories(f.Territory).forEach((bt) => {\n        if (bt.type !== TerritoryType.Coast || this.coasts.has(bt)) {\n          return;\n        }\n\n        bt.setConvoyGroups(this);\n\n        this.coasts.add(bt);\n\n        if (bt.Unit && bt.Unit.type === UnitType.Army) {\n          this.armies.add(bt.Unit);\n        }\n      });\n    });\n  }\n\n  linkGroups() {\n    this.coasts.forEach((c) => {\n      if (c.convoyLink) {\n        return;\n      }\n\n      if (c.ConvoyGroups.length === 1) {\n        c.setConvoyGroup(c.ConvoyGroups[0]);\n      } else {\n        const newConvoyGroup = new ConvoyGroupClass(this.board);\n        c.setConvoyGroup(newConvoyGroup);\n\n        c.ConvoyGroups.forEach((cg) => {\n          c.ConvoyGroup.setArmies(\n            new Set([\n              ...Array.from(c.ConvoyGroup.armies),\n              ...Array.from(cg.armies),\n            ]),\n          );\n          c.ConvoyGroup.setCoasts(\n            new Set([\n              ...Array.from(c.ConvoyGroup.coasts),\n              ...Array.from(cg.coasts),\n            ]),\n          );\n          c.ConvoyGroup.setFleets(\n            new Set([\n              ...Array.from(c.ConvoyGroup.fleets),\n              ...Array.from(cg.fleets),\n            ]),\n          );\n        });\n      }\n\n      c.setConvoyLink();\n\n      if (c.Unit && c.Unit.type === UnitType.Army) {\n        c.Unit.setConvoyLink();\n        c.Unit.setConvoyGroup(c.ConvoyGroup);\n      }\n    });\n  }\n\n  nodeSetClass() {\n    const ns = new NodeSetClass();\n    ns.routeSetLoad(this);\n    return ns;\n  }\n\n  pathArmyToCoast(StartTerr, EndTerr) {\n    const ns = this.nodeSetClass();\n    ns.routeSetStart(\n      StartTerr,\n      (EndNode) => {\n        return EndNode?.id === EndTerr.id;\n      },\n      (AllNode) => {\n        return AllNode.type === TerritoryType.Sea;\n      },\n      () => {\n        return true;\n      },\n    );\n    return ns.Path;\n  }\n\n  pathArmyToCoastWithoutFleet(StartTerr, EndTerr, WithoutFleetTerr) {\n    const ns = this.nodeSetClass();\n    ns.routeSetStart(\n      StartTerr,\n      (EndNode) => {\n        return EndNode?.id === EndTerr.id;\n      },\n      (AllNode) => {\n        return (\n          AllNode.type === TerritoryType.Sea &&\n          AllNode.id !== WithoutFleetTerr.id\n        );\n      },\n      () => {\n        return true;\n      },\n    );\n    return ns.Path;\n  }\n\n  pathArmyToCoastWithFleet(StartTerr, EndTerr, WithFleetTerr) {\n    const ns = this.nodeSetClass();\n    ns.routeSetStart(\n      StartTerr,\n      (EndNode) => {\n        return EndNode?.id === EndTerr.id;\n      },\n      (AllNode) => {\n        return AllNode.type === TerritoryType.Sea;\n      },\n      (AnyNode) => {\n        return AnyNode.id === WithFleetTerr.id;\n      },\n    );\n    return ns.Path;\n  }\n}\n","import BoardClass from \"./BoardClass\";\nimport ConvoyGroupClass from \"./ConvoyGroupClass\";\nimport UnitClass from \"./UnitClass\";\n\nimport PathSearchClass from \"./PathSearchClass\";\nimport PathClass from \"./PathClass\";\n\nimport { CoastType, TerritoryType } from \"./enums\";\nimport { ITerritory, IBorder, ICoastalBorder, ITerrStatus } from \"./Interfaces\";\n\nexport default class TerritoryClass {\n  id!: string;\n\n  countryID!: string;\n\n  coast!: keyof typeof CoastType;\n\n  coastParent!: TerritoryClass;\n\n  coastParentID!: string;\n\n  convoyLink!: boolean;\n\n  name!: string;\n\n  occupiedFromTerrID!: string;\n\n  ownerCountryID!: string;\n\n  supply!: boolean;\n\n  standoff!: boolean;\n\n  type!: keyof typeof TerritoryType;\n\n  unitID?: string;\n\n  Borders!: IBorder[];\n\n  CoastalBorders!: ICoastalBorder[];\n\n  ConvoyGroup!: ConvoyGroupClass;\n\n  ConvoyGroups!: ConvoyGroupClass[];\n\n  Unit!: UnitClass;\n\n  convoyNode = true;\n\n  board: BoardClass;\n\n  // contains the last search that went\n  // through this node -> needed for breadth first search\n  lastVisitedBy: PathSearchClass | null = null;\n\n  // contains the last search that went through this node and was not success.\n  // In case a new search passes this node with a same or higher rank, no\n  // additional search has to be done  (as there won't be a success in this\n  // case as well)\n  // (will only be updated, when lastVisitedBy is updated or state is called\n  // by internal functions!)\n  lastSearchNotSuccess: PathSearchClass | null = null;\n\n  // the current path that uses this node\n  path: PathClass | null = null;\n\n  // a cache for the border territories that are important for the path search\n  validBorderTerritoriesCache: TerritoryClass[] | any[] = [];\n\n  // data of the current search (the overall one; for validBorderTerritories)\n  search: any;\n\n  // A mark only used for checking, if two paths are seperated or not\n  inPath = null;\n\n  constructor(\n    terrData: ITerritory,\n    board: BoardClass,\n    terrStatusData?: ITerrStatus,\n  ) {\n    Object.assign(this, {\n      ...terrData,\n      supply: terrData.supply === \"Yes\",\n      ConvoyGroups: [],\n      convoyLink: false,\n    });\n\n    if (terrStatusData) {\n      Object.assign(this, terrStatusData);\n    }\n\n    this.board = board;\n  }\n\n  setUnit(unit: UnitClass) {\n    this.Unit = unit;\n  }\n\n  setCoastParent(coastParent: TerritoryClass) {\n    const { Borders, supply } = coastParent;\n\n    this.coastParent = coastParent;\n    this.Borders = Borders;\n    this.supply = supply;\n  }\n\n  setConvoyLink() {\n    this.convoyLink = true;\n  }\n\n  setConvoyGroups(convoyGroup: ConvoyGroupClass) {\n    this.ConvoyGroups.push(convoyGroup);\n  }\n\n  setConvoyGroup(convoyGroup: ConvoyGroupClass) {\n    this.ConvoyGroup = convoyGroup;\n  }\n\n  nodeInit(search) {\n    this.convoyNode = true;\n\n    // contains the last search that went\n    // through this node -> needed for breadth first search\n    this.lastVisitedBy = null;\n\n    // contains the last search that went through this node and was not success.\n    // In case a new search passes this node with a same or higher rank, no\n    // additional search has to be done  (as there won't be a success in this\n    // case as well)\n    // (will only be updated, when lastVisitedBy is updated or state is called\n    // by internal functions!)\n    this.lastSearchNotSuccess = null;\n\n    // the current path that uses this node\n    this.path = null;\n\n    // a cache for the border territories that are important for the path search\n    this.validBorderTerritoriesCache = [];\n\n    // data of the current search (the overall one; for validBorderTerritories)\n    this.search = search;\n\n    // A mark only used for checking, if two paths are seperated or not\n    this.inPath = null;\n  }\n\n  visited(node) {\n    return this.lastVisitedBy === node;\n  }\n\n  setVisited(search) {\n    // update lastSuccessfulSearch so no information gets lost\n    // if (!this.lastVisitedBy === null && !this.lastVisitedBy.success) {\n    //   this.lastSearchNotSuccess = this.lastVisitedBy;\n    // }\n\n    if (this.lastVisitedBy && !this.lastVisitedBy.success) {\n      this.lastSearchNotSuccess = this.lastVisitedBy;\n    }\n\n    this.lastVisitedBy = search;\n  }\n\n  /*\n   * Returns a number (rank) to decide if this node might lead to a\n   * successfull search.\n   *\n   * In case this node is part of a complete path, the rank (number of\n   * alternative routes) of the path at this node is returned. Only if\n   * the rank is lower than that of the current search's starting territory\n   * this node can be part of the new path.\n   *\n   * In case this node is not part of a complete path, the rank of the\n   * last unsuccessful search (i.e. the rank of the starting node) is\n   * reaturned. Only if the rank of the current search is lower, it might\n   * lead to a successful search.\n   */\n  getMaxRank() {\n    if (this.hasPath() && this.path) {\n      return this.path.getRank();\n    }\n\n    return this.lastSearchNotSuccess !== null\n      ? this.lastSearchNotSuccess.path.getNextNodeRank()\n      : Infinity;\n  }\n\n  hasPath() {\n    return !(this.path === null);\n  }\n\n  isConvoyNode() {\n    return !!this.convoyNode && this.convoyNode;\n  }\n\n  // add function to cache valid border territories with specific search params for efficiency\n  getValidBorderTerritories() {\n    if (!this.validBorderTerritoriesCache.length)\n      this.validBorderTerritoriesCache = this.Borders.filter((b) => {\n        return b.f;\n      })\n        .map((b) => {\n          return this.board.findTerritoryByID(b.id);\n        })\n        .filter((n) => {\n          if (!this.search) {\n            return false;\n          }\n          if (n) {\n            return (\n              n.isConvoyNode() &&\n              n.id !== this.search.startTerr.id &&\n              (this.search.fAllNode(n) || this.search.fEndNode(n))\n            );\n          }\n\n          return false;\n        });\n\n    return this.validBorderTerritoriesCache;\n  }\n}\n","import ConvoyGroupClass from \"./ConvoyGroupClass\";\nimport TerritoryClass from \"./TerritoryClass\";\n\nimport { UnitType } from \"./enums\";\nimport { IUnit } from \"./Interfaces\";\n\nexport default class UnitClass {\n  id!: string;\n\n  countryID!: string;\n\n  convoyLink!: boolean;\n\n  type!: keyof typeof UnitType;\n\n  terrID!: string;\n\n  Territory!: TerritoryClass;\n\n  ConvoyGroup!: ConvoyGroupClass;\n\n  constructor(data: IUnit) {\n    Object.assign(this, { ...data, convoyLink: false });\n  }\n\n  setTerritory(territory: TerritoryClass) {\n    this.Territory = territory;\n  }\n\n  setConvoyGroup(convoyGroup: ConvoyGroupClass) {\n    this.ConvoyGroup = convoyGroup;\n  }\n\n  setConvoyLink() {\n    this.convoyLink = true;\n  }\n\n  /**\n   *\n   * @param b border object\n   * @returns {boolean}\n   */\n  canCrossBorder(b): boolean {\n    if (\n      (this.type === UnitType.Army && !b.a) ||\n      (this.type === UnitType.Fleet && !b.f)\n    ) {\n      return false;\n    }\n\n    return true;\n  }\n}\n","import ConvoyGroupClass from \"./ConvoyGroupClass\";\nimport TerritoryClass from \"./TerritoryClass\";\nimport UnitClass from \"./UnitClass\";\n\nimport { IUnit, ITerritory, IContext, ITerrStatus } from \"./Interfaces\";\nimport { CoastType, GamePhaseType, UnitType, TerritoryType } from \"./enums\";\n\nexport default class BoardClass {\n  convoyGroups: ConvoyGroupClass[] = [];\n\n  supplyCenters: TerritoryClass[] = [];\n\n  territories: TerritoryClass[] = [];\n\n  units: UnitClass[] = [];\n\n  constructor(\n    public context: IContext,\n    territories: ITerritory[],\n    terrStatus: ITerrStatus[],\n    units: IUnit[],\n  ) {\n    const coastParents: TerritoryClass[] = [];\n    const coastChildren: TerritoryClass[] = [];\n\n    this.territories = territories.map((territory) => {\n      const curTerrStatus = terrStatus.find((ts) => ts.id === territory.id);\n\n      let currTerritory = new TerritoryClass(territory, this);\n\n      if (curTerrStatus) {\n        currTerritory = new TerritoryClass(territory, this, curTerrStatus);\n\n        let currUnit;\n        if (curTerrStatus.unitID) {\n          const unitData = units.find((u) => u.id === curTerrStatus.unitID);\n\n          currUnit = unitData ? new UnitClass(unitData) : null;\n        }\n\n        if (currUnit) {\n          currTerritory.setUnit(currUnit);\n\n          currUnit.setTerritory(currTerritory);\n\n          this.units.push(currUnit);\n        }\n      }\n\n      if (currTerritory.coast === CoastType.Parent) {\n        coastParents.push(currTerritory);\n      }\n\n      if (currTerritory.coast === CoastType.Child) {\n        coastChildren.push(currTerritory);\n      }\n\n      if (currTerritory.coastParentID === currTerritory.id) {\n        currTerritory.coastParent = currTerritory;\n      }\n\n      return currTerritory;\n    });\n\n    coastChildren.forEach((cc) => {\n      const parent = coastParents.find((cp) => cp.id === cc.coastParentID);\n      if (parent) {\n        cc.setCoastParent(parent);\n      }\n    });\n\n    /**\n     * load and initialize convoyGroup.\n     * convoyGroup has\n     * fleets that are adjacent\n     * coasts that are adjacent above fleets\n     * armies that are placed in above coasts\n     */\n    if (context.phase === GamePhaseType.Diplomacy) {\n      this.units.forEach((u) => {\n        if (\n          u.type === UnitType.Fleet &&\n          u.Territory.type === TerritoryType.Sea\n        ) {\n          const newConvoyGroup = new ConvoyGroupClass(this);\n\n          /**\n           * first load fleets, and coasts with armies within them.\n           */\n          newConvoyGroup.loadFleet(u);\n          newConvoyGroup.loadCoasts();\n          this.convoyGroups.push(newConvoyGroup);\n        }\n      });\n\n      this.convoyGroups.forEach((cg) => cg.linkGroups());\n      this.convoyGroups.forEach((cg) => cg.linkGroups());\n    }\n\n    if (context.phase === GamePhaseType.Build) {\n      this.territories.forEach((t) => {\n        if (\n          t.coastParent.supply &&\n          t.coastParent.countryID === context.countryID &&\n          t.coastParent.ownerCountryID === context.countryID &&\n          !t.coastParent.Unit\n        ) {\n          this.supplyCenters.push(t);\n        }\n      });\n    }\n  }\n\n  /**\n   *\n   * @param unitID\n   * @returns {UnitClass}\n   */\n  findUnitByID(unitID: string): UnitClass | undefined {\n    return this.units.find((unit) => unit.id === unitID);\n  }\n\n  /**\n   *\n   * @param territoryID\n   * @returns {TerritoryClass}\n   */\n  findTerritoryByID(territoryID: string): TerritoryClass | undefined {\n    return this.territories.find((t) => t.id === territoryID);\n  }\n\n  /**\n   * finds adjacent territories\n   * @param territory\n   * @returns {TerritoryClass[]}\n   */\n  getBorderTerritories(territory: TerritoryClass): TerritoryClass[] | [] {\n    const borderIDs = territory.Borders.map((b) => b.id);\n\n    return this.territories.filter((t) => borderIDs.includes(`${t.id}`));\n  }\n\n  /**\n   * find units on border territories\n   * @param territory\n   * @returns {UnitClass[]}\n   */\n  getBorderUnits(territory: TerritoryClass): UnitClass[] {\n    return this.getBorderTerritories(territory.coastParent).map(\n      (bt: TerritoryClass) => bt.Unit,\n    );\n  }\n\n  /**\n   * Get all territories given unit can move to. Not including convoy move\n   * @param unit\n   * @returns {TerritoryClass}\n   */\n  getMovableTerritories(unit: UnitClass): TerritoryClass[] {\n    return unit.Territory.CoastalBorders.reduce(\n      (acc: TerritoryClass[], cur) => {\n        if (unit.canCrossBorder(cur)) {\n          const borderTerritory = this.territories.find(\n            (territory) => territory.id === cur.id,\n          );\n\n          if (borderTerritory) acc.push(borderTerritory);\n        }\n\n        return acc;\n      },\n      [],\n    );\n  }\n\n  /**\n   * Get all territories given unit(Army) can move to. Including convoyable territories.\n   * @param unit\n   * @returns {TerritoryClass[]}\n   */\n  getReachableTerritories(unit: UnitClass): TerritoryClass[] {\n    if (!unit.convoyLink && unit.type !== UnitType.Army) {\n      return [];\n    }\n\n    const movableTerritories = this.getMovableTerritories(unit);\n\n    const convoyableTerritories = Array.from(unit.ConvoyGroup.coasts).reduce(\n      (acc: TerritoryClass[], cur) => {\n        if (BoardClass.canConvoyTo(cur, unit)) {\n          acc.push(cur);\n        }\n        return acc;\n      },\n      [],\n    );\n    return Array.from(\n      new Set(movableTerritories.concat(convoyableTerritories)),\n    );\n  }\n\n  /**\n   * Get all units on movable territories. (can support move to)\n   * @param unit\n   * @returns {UnitClass[]}\n   */\n  getMovableUnits(unit: UnitClass): UnitClass[] {\n    return this.getMovableTerritories(unit).reduce((acc: UnitClass[], cur) => {\n      if (cur.coastParent.Unit) {\n        acc.push(cur.coastParent.Unit);\n      }\n      return acc;\n    }, []);\n  }\n\n  /**\n   * Can given unit move to the target territory. Not including convoy move\n   * @param unit\n   * @param targetTerritory\n   * @returns {boolean}\n   */\n  canMoveInto(unit: UnitClass, targetTerritory: TerritoryClass): boolean {\n    if (\n      this.getMovableTerritories(unit)\n        .map((movableTerritories) => {\n          return movableTerritories.coastParent.id;\n        })\n        .includes(targetTerritory.coastParent.id)\n    ) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Can given unit move to the target territory. Including convoy move\n   * @param targetTerritory\n   * @param unit\n   * @returns {boolean}\n   */\n  static canConvoyTo(\n    targetTerritory: TerritoryClass,\n    unit: UnitClass,\n  ): boolean {\n    if (unit.type === UnitType.Army) {\n      if (targetTerritory.id === unit.Territory.id) {\n        return false;\n      }\n\n      /**\n       * Unit is in a convoy group. Unit can move to target territory via convoy move.\n       */\n      if (\n        unit.convoyLink &&\n        targetTerritory.convoyLink &&\n        unit.ConvoyGroup.coasts.has(targetTerritory)\n      )\n        return true;\n    }\n\n    return false;\n  }\n}\n","import BoardClass from \"./BoardClass\";\nimport TerritoryClass from \"./TerritoryClass\";\nimport UnitClass from \"./UnitClass\";\n\nimport { IOrderData } from \"./Interfaces\";\nimport { UnitType } from \"./enums\";\n\nexport default class OrderClass {\n  // eslint-disable-next-line no-useless-constructor\n  constructor(\n    public board: BoardClass,\n    public orderData: IOrderData,\n    public unit: UnitClass,\n  ) {}\n\n  /**\n   *\n   * @returns movable territories including convoyable coasts\n   */\n  getMoveChoices(): TerritoryClass[] {\n    const choices = this.board\n      .getMovableTerritories(this.unit)\n      .map((movableTerritories) => movableTerritories);\n\n    if (this.unit.convoyLink && this.unit.type === UnitType.Army) {\n      const convoyableTerritories = Array.from(\n        this.unit.ConvoyGroup.coasts,\n      ).reduce((acc: TerritoryClass[], cur) => {\n        if (BoardClass.canConvoyTo(cur, this.unit)) {\n          acc.push(cur);\n        }\n\n        return acc;\n      }, []);\n\n      return Array.from(new Set(choices.concat(convoyableTerritories)));\n    }\n\n    return choices;\n  }\n\n  /**\n   *\n   * @returns array of adjacent units\n   */\n  getSupportHoldChoices(): TerritoryClass[] {\n    const movableUnits = this.board.getMovableUnits(this.unit);\n\n    const supportHoldChoices = movableUnits.reduce(\n      (acc: TerritoryClass[], cur) => {\n        if (cur.Territory.coastParent) {\n          acc.push(cur.Territory.coastParent);\n        }\n\n        return acc;\n      },\n      [],\n    );\n\n    return Array.from(new Set(supportHoldChoices));\n  }\n\n  /**\n   *\n   * @returns array of adjacent territories\n   */\n  getSupportMoveToChoices(): TerritoryClass[] {\n    const movableTerritories = this.board.getMovableTerritories(this.unit);\n\n    return movableTerritories.map((mt) => mt.coastParent);\n  }\n\n  /**\n   *\n   * @param againstTerritory from supportMoveToChoices\n   * @returns array of territories that have unit which can move into the given territory\n   */\n  getSupportMoveFromChoices(\n    againstTerritory: TerritoryClass,\n  ): TerritoryClass[] {\n    let possibleUnits = this.board\n      .getBorderUnits(againstTerritory.coastParent)\n      .filter((bu) => {\n        return bu && this.board.canMoveInto(bu, againstTerritory);\n      });\n\n    if (againstTerritory.convoyLink) {\n      /*\n       * Resource intensive extra check, unnecessary 99% of the time. Leaving this disabled\n       * means when an invalid support move is selected as a fleet the choice is undone once\n       * it is selected and put through the check below.\n       *\n       * Disabling this check as it is very intensive in getOrdersMeta. An alternative solution would be to only\n       * process this when the user double clicks on a unit, but disabling for now.\n       */\n      const ConvoyArmies = Array.from(againstTerritory.ConvoyGroup.armies);\n      // if (\n      //   this.unit.convoyLink &&\n      //   this.unit.type === UnitType.Fleet &&\n      //   Array.from(this.unit.ConvoyGroup.coasts)\n      //     .map((coast) => coast.id)\n      //     .includes(againstTerritory.id)\n      // ) {\n      //   console.log(\"1\");\n      //   ConvoyArmies = Array.from(againstTerritory.ConvoyGroup.armies).filter(\n      //     (convoyArmy) => {\n      //       return !!againstTerritory.ConvoyGroup.pathArmyToCoastWithoutFleet(\n      //         convoyArmy.Territory,\n      //         againstTerritory,\n      //         this.unit.Territory,\n      //       );\n      //     },\n      //   );\n      // } else {\n      //   console.log(\"2\");\n      //   ConvoyArmies = againstTerritory.ConvoyGroup.armies;\n      // }\n      possibleUnits = [...possibleUnits, ...ConvoyArmies];\n    }\n\n    return Array.from(\n      new Set(\n        possibleUnits.map((possibleUnit) => possibleUnit.Territory.coastParent),\n      ),\n    ).filter((possibleUnitTerritory) => {\n      return (\n        possibleUnitTerritory.id !== this.unit.Territory.coastParentID &&\n        possibleUnitTerritory.id !== againstTerritory.id\n      );\n    });\n  }\n\n  /**\n   *\n   * @returns array of coasts' id which a fleet can convoy an army to\n   */\n  getConvoyToChoices(): string[] {\n    if (this.unit.convoyLink) {\n      return Array.from(this.unit.ConvoyGroup.coasts).map((coast) => coast.id);\n    }\n\n    return [];\n  }\n\n  /**\n   *\n   * @param toTerritory convoy destination\n   * @returns array of coasts that have army which a fleet can convoy from\n   */\n  getConvoyFromChoices(toTerritory: TerritoryClass): UnitClass[] {\n    if (this.unit.convoyLink) {\n      return Array.from(this.unit.ConvoyGroup.armies).filter((convoyArmy) => {\n        if (toTerritory.id === convoyArmy.Territory.id) {\n          return false;\n        }\n\n        return !!toTerritory.ConvoyGroup.pathArmyToCoastWithFleet(\n          convoyArmy.Territory,\n          toTerritory,\n          this.unit.Territory,\n        );\n      });\n    }\n\n    return [];\n  }\n}\n","import { current } from \"@reduxjs/toolkit\";\nimport Territory from \"../../../../../enums/map/variants/classic/Territory\";\nimport BoardClass from \"../../../../../models/BoardClass\";\nimport { GameCommand } from \"../../../../../state/interfaces/GameCommands\";\nimport GameDataResponse from \"../../../../../state/interfaces/GameDataResponse\";\nimport GameOverviewResponse from \"../../../../../state/interfaces/GameOverviewResponse\";\nimport UnitType from \"../../../../../types/UnitType\";\nimport getTerritoriesMeta from \"../../../../getTerritoriesMeta\";\nimport getOrdersMeta from \"../../../../map/getOrdersMeta\";\nimport getUnits from \"../../../../map/getUnits\";\nimport highlightMapTerritoriesBasedOnStatuses from \"../../../../map/highlightMapTerritoriesBasedOnStatuses\";\nimport generateMaps from \"../../../generateMaps\";\nimport setCommand from \"../../../setCommand\";\nimport updateOrdersMeta from \"../../../updateOrdersMeta\";\n\n/* eslint-disable no-param-reassign */\nexport default function fetchGameDataFulfilled(state, action): void {\n  state.apiStatus = \"succeeded\";\n  state.data = action.payload;\n  const {\n    data: { data },\n    overview: { members, phase, user },\n  }: {\n    data: { data: GameDataResponse[\"data\"] };\n    overview: {\n      members: GameOverviewResponse[\"members\"];\n      phase: GameOverviewResponse[\"phase\"];\n      user: GameOverviewResponse[\"user\"];\n    };\n  } = current(state);\n  let board;\n  if (data.contextVars) {\n    board = new BoardClass(\n      data.contextVars.context,\n      Object.values(data.territories),\n      data.territoryStatuses,\n      Object.values(data.units),\n    );\n    state.board = board;\n  }\n  state.maps = generateMaps(data);\n  state.ownUnits = [];\n  Object.values(data.units).forEach((unit) => {\n    if (unit.countryID === user.member.countryID.toString()) {\n      state.ownUnits.push(unit.id);\n    }\n  });\n  const unitsToDraw = getUnits(data, members);\n  unitsToDraw.forEach(({ country, mappedTerritory, unit }) => {\n    const command: GameCommand = {\n      command: \"SET_UNIT\",\n      data: {\n        setUnit: {\n          componentType: \"Game\",\n          country,\n          mappedTerritory,\n          unit,\n          unitType: unit.type as UnitType,\n          unitSlotName: mappedTerritory.unitSlotName,\n        },\n      },\n    };\n    setCommand(\n      state,\n      command,\n      \"territoryCommands\",\n      mappedTerritory.parent\n        ? Territory[mappedTerritory.parent]\n        : Territory[mappedTerritory.territory],\n    );\n  });\n\n  state.territoriesMeta = getTerritoriesMeta(data);\n  highlightMapTerritoriesBasedOnStatuses(state);\n  updateOrdersMeta(state, getOrdersMeta(data, board, phase));\n}\n","import TerritoryMap from \"../../data/map/variants/classic/TerritoryMap\";\nimport GameDataResponse from \"../../state/interfaces/GameDataResponse\";\nimport GameStateMaps from \"../../state/interfaces/GameStateMaps\";\n\nexport default function generateMaps(\n  data: GameDataResponse[\"data\"],\n): GameStateMaps {\n  const { currentOrders, territories, units } = data;\n  const territoryToUnit: GameStateMaps[\"territoryToUnit\"] = {};\n  const unitToOrder: GameStateMaps[\"unitToOrder\"] = {};\n  const unitToTerritory: GameStateMaps[\"unitToTerritory\"] = {};\n  const enumToTerritory: GameStateMaps[\"enumToTerritory\"] = {};\n  const territoryToEnum: GameStateMaps[\"territoryToEnum\"] = {};\n\n  Object.values(units).forEach(({ id, terrID }) => {\n    territoryToUnit[terrID] = id;\n    unitToTerritory[id] = terrID;\n  });\n\n  Object.values(territories).forEach(({ id, name }) => {\n    enumToTerritory[TerritoryMap[name].territory] = id;\n    territoryToEnum[id] = TerritoryMap[name].territory.toString();\n  });\n\n  currentOrders?.forEach(({ id, unitID }) => {\n    unitToOrder[unitID] = id;\n  });\n\n  return {\n    territoryToUnit,\n    unitToOrder,\n    unitToTerritory,\n    enumToTerritory,\n    territoryToEnum,\n  };\n}\n","import GameDataResponse from \"../../state/interfaces/GameDataResponse\";\nimport GameOverviewResponse from \"../../state/interfaces/GameOverviewResponse\";\nimport TerritoryMap, {\n  MTerritory,\n} from \"../../data/map/variants/classic/TerritoryMap\";\nimport countryMap from \"../../data/map/variants/classic/CountryMap\";\nimport Country from \"../../enums/Country\";\nimport { IUnit } from \"../../models/Interfaces\";\n\ninterface Unit {\n  country: Country;\n  mappedTerritory: MTerritory;\n  unit: IUnit;\n}\n\nexport default function getUnits(\n  data: GameDataResponse[\"data\"],\n  members: GameOverviewResponse[\"members\"],\n): Unit[] {\n  const unitsToDraw: Unit[] = [];\n  const { contextVars, territories, territoryStatuses, units } = data;\n  Object.values(units).forEach((unit) => {\n    let territory = territories[unit.terrID];\n    const territoryStatus = territoryStatuses.find((t) => unit.terrID === t.id);\n    const territoryHasMultipleUnits = Object.values(units).filter(\n      (u) => u.terrID === unit.terrID,\n    );\n\n    if (\n      territoryStatus?.occupiedFromTerrID &&\n      unit.id === territoryStatus.unitID &&\n      territoryStatus?.ownerCountryID === unit.countryID &&\n      territoryHasMultipleUnits.length > 1 &&\n      contextVars?.context.phase === \"Retreats\"\n    ) {\n      territory = territories[territoryStatus.occupiedFromTerrID];\n    }\n\n    if (territory) {\n      const mappedTerritory = TerritoryMap[territory.name];\n      if (mappedTerritory) {\n        const memberCountry = members.find(\n          (member) => member.countryID.toString() === unit.countryID,\n        );\n        if (memberCountry) {\n          const { country } = memberCountry;\n          unitsToDraw.push({\n            country: countryMap[country],\n            mappedTerritory,\n            unit,\n          });\n        }\n      }\n    }\n  });\n  return unitsToDraw;\n}\n","import TerritoryMap from \"../data/map/variants/classic/TerritoryMap\";\nimport { ITerrStatus } from \"../models/Interfaces\";\nimport { APITerritories } from \"../state/interfaces/GameDataResponse\";\nimport TerritoriesMeta from \"../state/interfaces/TerritoriesState\";\n\nexport default function getTerritoriesMeta(data): TerritoriesMeta {\n  const {\n    territories,\n    territoryStatuses,\n  }: { territories: APITerritories; territoryStatuses: ITerrStatus[] } = data;\n\n  const territoriesMeta: TerritoriesMeta = {};\n\n  Object.entries(territories).forEach(\n    ([\n      id,\n      { coast, coastParentID, countryID: homeCountryID, name, supply, type },\n    ]) => {\n      const mappedTerritory = TerritoryMap[name];\n      const territoryStatus = territoryStatuses.find(\n        ({ id: territoryID }) => id === territoryID,\n      );\n\n      const countryID: string | null =\n        homeCountryID === \"0\" ? null : homeCountryID;\n      let ownerCountryID: string | null = null;\n      if (territoryStatus) {\n        ownerCountryID =\n          territoryStatus.ownerCountryID === \"0\"\n            ? null\n            : territoryStatus.ownerCountryID;\n      }\n\n      const { territory } = mappedTerritory;\n      if (!territoriesMeta[territory]) {\n        territoriesMeta[territory] = {\n          coast,\n          coastParentID,\n          countryID,\n          id,\n          name,\n          ownerCountryID,\n          standoff: territoryStatus ? territoryStatus.standoff : false,\n          supply: supply === \"Yes\",\n          territory,\n          type,\n          unitID: territoryStatus ? territoryStatus.unitID : null,\n        };\n      }\n    },\n  );\n\n  return territoriesMeta;\n}\n","import OrderClass from \"../../models/OrderClass\";\nimport TerritoryClass from \"../../models/TerritoryClass\";\nimport UnitClass from \"../../models/UnitClass\";\nimport GameDataResponse from \"../../state/interfaces/GameDataResponse\";\nimport { GameState } from \"../../state/interfaces/GameState\";\nimport {\n  EditOrderMeta,\n  SupportMoveChoice,\n} from \"../../state/interfaces/SavedOrders\";\n\ninterface Props {\n  [key: string]: EditOrderMeta;\n}\n\nexport default function getOrdersMeta(\n  data: GameDataResponse[\"data\"],\n  board: GameState[\"board\"],\n  phase: GameState[\"overview\"][\"phase\"],\n): Props {\n  const { contextVars, currentOrders, territories, units } = data;\n\n  const updateOrdersMeta = {};\n  if (contextVars?.context) {\n    if (phase === \"Builds\") {\n      currentOrders?.forEach(({ id, toTerrID, type }) => {\n        updateOrdersMeta[id] = {\n          saved: true,\n          update: {\n            type: toTerrID ? type : \"Wait\",\n            toTerrID,\n          },\n        };\n      });\n    } else {\n      const newOrders: OrderClass[] = [];\n\n      if (!board) {\n        return updateOrdersMeta;\n      }\n\n      currentOrders?.forEach((o) => {\n        const { id, unitID, type, toTerrID, fromTerrID, viaConvoy } = o;\n        let orderUnit = board.findUnitByID(unitID);\n        if (!orderUnit && phase === \"Retreats\") {\n          orderUnit = new UnitClass(units[unitID]);\n          if (!orderUnit?.Territory) {\n            const unitTerr = board.findTerritoryByID(units[unitID].terrID);\n            if (unitTerr) {\n              orderUnit.setTerritory(unitTerr);\n            }\n          }\n          board.units.push(orderUnit);\n        }\n        if (orderUnit) {\n          newOrders.push(new OrderClass(board, o, orderUnit));\n          updateOrdersMeta[id] = {\n            update: {\n              type,\n              toTerrID,\n              fromTerrID,\n              viaConvoy,\n            },\n          };\n        }\n      });\n\n      newOrders.forEach((o) => {\n        const moveChoices = o.getMoveChoices();\n        const supportMoveToChoices = o.getSupportMoveToChoices();\n        const supportHoldChoices = o.getSupportHoldChoices();\n        const supportMoveChoices: SupportMoveChoice[] = [];\n        const convoyToChoices = o.getConvoyToChoices();\n        const convoyToNames: string[] = [];\n        convoyToChoices.forEach((convoyTo) => {\n          const terr = territories[convoyTo];\n          convoyToNames.push(terr.name);\n        });\n        supportMoveToChoices.forEach((supportMoveTo) => {\n          const supportMoveFrom = o.getSupportMoveFromChoices(supportMoveTo);\n          if (supportMoveFrom.length) {\n            supportMoveChoices.push({\n              supportMoveTo,\n              supportMoveFrom,\n            });\n          }\n        });\n        const orderUnit = board.findUnitByID(o.unit.id);\n        let allowedBorderCrossings: TerritoryClass[] = [];\n        if (orderUnit) {\n          allowedBorderCrossings = moveChoices.filter((choice) => {\n            const { Borders } = choice;\n            const from = Borders.find(\n              (border) => border.id === orderUnit?.terrID,\n            );\n            if (from && orderUnit?.canCrossBorder(from)) {\n              return true;\n            }\n            return false;\n          });\n          if (phase === \"Retreats\") {\n            const occupiedTerritory = board.territories.find(\n              (t) => t.id === orderUnit?.terrID,\n            );\n            allowedBorderCrossings = allowedBorderCrossings.filter(\n              (crossing) =>\n                !crossing.unitID &&\n                !crossing.standoff &&\n                crossing.id !== occupiedTerritory?.occupiedFromTerrID,\n            );\n            if (!allowedBorderCrossings.length) {\n              updateOrdersMeta[o.orderData.id].update.type = \"Disband\";\n            }\n          }\n          updateOrdersMeta[o.orderData.id] = {\n            ...{ saved: true },\n            ...updateOrdersMeta[o.orderData.id],\n            allowedBorderCrossings,\n            supportMoveChoices,\n            supportHoldChoices,\n            convoyToChoices,\n          };\n        }\n      });\n    }\n  }\n  return updateOrdersMeta;\n}\n","import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport ApiRoute from \"../../enums/ApiRoute\";\nimport { getGameApiRequest, submitOrders } from \"../../utils/api\";\nimport GameDataResponse from \"../interfaces/GameDataResponse\";\nimport GameErrorResponse from \"../interfaces/GameErrorResponse\";\nimport GameOverviewResponse from \"../interfaces/GameOverviewResponse\";\nimport { ApiStatus } from \"../interfaces/GameState\";\nimport GameCommands from \"../interfaces/GameCommands\";\nimport GameStatusResponse from \"../interfaces/GameStatusResponse\";\nimport GameMessages from \"../interfaces/GameMessages\";\nimport { RootState } from \"../store\";\nimport initialState from \"./initial-state\";\nimport OrdersMeta from \"../interfaces/SavedOrders\";\nimport OrderState from \"../interfaces/OrderState\";\nimport drawBuilds from \"../../utils/map/drawBuilds\";\nimport updateOrdersMeta from \"../../utils/state/updateOrdersMeta\";\nimport highlightMapTerritoriesBasedOnStatuses from \"../../utils/map/highlightMapTerritoriesBasedOnStatuses\";\nimport UpdateOrdersMetaAction from \"../../interfaces/state/UpdateOrdersMetaAction\";\nimport SavedOrdersConfirmation from \"../../interfaces/state/SavedOrdersConfirmation\";\nimport OrderSubmission from \"../../interfaces/state/OrderSubmission\";\nimport resetOrder from \"../../utils/state/resetOrder\";\nimport processUnitDoubleClick from \"../../utils/state/gameApiSlice/reducers/processUnitDoubleClick\";\nimport processUnitClick from \"../../utils/state/gameApiSlice/reducers/processUnitClick\";\nimport processMapClick from \"../../utils/state/gameApiSlice/reducers/processMapClick\";\nimport deleteCommand from \"../../utils/state/gameApiSlice/reducers/deleteCommand\";\nimport dispatchCommand from \"../../utils/state/gameApiSlice/reducers/dispatchCommand\";\nimport fetchGameDataFulfilled from \"../../utils/state/gameApiSlice/extraReducers/fetchGameData/fulfilled\";\nimport updateUnitsRetreat from \"../../utils/map/updateUnitsRetreat\";\n\nexport const fetchGameData = createAsyncThunk(\n  ApiRoute.GAME_DATA,\n  async (queryParams: { countryID?: string; gameID: string }) => {\n    const { data } = await getGameApiRequest(ApiRoute.GAME_DATA, queryParams);\n    return data as GameDataResponse;\n  },\n);\n\nexport const fetchGameOverview = createAsyncThunk(\n  ApiRoute.GAME_OVERVIEW,\n  async (queryParams: { gameID: string }) => {\n    const {\n      data: { data },\n    } = await getGameApiRequest(ApiRoute.GAME_OVERVIEW, queryParams);\n    return data as GameOverviewResponse;\n  },\n);\n\nexport const fetchGameStatus = createAsyncThunk(\n  ApiRoute.GAME_STATUS,\n  async (queryParams: { countryID: string; gameID: string }) => {\n    const { data } = await getGameApiRequest(ApiRoute.GAME_STATUS, queryParams);\n    return data as GameStatusResponse;\n  },\n);\n\nexport const fetchGameMessages = createAsyncThunk(\n  ApiRoute.GAME_MESSAGES,\n  async (queryParams: {\n    gameID: string;\n    countryID: string;\n    toCountryID?: string;\n    offset?: string;\n    limit?: string;\n    allMessages?: string;\n  }) => {\n    const {\n      data: { data },\n    } = await getGameApiRequest(ApiRoute.GAME_MESSAGES, queryParams);\n    return data as GameMessages;\n  },\n);\n\nexport const toggleVoteStatus = createAsyncThunk(\n  ApiRoute.GAME_TOGGLEVOTE,\n  async (queryParams: { countryID: string; gameID: string; vote: string }) => {\n    const { data } = await getGameApiRequest(\n      ApiRoute.GAME_TOGGLEVOTE,\n      queryParams,\n    );\n    return data as string;\n  },\n);\n\nexport const saveOrders = createAsyncThunk(\n  \"game/submitOrders\",\n  async (data: OrderSubmission) => {\n    const formData = new FormData();\n    formData.set(\"orderUpdates\", JSON.stringify(data.orderUpdates));\n    formData.set(\"context\", data.context);\n    formData.set(\"contextKey\", data.contextKey);\n    const response = await submitOrders(formData, data.queryParams);\n    const confirmation: string = response.headers[\"x-json\"] || \"\";\n    const parsed: SavedOrdersConfirmation = JSON.parse(\n      confirmation.substring(1, confirmation.length - 1),\n    );\n    return parsed;\n  },\n);\n\nexport const loadGame = (gameID: string) => async (dispatch) => {\n  const {\n    payload: {\n      user: {\n        member: { countryID },\n      },\n    },\n  } = await dispatch(\n    fetchGameOverview({\n      gameID,\n    }),\n  );\n  await Promise.all([\n    dispatch(fetchGameData({ gameID, countryID })),\n    dispatch(fetchGameMessages({ gameID, countryID, allMessages: \"true\" })),\n  ]);\n  return true;\n};\n\n/**\n * createSlice handles state changes properly without reassiging state, but\n * eslint does not know this. therefore, no-param-reassign is disabled for\n * the createSlice block of code below or functions therein.\n */\n\n/* eslint-disable no-param-reassign */\n\nconst gameApiSlice = createSlice({\n  name: \"game\",\n  initialState,\n  reducers: {\n    resetOrder,\n    updateOrdersMeta(state, action: UpdateOrdersMetaAction) {\n      updateOrdersMeta(state, action.payload);\n    },\n    updateTerritoriesMeta(state, action) {\n      state.territoriesMeta = action.payload;\n    },\n    processUnitDoubleClick,\n    processUnitClick,\n    processMapClick,\n    deleteCommand,\n    highlightMapTerritoriesBasedOnStatuses,\n    drawBuilds,\n    dispatchCommand,\n  },\n  extraReducers(builder) {\n    builder\n      // fetchGameData\n      .addCase(fetchGameData.pending, (state) => {\n        state.apiStatus = \"loading\";\n      })\n      .addCase(fetchGameData.fulfilled, fetchGameDataFulfilled)\n      .addCase(fetchGameData.rejected, (state, action) => {\n        state.apiStatus = \"failed\";\n        state.error = action.error.message;\n      })\n      // fetchGameOverview\n      .addCase(fetchGameOverview.pending, (state) => {\n        state.apiStatus = \"loading\";\n      })\n      .addCase(fetchGameOverview.fulfilled, (state, action) => {\n        state.apiStatus = \"succeeded\";\n        state.overview = action.payload;\n      })\n      .addCase(fetchGameOverview.rejected, (state, action) => {\n        state.apiStatus = \"failed\";\n        state.error = action.error.message;\n      })\n      // fetchGameStatus\n      .addCase(fetchGameStatus.pending, (state) => {\n        state.apiStatus = \"loading\";\n      })\n      .addCase(fetchGameStatus.fulfilled, (state, action) => {\n        state.apiStatus = \"succeeded\";\n        state.status = action.payload;\n      })\n      .addCase(fetchGameStatus.rejected, (state, action) => {\n        state.apiStatus = \"failed\";\n        state.error = action.error.message;\n      })\n      // saveOrders\n      .addCase(saveOrders.fulfilled, (state, action) => {\n        if (action.payload) {\n          const { orders, newContext, newContextKey } = action.payload;\n          if (newContext && newContextKey) {\n            state.data.data.contextVars = {\n              context: newContext,\n              contextKey: newContextKey,\n            };\n          }\n\n          Object.entries(orders).forEach(([id, value]) => {\n            if (value.status === \"Complete\") {\n              state.ordersMeta[id].saved = true;\n            }\n          });\n        }\n\n        updateUnitsRetreat(state);\n      })\n      // Fetch Game Messages\n      .addCase(fetchGameMessages.fulfilled, (state, action) => {\n        if (action.payload) {\n          const { messages, phase, pressType } = action.payload;\n          state.messages = {\n            messages,\n            phase,\n            pressType,\n          };\n        }\n      });\n  },\n});\n/* eslint-enable no-param-reassign */\n\nexport const gameApiSliceActions = gameApiSlice.actions;\n\nexport const gameApiStatus = ({ game: { apiStatus } }: RootState): ApiStatus =>\n  apiStatus;\nexport const gameData = ({ game: { data } }: RootState): GameDataResponse =>\n  data;\nexport const gameError = ({ game: { error } }: RootState): GameErrorResponse =>\n  error;\nexport const gameOverview = ({\n  game: { overview },\n}: RootState): GameOverviewResponse => overview;\nexport const gameStatus = ({\n  game: { status },\n}: RootState): GameStatusResponse => status;\nexport const gameCommands = ({ game: { commands } }: RootState): GameCommands =>\n  commands;\nexport const gameOrdersMeta = ({\n  game: { ordersMeta },\n}: RootState): OrdersMeta => ordersMeta;\nexport const gameOrder = ({ game: { order } }: RootState): OrderState => order;\n\nexport default gameApiSlice.reducer;\n","import { current } from \"@reduxjs/toolkit\";\nimport getOrderStates from \"../../getOrderStates\";\nimport startNewOrder from \"../../startNewOrder\";\n\nexport default function processUnitDoubleClick(state, clickData): void {\n  const {\n    data: {\n      data: { contextVars },\n    },\n    ownUnits,\n  } = current(state);\n  if (!ownUnits.includes(clickData.payload.unitID)) {\n    return;\n  }\n  if (contextVars?.context?.orderStatus) {\n    const orderStates = getOrderStates(contextVars?.context?.orderStatus);\n    if (orderStates.Ready) {\n      return;\n    }\n  }\n  startNewOrder(state, clickData);\n}\n","import { current } from \"@reduxjs/toolkit\";\nimport GameDataResponse from \"../../../../state/interfaces/GameDataResponse\";\nimport GameOverviewResponse from \"../../../../state/interfaces/GameOverviewResponse\";\nimport GameStateMaps from \"../../../../state/interfaces/GameStateMaps\";\nimport OrderState from \"../../../../state/interfaces/OrderState\";\nimport OrdersMeta from \"../../../../state/interfaces/SavedOrders\";\nimport highlightMapTerritoriesBasedOnStatuses from \"../../../map/highlightMapTerritoriesBasedOnStatuses\";\nimport getAvailableOrder from \"../../getAvailableOrder\";\nimport getOrderStates from \"../../getOrderStates\";\nimport resetOrder from \"../../resetOrder\";\nimport startNewOrder from \"../../startNewOrder\";\nimport updateOrdersMeta from \"../../updateOrdersMeta\";\n\n/* eslint-disable no-param-reassign */\nexport default function processUnitClick(state, clickData) {\n  const {\n    data,\n    maps,\n    order,\n    ordersMeta,\n    ownUnits,\n    overview,\n  }: {\n    data: GameDataResponse;\n    maps: GameStateMaps;\n    order: OrderState;\n    ordersMeta: OrdersMeta;\n    ownUnits: string[];\n    overview: GameOverviewResponse;\n  } = current(state);\n  const {\n    data: { currentOrders, contextVars, units },\n  } = data;\n  const { inProgress, method, onTerritory, orderID, type, unitID } = order;\n  const { phase } = overview;\n  if (contextVars?.context?.orderStatus) {\n    const orderStates = getOrderStates(contextVars?.context?.orderStatus);\n    if (orderStates.Ready) {\n      return;\n    }\n  }\n  // Destroy Units\n  const isDestroy = currentOrders?.some(({ type: t }) => t === \"Destroy\");\n  if (phase === \"Builds\") {\n    if (!ownUnits.includes(clickData.payload.unitID) || !isDestroy) {\n      return;\n    }\n\n    const existingOrder = Object.entries(ordersMeta).find(([, { update }]) => {\n      return (\n        update?.toTerrID === maps.unitToTerritory[clickData.payload.unitID]\n      );\n    });\n\n    if (existingOrder) {\n      const [eOrderID, eOrder] = existingOrder;\n      if (eOrderID && eOrder) {\n        updateOrdersMeta(state, {\n          [eOrderID]: {\n            saved: false,\n            update: {\n              type: \"Destroy\",\n              toTerrID: null,\n            },\n          },\n        });\n      }\n    } else {\n      const availableOrder = getAvailableOrder(currentOrders, ordersMeta);\n      if (availableOrder) {\n        updateOrdersMeta(state, {\n          [availableOrder]: {\n            saved: false,\n            update: {\n              type: \"Destroy\",\n              toTerrID: maps.unitToTerritory[clickData.payload.unitID],\n            },\n          },\n        });\n      }\n    }\n  } else if (inProgress) {\n    if (unitID === clickData.payload.unitID) {\n      resetOrder(state);\n      if (type === \"disband\" || type === \"retreat\") {\n        highlightMapTerritoriesBasedOnStatuses(state);\n      }\n    } else if ((type === \"hold\" || type === \"move\") && onTerritory !== null) {\n      highlightMapTerritoriesBasedOnStatuses(state);\n    } else if (method === \"dblClick\" && unitID !== clickData.payload.unitID) {\n      state.order.subsequentClicks.push({\n        ...{\n          inProgress: true,\n          order: orderID,\n          toTerritory: null,\n        },\n        ...clickData.payload,\n      });\n    } else if (ownUnits.includes(clickData.payload.unitID)) {\n      const currentOrderUnitType = units[unitID].type;\n      const newClickUnitType = units[clickData.payload.unitID].type;\n      if (currentOrderUnitType === \"Army\" && newClickUnitType === \"Fleet\") {\n        // this is a convoy move\n        state.order.type = \"convoy\";\n        state.order.subsequentClicks.push({\n          ...{\n            inProgress: true,\n            order: orderID,\n            toTerritory: null,\n          },\n          ...clickData.payload,\n        });\n        highlightMapTerritoriesBasedOnStatuses(state);\n      } else {\n        startNewOrder(state, clickData);\n      }\n    }\n  } else if (ownUnits.includes(clickData.payload.unitID)) {\n    startNewOrder(state, clickData);\n  }\n}\n","export default function getAvailableOrder(currentOrders, ordersMeta) {\n  let availableOrder;\n  for (let i = 0; i < currentOrders?.length; i += 1) {\n    const { id } = currentOrders[i];\n    const orderMeta = ordersMeta[id];\n    if (!orderMeta.update || !orderMeta.update?.toTerrID) {\n      availableOrder = id;\n      break;\n    }\n  }\n  return availableOrder;\n}\n","import { current } from \"@reduxjs/toolkit\";\nimport TerritoryMap from \"../../../../data/map/variants/classic/TerritoryMap\";\nimport BuildUnit from \"../../../../enums/BuildUnit\";\nimport Territory from \"../../../../enums/map/variants/classic/Territory\";\nimport { GameCommand } from \"../../../../state/interfaces/GameCommands\";\nimport GameDataResponse from \"../../../../state/interfaces/GameDataResponse\";\nimport { GameState } from \"../../../../state/interfaces/GameState\";\nimport { UnitSlotNames } from \"../../../../types/map/UnitSlotName\";\nimport highlightMapTerritoriesBasedOnStatuses from \"../../../map/highlightMapTerritoriesBasedOnStatuses\";\nimport getOrderStates from \"../../getOrderStates\";\nimport processConvoy from \"../../processConvoy\";\nimport resetOrder from \"../../resetOrder\";\nimport setCommand from \"../../setCommand\";\nimport startNewOrder from \"../../startNewOrder\";\nimport updateOrdersMeta from \"../../updateOrdersMeta\";\n\n/* eslint-disable no-param-reassign */\nexport default function processMapClick(state, clickData) {\n  const {\n    data: { data },\n    order,\n    ordersMeta,\n    overview,\n    territoriesMeta,\n  }: {\n    data: { data: GameDataResponse[\"data\"] };\n    order: GameState[\"order\"];\n    ordersMeta: GameState[\"ordersMeta\"];\n    overview: GameState[\"overview\"];\n    territoriesMeta: GameState[\"territoriesMeta\"];\n  } = current(state);\n  const {\n    inProgress,\n    method,\n    orderID,\n    onTerritory,\n    subsequentClicks,\n    toTerritory,\n    type,\n    unitID,\n  } = order;\n  const {\n    user: { member },\n    phase,\n  } = overview;\n  const { currentOrders, contextVars } = data;\n  if (contextVars?.context?.orderStatus) {\n    const orderStates = getOrderStates(contextVars?.context?.orderStatus);\n    if (orderStates.Ready) {\n      return;\n    }\n  }\n  const {\n    payload: { clickObject, evt, name: territoryName },\n  } = clickData;\n  const truthyToTerritory = toTerritory !== undefined && toTerritory !== null;\n  const truthyOnTerritory = onTerritory !== undefined && onTerritory !== null;\n  if (inProgress && method === \"click\") {\n    const currOrderUnitID = unitID;\n    if (\n      truthyOnTerritory &&\n      Territory[onTerritory] === territoryName &&\n      !type\n    ) {\n      let command: GameCommand = {\n        command: \"HOLD\",\n      };\n      setCommand(state, command, \"territoryCommands\", territoryName);\n      setCommand(state, command, \"unitCommands\", currOrderUnitID);\n      command = {\n        command: \"REMOVE_ARROW\",\n        data: {\n          orderID,\n        },\n      };\n      setCommand(state, command, \"mapCommands\", \"all\");\n      if (currentOrders) {\n        const orderToUpdate = currentOrders.find(\n          (o) => o.unitID === currOrderUnitID,\n        );\n        if (orderToUpdate) {\n          updateOrdersMeta(state, {\n            [orderToUpdate.id]: {\n              saved: false,\n              update: {\n                type: phase === \"Retreats\" ? \"Disband\" : \"Hold\",\n                toTerrID: null,\n              },\n            },\n          });\n        }\n      }\n      state.order.type = phase === \"Retreats\" ? \"disband\" : \"hold\";\n    } else if (type === \"convoy\" && !truthyToTerritory) {\n      state.order.toTerritory = Number(Territory[territoryName]);\n      processConvoy(state);\n    } else if (\n      truthyOnTerritory &&\n      (type === \"hold\" ||\n        type === \"move\" ||\n        type === \"convoy\" ||\n        type === \"disband\" ||\n        type === \"retreat\")\n    ) {\n      highlightMapTerritoriesBasedOnStatuses(state);\n      resetOrder(state);\n    } else if (truthyToTerritory && type === \"build\") {\n      setCommand(\n        state,\n        {\n          command: \"REMOVE_BUILD\",\n        },\n        \"territoryCommands\",\n        Territory[toTerritory],\n      );\n      resetOrder(state);\n    } else if (\n      clickObject === \"territory\" &&\n      truthyOnTerritory &&\n      Territory[onTerritory] !== territoryName &&\n      !type &&\n      inProgress\n    ) {\n      const { allowedBorderCrossings } = ordersMeta[orderID];\n      const canMove = allowedBorderCrossings?.find((border) => {\n        const mappedTerritory = TerritoryMap[border.name];\n        return Territory[mappedTerritory.territory] === territoryName;\n      });\n      if (canMove) {\n        highlightMapTerritoriesBasedOnStatuses(state);\n        const command: GameCommand = {\n          command: \"MOVE\",\n        };\n        setCommand(state, command, \"territoryCommands\", territoryName);\n        updateOrdersMeta(state, {\n          [orderID]: {\n            saved: false,\n            update: {\n              type: phase === \"Retreats\" ? \"Retreat\" : \"Move\",\n              toTerrID: canMove.id,\n              viaConvoy: \"No\",\n            },\n          },\n        });\n        state.order.toTerritory = TerritoryMap[canMove.name].territory;\n        state.order.type = phase === \"Retreats\" ? \"retreat\" : \"move\";\n      } else {\n        const command: GameCommand = {\n          command: \"INVALID_CLICK\",\n          data: {\n            click: {\n              evt,\n              territoryName,\n            },\n          },\n        };\n        setCommand(state, command, \"mapCommands\", \"all\");\n      }\n    }\n  } else if (inProgress && method === \"dblClick\") {\n    if (subsequentClicks.length) {\n      // user is trying to do a support move or a support hold\n      const unitSupporting = ordersMeta[orderID];\n      const unitBeingSupported = subsequentClicks[0];\n      const terrEnum = Number(Territory[territoryName]);\n      if (terrEnum === unitBeingSupported.onTerritory) {\n        // attemping support hold\n        const match = unitSupporting.supportHoldChoices?.find(\n          ({ unitID: uID }) => uID === unitBeingSupported.unitID,\n        );\n        if (match) {\n          // execute support hold\n          updateOrdersMeta(state, {\n            [orderID]: {\n              saved: false,\n              update: {\n                type: \"Support hold\",\n                toTerrID: match.id,\n              },\n            },\n          });\n          resetOrder(state);\n          return;\n        }\n      } else {\n        // attempting support move\n        const supportMoveMatch = unitSupporting.supportMoveChoices?.find(\n          ({ supportMoveTo: { name } }) =>\n            TerritoryMap[name].territory === terrEnum,\n        );\n        if (supportMoveMatch && supportMoveMatch.supportMoveFrom.length) {\n          const match = supportMoveMatch.supportMoveFrom.find(\n            ({ unitID: uID }) => uID === unitBeingSupported.unitID,\n          );\n          if (match) {\n            // execute support move\n            updateOrdersMeta(state, {\n              [orderID]: {\n                saved: false,\n                update: {\n                  type: \"Support move\",\n                  toTerrID: supportMoveMatch.supportMoveTo.id,\n                  fromTerrID: match.id,\n                },\n              },\n            });\n            resetOrder(state);\n            return;\n          }\n        }\n      }\n      const command: GameCommand = {\n        command: \"INVALID_CLICK\",\n        data: {\n          click: {\n            evt,\n            territoryName,\n          },\n        },\n      };\n      setCommand(state, command, \"mapCommands\", \"all\");\n    }\n  } else if (\n    clickObject === \"territory\" &&\n    phase === \"Builds\" &&\n    currentOrders\n  ) {\n    const territoryMeta = territoriesMeta[Territory[territoryName]];\n    if (territoryMeta) {\n      const {\n        coast: territoryCoast,\n        countryID,\n        id: webDipTerritoryID,\n        supply,\n        type: territoryType,\n      } = territoryMeta;\n\n      if (member.countryID.toString() !== countryID || !supply) {\n        return;\n      }\n\n      const stp = territoriesMeta[Territory.SAINT_PETERSBURG];\n      const stpnc = territoriesMeta[Territory.SAINT_PETERSBURG_NORTH_COAST];\n      const stpsc = territoriesMeta[Territory.SAINT_PETERSBURG_SOUTH_COAST];\n\n      const specialIds = {};\n      if (stp) {\n        specialIds[stp.id] = [stpnc?.id, stpsc?.id];\n      }\n\n      const affectedTerritoryIds = specialIds[webDipTerritoryID]\n        ? [...[webDipTerritoryID], ...specialIds[webDipTerritoryID]]\n        : [webDipTerritoryID];\n\n      const existingBuildOrder = Object.entries(ordersMeta).find(\n        ([, { update }]) =>\n          update ? affectedTerritoryIds.includes(update.toTerrID) : false,\n      );\n\n      if (existingBuildOrder) {\n        const [id] = existingBuildOrder;\n        let command: GameCommand = {\n          command: \"REMOVE_BUILD\",\n          data: {\n            removeBuild: { orderID: id },\n          },\n        };\n        setCommand(state, command, \"territoryCommands\", territoryName);\n\n        UnitSlotNames.forEach((slot) => {\n          command = {\n            command: \"SET_UNIT\",\n            data: {\n              setUnit: {\n                unitSlotName: slot,\n              },\n            },\n          };\n          setCommand(state, command, \"territoryCommands\", territoryName);\n        });\n\n        updateOrdersMeta(state, {\n          [id]: {\n            saved: false,\n            update: {\n              type: \"Wait\",\n              toTerrID: null,\n            },\n          },\n        });\n        return;\n      }\n\n      const territoryHasUnit = !!territoryMeta.unitID;\n\n      let availableOrder;\n      for (let i = 0; i < currentOrders.length; i += 1) {\n        const { id } = currentOrders[i];\n        const orderMeta = ordersMeta[id];\n        if (!orderMeta.update || !orderMeta.update?.toTerrID) {\n          availableOrder = id;\n          break;\n        }\n      }\n\n      if (availableOrder && !territoryHasUnit && !inProgress) {\n        let canBuild = 0;\n        if (territoryCoast === \"Parent\" || territoryCoast === \"No\") {\n          canBuild += BuildUnit.Army;\n        }\n        if (territoryType !== \"Land\" && territoryCoast !== \"Parent\") {\n          canBuild += BuildUnit.Fleet;\n        }\n        const command: GameCommand = {\n          command: \"BUILD\",\n          data: {\n            build: [\n              {\n                availableOrder,\n                canBuild,\n                toTerrID: territoryMeta.id,\n                unitSlotName: \"main\",\n              },\n            ],\n          },\n        };\n        if (territoryMeta.territory === Territory.SAINT_PETERSBURG) {\n          const nc = territoriesMeta[Territory.SAINT_PETERSBURG_NORTH_COAST];\n          const sc = territoriesMeta[Territory.SAINT_PETERSBURG_SOUTH_COAST];\n          nc &&\n            command.data?.build?.push({\n              availableOrder,\n              canBuild: BuildUnit.Fleet,\n              toTerrID: nc.id,\n              unitSlotName: \"nc\",\n            });\n          sc &&\n            command.data?.build?.push({\n              availableOrder,\n              canBuild: BuildUnit.Fleet,\n              toTerrID: sc.id,\n              unitSlotName: \"sc\",\n            });\n        }\n        setCommand(state, command, \"territoryCommands\", territoryName);\n        startNewOrder(state, {\n          payload: {\n            inProgress: true,\n            method: \"click\",\n            orderID: availableOrder,\n            onTerritory: null,\n            subsequentClicks: [],\n            toTerritory: territoryMeta.territory,\n            type: \"build\",\n            unitID: \"\",\n          },\n        });\n      }\n    }\n  }\n}\n","import { current } from \"@reduxjs/toolkit\";\nimport Territory from \"../../enums/map/variants/classic/Territory\";\nimport OrderClass from \"../../models/OrderClass\";\nimport { GameCommand } from \"../../state/interfaces/GameCommands\";\nimport updateOrdersMeta from \"./updateOrdersMeta\";\nimport setCommand from \"./setCommand\";\n\n/* eslint-disable no-param-reassign */\nexport default function processConvoy(state): void {\n  const {\n    board,\n    data: {\n      data: { currentOrders },\n    },\n    order,\n    ordersMeta,\n    maps,\n  } = current(state);\n  const lastFleetInChain =\n    order.subsequentClicks[order.subsequentClicks.length - 1];\n  if (lastFleetInChain) {\n    const { convoyToChoices } = ordersMeta[lastFleetInChain.order];\n    const toTerritory = maps.enumToTerritory[order.toTerritory];\n    const fromTerritory = maps.enumToTerritory[order.onTerritory];\n\n    if (convoyToChoices.includes(toTerritory)) {\n      const orderUnit = board.findUnitByID(lastFleetInChain.unitID);\n      const fleetOrder = currentOrders?.find(\n        (o) => o.unitID === lastFleetInChain.unitID,\n      );\n      if (fleetOrder) {\n        const convoyOrder = new OrderClass(board, fleetOrder, orderUnit);\n        const againstTerritory = board.findTerritoryByID(toTerritory);\n        const convoyFrom = convoyOrder.getConvoyFromChoices(againstTerritory);\n        const convoyArmy = convoyFrom.find((c) => c.id === order.unitID);\n        if (convoyArmy) {\n          const convoyPath = convoyArmy.ConvoyGroup.pathArmyToCoastWithFleet(\n            board.findTerritoryByID(fromTerritory),\n            againstTerritory,\n            convoyOrder.unit.Territory,\n          );\n          if (convoyPath) {\n            const clickedUnitsTerritories = order.subsequentClicks.map(\n              (click) => {\n                return maps.enumToTerritory[click.onTerritory];\n              },\n            );\n            clickedUnitsTerritories.push(\n              maps.enumToTerritory[order.onTerritory],\n            );\n            const updates = {};\n            convoyPath.forEach((terrID) => {\n              let foundClick =\n                maps.enumToTerritory[order.onTerritory] === terrID\n                  ? order\n                  : false;\n              if (!foundClick) {\n                foundClick = order.subsequentClicks.find((click) => {\n                  return maps.enumToTerritory[click.onTerritory] === terrID;\n                });\n              }\n              if (!foundClick) {\n                // user did not click this unit\n              } else {\n                const unitOrderID = maps.unitToOrder[foundClick.unitID];\n                const unitIsArmy =\n                  board.findUnitByID(foundClick.unitID).type === \"Army\";\n                if (unitIsArmy) {\n                  updates[unitOrderID] = {\n                    saved: false,\n                    update: {\n                      convoyPath,\n                      toTerrID: toTerritory,\n                      type: \"Move\",\n                      viaConvoy: \"Yes\",\n                    },\n                  };\n                } else {\n                  updates[unitOrderID] = {\n                    saved: false,\n                    update: {\n                      convoyPath,\n                      toTerrID: toTerritory,\n                      fromTerrID: fromTerritory,\n                      type: \"Convoy\",\n                    },\n                  };\n                }\n              }\n            });\n            updateOrdersMeta(state, updates);\n            const command: GameCommand = {\n              command: \"MOVE\",\n            };\n            setCommand(\n              state,\n              command,\n              \"territoryCommands\",\n              Territory[order.toTerritory],\n            );\n          }\n        }\n      }\n      return;\n    }\n  }\n  const command: GameCommand = {\n    command: \"INVALID_CLICK\",\n  };\n  setCommand(state, command, \"territoryCommands\", Territory[order.toTerritory]);\n}\n","import { current } from \"@reduxjs/toolkit\";\nimport { GameCommandType } from \"../../../../state/interfaces/GameCommands\";\n\n/* eslint-disable no-param-reassign */\nexport default function deleteCommand(\n  state,\n  {\n    payload: { type, command, id },\n  }: {\n    payload: {\n      command: string;\n      id: string;\n      type: GameCommandType;\n    };\n  },\n) {\n  const { commands } = current(state);\n  const commandsType = commands[type];\n  const commandSet = new Map(commandsType[id]);\n  const deleteKey = command;\n  if (commandSet && commandSet.has(deleteKey)) {\n    const newCommandSet = new Map(commandSet);\n    newCommandSet.delete(deleteKey);\n    state.commands[type][id] = newCommandSet;\n  }\n}\n","import {\n  GameCommand,\n  GameCommandType,\n} from \"../../../../state/interfaces/GameCommands\";\nimport setCommand from \"../../setCommand\";\n\nexport default function dispatchCommand(\n  state,\n  action: {\n    type: string;\n    payload: {\n      command: GameCommand;\n      container: GameCommandType;\n      identifier: string;\n    };\n  },\n) {\n  const { command, container, identifier } = action.payload;\n  setCommand(state, command, container, identifier);\n}\n","import * as d3 from \"d3\";\nimport ArrowColor from \"../../enums/ArrowColor\";\nimport ArrowType from \"../../enums/ArrowType\";\nimport Territory from \"../../enums/map/variants/classic/Territory\";\nimport webDiplomacyTheme from \"../../webDiplomacyTheme\";\nimport arrowDispatchReceiveCoordinates from \"./arrowDispatchReceiveCoordinates\";\n\nexport default function drawArrow(\n  /**\n   * color code passed from enum ArrowColors based on move type\n   */\n  arrowIdentifier: string,\n  arrowType: ArrowType,\n  arrowColor: ArrowColor,\n  receiverType: \"territory\" | \"unit\" | \"arrow\",\n  receiverIdentifier: Territory | string,\n  unitTerritory: Territory,\n): void {\n  const d3MapSelector = d3.select(\"#map\");\n\n  let x1;\n  let x2;\n  let y1;\n  let y2;\n\n  const fromTerritoryName = Territory[unitTerritory];\n  const fromTerritoryEl: SVGSVGElement = d3\n    .select(`#${fromTerritoryName}-territory`)\n    .node();\n  let unit = d3.select(`#${fromTerritoryName}-unit`).node();\n  let unitX;\n  let unitY;\n  let unitW;\n  let unitH;\n\n  let positionChangeBuffer;\n  let xDiff;\n  let yDiff;\n\n  let rw;\n  let rh;\n\n  if (unit && fromTerritoryEl) {\n    unit = unit.parentNode;\n    const fromTerritoryX = Number(fromTerritoryEl.getAttribute(\"x\"));\n    const fromTerritoryY = Number(fromTerritoryEl.getAttribute(\"y\"));\n    ({ x: unitX, y: unitY, width: unitW, height: unitH } = unit.getBBox());\n    unitX = fromTerritoryX + Number(unit.getAttribute(\"x\")) + unitX;\n    unitY = fromTerritoryY + Number(unit.getAttribute(\"y\")) + unitY;\n    switch (receiverType) {\n      case \"arrow\": {\n        const arrow: SVGLineElement = d3\n          .selectAll(`.arrow__${receiverIdentifier}`)\n          .node();\n\n        if (arrow) {\n          x1 = unitX;\n          y1 = unitY;\n          const attachPoint = 0.75;\n          const arrowX1 = Number(arrow.getAttribute(\"x1\"));\n          const arrowY1 = Number(arrow.getAttribute(\"y1\"));\n          const arrowX2 = Number(arrow.getAttribute(\"x2\"));\n          const arrowY2 = Number(arrow.getAttribute(\"y2\"));\n          const run = arrowX2 - arrowX1;\n          const rise = arrowY2 - arrowY1;\n          x2 = arrowX1 + run * attachPoint;\n          y2 = arrowY1 + rise * attachPoint;\n          xDiff = x2 - x1;\n          yDiff = y2 - y1;\n          positionChangeBuffer = 60;\n        }\n        break;\n      }\n      case \"unit\": {\n        const toTerritoryName = Territory[receiverIdentifier];\n        let receiverUnit = d3.select(`#${toTerritoryName}-unit`).node();\n        const toTerritoryEl: SVGSVGElement = d3\n          .select(`#${toTerritoryName}-territory`)\n          .node();\n\n        if (toTerritoryEl && receiverUnit) {\n          receiverUnit = receiverUnit.parentNode;\n\n          const {\n            x: rUnitX,\n            y: rUnitY,\n            width: rUnitW,\n            height: rUnitH,\n          } = receiverUnit.getBBox();\n\n          const receiverSlotElX =\n            Number(receiverUnit.getAttribute(\"x\")) + rUnitX;\n          const receiverSlotElY =\n            Number(receiverUnit.getAttribute(\"y\")) + rUnitY;\n\n          x1 = unitX;\n          x2 = Number(toTerritoryEl.getAttribute(\"x\")) + receiverSlotElX;\n\n          y1 = unitY;\n          y2 = Number(toTerritoryEl.getAttribute(\"y\")) + receiverSlotElY;\n\n          rw = rUnitW;\n          rh = rUnitH;\n          xDiff = x2 - x1;\n          yDiff = y2 - y1;\n          positionChangeBuffer = 75;\n        }\n        break;\n      }\n      default: {\n        const toTerritoryName = Territory[receiverIdentifier];\n        const toTerritoryReceiver: SVGRectElement = d3\n          .select(`#${toTerritoryName}-arrow-receiver`)\n          .node();\n        const toTerritoryEl: SVGSVGElement = d3\n          .select(`#${toTerritoryName}-territory`)\n          .node();\n        if (toTerritoryEl && toTerritoryName) {\n          x1 = unitX;\n          x2 =\n            Number(toTerritoryEl.getAttribute(\"x\")) +\n            Number(toTerritoryReceiver.getAttribute(\"x\"));\n          y1 = unitY;\n          y2 =\n            Number(toTerritoryEl.getAttribute(\"y\")) +\n            Number(toTerritoryReceiver.getAttribute(\"y\"));\n\n          xDiff = x2 - x1;\n          yDiff = y2 - y1;\n          positionChangeBuffer = 75;\n        }\n        break;\n      }\n    }\n\n    const arrowClass = `arrow__${arrowIdentifier}`;\n    if (arrowType === ArrowType.MOVE) {\n      d3.selectAll(`.${arrowClass}`).remove();\n    }\n\n    ({ x1, x2, y1, y2 } = arrowDispatchReceiveCoordinates(\n      positionChangeBuffer,\n      unitH,\n      unitW,\n      rh,\n      rw,\n      xDiff,\n      yDiff,\n      x1,\n      x2,\n      y1,\n      y2,\n    ));\n\n    d3MapSelector\n      .select(\"#container\")\n      .append(\"line\")\n      .attr(\"x1\", x1)\n      .attr(\"y1\", y1)\n      .attr(\"x2\", x2)\n      .attr(\"y2\", y2)\n      .attr(\n        \"marker-end\",\n        `url(#arrowHead__${ArrowType[arrowType]}_${ArrowColor[arrowColor]})`,\n      )\n      .attr(\"stroke\", webDiplomacyTheme.palette.arrowColors[arrowColor].main)\n      .attr(\"stroke-width\", \"3\")\n      .attr(\"class\", arrowClass);\n  }\n}\n","export default function arrowDispatchReceiveCoordinates(\n  positionChangeBuffer: number, // distance before changing receiver/dispatch position\n  unitH: number, // dispatch unit height\n  unitW: number, // dispatch unit width\n  rh: number, // receiver height\n  rw: number, // receiver width\n  xDiff: number, // horizontal diff between receiver and dispatch\n  yDiff: number, // vertical diff between receiver and dispatch\n  X1: number, // line x1\n  X2: number, // line x2\n  Y1: number, // line y1\n  Y2: number, // line y2\n): {\n  x1: number;\n  x2: number;\n  y1: number;\n  y2: number;\n} {\n  let x1 = X1;\n  let x2 = X2;\n  let y1 = Y1;\n  let y2 = Y2;\n  if (Math.abs(xDiff) < positionChangeBuffer && yDiff < 0) {\n    // dispatch: top center\n    x1 += unitW / 2;\n    // receiver: bottom center\n    if (rw && rh) {\n      x2 += rw / 2;\n      y2 += rh;\n    }\n  } else if (Math.abs(xDiff) < positionChangeBuffer && yDiff > 0) {\n    // dispatch: bottom center\n    y1 += unitH;\n    x1 += unitW / 2;\n    // receiver: top center\n    if (rw) {\n      x2 += rw / 2;\n    }\n  } else if (\n    xDiff > positionChangeBuffer &&\n    yDiff < 0 &&\n    Math.abs(yDiff) > positionChangeBuffer\n  ) {\n    // dispatch: top right\n    x1 += unitW;\n    // receive: bottom left\n    if (rh) {\n      y2 += rh;\n    }\n  } else if (\n    xDiff > positionChangeBuffer &&\n    Math.abs(yDiff) < positionChangeBuffer\n  ) {\n    // dispatch: center right\n    y1 += unitH / 2;\n    x1 += unitW;\n    // receive: center left\n    if (rh) {\n      y2 += rh / 2;\n    }\n  } else if (xDiff > positionChangeBuffer && yDiff > positionChangeBuffer) {\n    // dispatch: bottom right\n    y1 += unitH;\n    x1 += unitW;\n    // receive: top left\n    // nothing needs to be done for top left\n  } else if (xDiff < 0 && Math.abs(yDiff) < positionChangeBuffer) {\n    // dispatch: center left\n    y1 += unitH / 2;\n    // receive: center right\n    if (rw && rh) {\n      x2 += rw;\n      y2 += rh / 2;\n    }\n  } else if (xDiff < 0 && yDiff > positionChangeBuffer) {\n    // dispatch: bottom left\n    y1 += unitH;\n    // receive: top right\n    if (rw) {\n      x2 += rw;\n    }\n  }\n  return {\n    x1,\n    x2,\n    y1,\n    y2,\n  };\n}\n","enum UIState {\n  DESTROY = \"destroy\",\n  NONE = \"none\",\n  SELECTED = \"selected\",\n  HOLD = \"hold\",\n  DISBANDED = \"disbanded\",\n  DISLODGED = \"dislodged\",\n  BUILD = \"build\",\n  ACTIVE = \"active\",\n  INACTIVE = \"inactive\",\n}\n\nexport default UIState;\n","/* eslint-disable no-bitwise */\n\nenum BuildUnit {\n  Army = 1 << 1,\n  Fleet = 1 << 2,\n  All = Army | Fleet,\n}\n\nexport default BuildUnit;\n","import { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\nimport { AppDispatch, RootState } from \"./store\";\n\nexport const useAppDispatch = (): AppDispatch => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","enum Territory {\n  ADRIATIC_SEA,\n  AEGEAN_SEA,\n  ALBANIA,\n  ANKARA,\n  APULIA,\n  ARMENIA,\n  BALTIC_SEA,\n  BARENTS_SEA,\n  BELGIUM,\n  BERLIN,\n  BLACK_SEA,\n  BOHEMIA,\n  BREST,\n  BUDAPEST,\n  BULGARIA,\n  BULGARIA_NORTH_COAST,\n  BULGARIA_SOUTH_COAST,\n  BURGUNDY,\n  CHANNEL_1,\n  CLYDE,\n  CONSTANTINOPLE,\n  DENMARK,\n  EASTERN_MEDITERRANEAN,\n  EDINBURGH,\n  ENGLISH_CHANNEL,\n  FINLAND,\n  GALICIA,\n  GASCONY,\n  GREECE,\n  GULF_OF_BOTHNIA,\n  GULF_OF_LYONS,\n  HELIGOLAND_BIGHT,\n  HOLLAND,\n  IONIAN_SEA,\n  IRISH_SEA,\n  KIEL,\n  LIVERPOOL,\n  LIVONIA,\n  LONDON,\n  MARSEILLES,\n  MIDDLE_ATLANTIC,\n  MOSCOW,\n  MUNICH,\n  NAPLES,\n  NEUTRAL_1,\n  NEUTRAL_2,\n  NEUTRAL_3,\n  NEUTRAL_4,\n  NEUTRAL_5,\n  NEUTRAL_6,\n  NEUTRAL_7,\n  NEUTRAL_8,\n  NEUTRAL_9,\n  NORTH_AFRICA,\n  NORTH_ATLANTIC,\n  NORTH_ATLANTIC2,\n  NORTH_SEA,\n  NORWAY,\n  NORWEGIAN_SEA,\n  PARIS,\n  PICARDY,\n  PIEDMONT,\n  PORTUGAL,\n  PRUSSIA,\n  ROME,\n  RUHR,\n  RUMANIA,\n  SAINT_PETERSBURG,\n  SAINT_PETERSBURG_NORTH_COAST,\n  SAINT_PETERSBURG_SOUTH_COAST,\n  SERBIA,\n  SEVASTOPOL,\n  SILESIA,\n  SKAGERRACK,\n  SKAGERRACK2,\n  SMYRNA,\n  SPAIN,\n  SPAIN_NORTH_COAST,\n  SPAIN_SOUTH_COAST,\n  SWEDEN,\n  SYRIA,\n  TRIESTE,\n  TUNIS,\n  TUSCANY,\n  TYROLIA,\n  TYRRHENIAN_SEA,\n  UKRAINE,\n  UNPLAYABLE_LAND1,\n  UNPLAYABLE_LAND2,\n  UNPLAYABLE_LAND3,\n  UNPLAYABLE_LAND4,\n  UNPLAYABLE_LAND5,\n  UNPLAYABLE_LAND6,\n  UNPLAYABLE_LAND7,\n  UNPLAYABLE_LAND8,\n  UNPLAYABLE_SEA1,\n  UNPLAYABLE_SEA2,\n  UNPLAYABLE_SEA3,\n  UNPLAYABLE_SEA4,\n  UNPLAYABLE_SEA5,\n  UNPLAYABLE_SEA6,\n  UNPLAYABLE_SEA7,\n  UNPLAYABLE_SEA8,\n  UNPLAYABLE_SEA9,\n  VENICE,\n  VIENNA,\n  WALES,\n  WARSAW,\n  WESTERN_MEDITERRANEAN,\n  YORK,\n}\n\nexport default Territory;\n","import Country from \"../../../../enums/Country\";\n\nconst countryMap = {\n  Russia: Country.RUSSIA,\n  Germany: Country.GERMANY,\n  Italy: Country.ITALY,\n  Austria: Country.AUSTRIA,\n  England: Country.ENGLAND,\n  France: Country.FRANCE,\n  Turkey: Country.TURKEY,\n};\n\nexport default countryMap;\n","interface OrderStates {\n  None: boolean;\n  Saved: boolean;\n  Completed: boolean;\n  Ready: boolean;\n}\n\nexport default function getOrderStates(orderStatus: string): OrderStates {\n  /**\n   * orderStates will be a string like \"None,Saved,Completed,Ready\"\n   */\n  const orderStates = orderStatus.split(\",\");\n  return {\n    None: orderStates.includes(\"None\"),\n    Saved: orderStates.includes(\"Saved\"),\n    Completed: orderStates.includes(\"Completed\"),\n    Ready: orderStates.includes(\"Ready\"),\n  };\n}\n","enum Country {\n  FRANCE = \"France\",\n  AUSTRIA = \"Austria\",\n  ENGLAND = \"England\",\n  GERMANY = \"Germany\",\n  RUSSIA = \"Russia\",\n  ITALY = \"Italy\",\n  TURKEY = \"Turkey\",\n}\n\nexport default Country;\n","import { createTheme, SimplePaletteColorOptions } from \"@mui/material/styles\";\nimport Country from \"./enums/Country\";\nimport ArrowColor from \"./enums/ArrowColor\";\n\ndeclare module \"@mui/material/styles\" {\n  interface BreakpointOverrides {\n    xs: false;\n    sm: false;\n    md: false;\n    lg: false;\n    xl: false;\n    mobile: true;\n    mobileLandscape: true;\n    mobileLg: true;\n    mobileLgLandscape: true;\n    tablet: true;\n    tabletLandscape: true;\n    desktop: true;\n  }\n\n  interface TypographyVariants {\n    label: React.CSSProperties;\n  }\n\n  export interface TypographyVariantsOptions {\n    label?: React.CSSProperties;\n  }\n}\n\ndeclare module \"@mui/material/Typography\" {\n  interface TypographyPropsVariantOverrides {\n    label: true;\n  }\n}\n\ninterface svgOptions {\n  filters: {\n    dropShadows: string[];\n  };\n}\n\ninterface PaletteArrowColors {\n  [ArrowColor.CONVOY]: SimplePaletteColorOptions;\n  [ArrowColor.IMPLIED]: SimplePaletteColorOptions;\n  [ArrowColor.IMPLIED_FOREIGN]: SimplePaletteColorOptions;\n  [ArrowColor.MOVE]: SimplePaletteColorOptions;\n  [ArrowColor.MOVE_FAILED]: SimplePaletteColorOptions;\n  [ArrowColor.RETREAT]: SimplePaletteColorOptions;\n  [ArrowColor.SUPPORT_HOLD]: SimplePaletteColorOptions;\n  [ArrowColor.SUPPORT_MOVE]: SimplePaletteColorOptions;\n}\n\ndeclare module \"@mui/material/styles\" {\n  interface Palette {\n    France: SimplePaletteColorOptions;\n    Austria: SimplePaletteColorOptions;\n    England: SimplePaletteColorOptions;\n    Germany: SimplePaletteColorOptions;\n    Russia: SimplePaletteColorOptions;\n    Italy: SimplePaletteColorOptions;\n    Turkey: SimplePaletteColorOptions;\n    svg: svgOptions;\n    arrowColors: PaletteArrowColors;\n  }\n}\n\ndeclare module \"@mui/material/styles/createPalette\" {\n  export interface PaletteOptions {\n    svg: svgOptions;\n    arrowColors: PaletteArrowColors;\n  }\n}\n\n/**\n * constants\n * ===\n * define constants that are to be re-used in the theme. use generic names that\n * describe their usage.\n */\nconst mainColor = \"#000\";\nconst secondaryColor = \"#fff\";\nconst activeButtonStyle = {\n  backgroundColor: secondaryColor,\n  boxShadow: \"0 0 2px 2px\",\n  color: mainColor,\n};\n\nconst focusButtonStyle = {\n  backgroundColor: mainColor,\n  boxShadow: \"0 0 2px 2px\",\n  color: secondaryColor,\n};\nconst boldFontWeight = 700;\nconst disabledBackground = \"#b8b8b8\";\nconst disabledText = \"#cacaca\";\nconst disabledBackgroundSecondary = \"transparent\";\nconst disabledTextSecondary = \"#bababa\";\nconst defaultLineHeight = 1.2;\nconst normalFontWeight = 400;\n\ntype CountryPaletteOptions = {\n  [key in Country]: SimplePaletteColorOptions;\n};\n\nconst countryPalette: CountryPaletteOptions = {\n  France: {\n    main: \"#2D5EE8\",\n    light: \"#B9C9F7\",\n  },\n  Austria: {\n    main: \"#FC4343\",\n    light: \"#FEC0C0\",\n  },\n  England: {\n    main: \"#E136EA\",\n    light: \"#F5BCF8\",\n  },\n  Germany: {\n    main: \"#F37C0E\",\n    light: \"#FBD3AF\",\n  },\n  Russia: {\n    main: \"#3F1BC1\",\n    light: \"#BFB3EA\",\n  },\n  Italy: {\n    main: \"#47D2A0\",\n    light: \"#C2F0DF\",\n  },\n  Turkey: {\n    main: \"#F3C400\",\n    light: \"#FBEBAA\",\n  },\n};\n\ntype ArrowColors = {\n  [key in ArrowColor]: SimplePaletteColorOptions;\n};\n\nconst arrowColors: ArrowColors = {\n  [ArrowColor.CONVOY]: { main: \"#2042B8\" },\n  [ArrowColor.IMPLIED]: { main: \"#989898\" },\n  [ArrowColor.IMPLIED_FOREIGN]: { main: \"rgba(0,0,0,.3)\" },\n  [ArrowColor.MOVE]: { main: \"#000000\" },\n  [ArrowColor.MOVE_FAILED]: { main: \"#BB0000\" },\n  [ArrowColor.RETREAT]: { main: \"#BD2894\" },\n  [ArrowColor.SUPPORT_HOLD]: { main: \"#3FC621\" },\n  [ArrowColor.SUPPORT_MOVE]: { main: \"#F8F83D\" },\n};\n\n/**\n * theme creation\n */\nconst webDiplomacyTheme = createTheme({\n  breakpoints: {\n    values: {\n      mobile: 0,\n      mobileLandscape: 600,\n      mobileLg: 414,\n      mobileLgLandscape: 896,\n      tablet: 820,\n      tabletLandscape: 1024,\n      desktop: 1200,\n    },\n  },\n  components: {\n    MuiUseMediaQuery: {\n      defaultProps: {\n        noSsr: true,\n      },\n    },\n    MuiButton: {\n      styleOverrides: {\n        root: {\n          borderRadius: 18,\n          padding: \"10px 18px\",\n        },\n        containedPrimary: {\n          \"&:active\": {\n            ...activeButtonStyle,\n          },\n          \"&:focus\": {\n            ...focusButtonStyle,\n          },\n          \"&:hover\": {\n            backgroundColor: \"#757575\",\n            color: secondaryColor,\n          },\n        },\n        containedSecondary: {\n          \"&.Mui-disabled\": {\n            backgroundColor: disabledBackgroundSecondary,\n            color: disabledTextSecondary,\n          },\n          \"&:active\": {\n            ...activeButtonStyle,\n          },\n          \"&:focus\": {\n            ...activeButtonStyle,\n          },\n          \"&:hover\": {\n            backgroundColor: \"#fafafa\",\n          },\n        },\n      },\n    },\n  },\n  palette: {\n    action: {\n      disabledBackground,\n      disabled: disabledText,\n    },\n    error: {\n      main: \"#f00\",\n      contrastText: secondaryColor,\n    },\n    primary: {\n      main: mainColor,\n      contrastText: secondaryColor,\n    },\n    secondary: {\n      main: secondaryColor,\n      contrastText: mainColor,\n    },\n    ...countryPalette,\n    arrowColors,\n    svg: {\n      filters: {\n        dropShadows: [\n          \"drop-shadow(0px 3px 10px rgba(0, 0, 0, 0.7))\",\n          \"drop-shadow(1px 4px 4px #323232)\",\n        ],\n      },\n    },\n  },\n  typography: {\n    button: {\n      fontSize: 12,\n      fontWeight: boldFontWeight,\n      lineHeight: defaultLineHeight,\n      textTransform: \"none\",\n    },\n  },\n});\n\n/**\n * responsive overrides\n */\nwebDiplomacyTheme.typography.body1 = {\n  fontFamily: webDiplomacyTheme.typography.fontFamily,\n  fontSize: 14,\n  fontWeight: normalFontWeight,\n  lineHeight: defaultLineHeight,\n};\n\nwebDiplomacyTheme.typography.h1 = {\n  fontFamily: webDiplomacyTheme.typography.fontFamily,\n  fontSize: 16,\n  fontWeight: boldFontWeight,\n  lineHeight: defaultLineHeight,\n  [webDiplomacyTheme.breakpoints.up(\"desktop\")]: {\n    fontSize: 20,\n  },\n};\n\nwebDiplomacyTheme.typography.h2 = {\n  fontFamily: webDiplomacyTheme.typography.fontFamily,\n  fontSize: 14,\n  fontWeight: boldFontWeight,\n  lineHeight: defaultLineHeight,\n};\n\nwebDiplomacyTheme.typography.label = {\n  fontFamily: webDiplomacyTheme.typography.fontFamily,\n  fontSize: 10,\n  fontWeight: normalFontWeight,\n  lineHeight: 1,\n};\n\nexport default webDiplomacyTheme;\n","import BuildUnit from \"../enums/BuildUnit\";\n\nexport const BuildUnitTypeMap = {\n  Army: BuildUnit.Army,\n  Fleet: BuildUnit.Fleet,\n  [BuildUnit.Army]: \"Army\",\n  [BuildUnit.Fleet]: \"Fleet\",\n} as const;\n\nconst BuildUnitMap = {\n  [BuildUnit.Army]: \"Build Army\",\n  [BuildUnit.Fleet]: \"Build Fleet\",\n  \"Build Army\": BuildUnit.Army,\n  \"Build Fleet\": BuildUnit.Fleet,\n} as const;\n\nexport default BuildUnitMap;\n"],"sourceRoot":""}